"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/stream/quotes";
exports.ids = ["pages/api/stream/quotes"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstream%2Fquotes&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fstream%2Fquotes.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstream%2Fquotes&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fstream%2Fquotes.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/./node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_stream_quotes_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/pages/api/stream/quotes.ts */ \"(api-node)/./src/pages/api/stream/quotes.ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(api-node)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_stream_quotes_ts__WEBPACK_IMPORTED_MODULE_4__]);\n_src_pages_api_stream_quotes_ts__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_stream_quotes_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_stream_quotes_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/stream/quotes\",\n        pathname: \"/api/stream/quotes\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_stream_quotes_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next/dev\" || 0,\n    relativeProjectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_7__.addRequestMeta)(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/stream/quotes\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: [],\n                multiZoneDraftMode: Boolean(false),\n                trustHostHeader: false,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/stream/quotes\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGc3RyZWFtJTJGcXVvdGVzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZzdHJlYW0lMkZxdW90ZXMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDQztBQUN1QztBQUNyQztBQUMxRDtBQUM2RDtBQUNXO0FBQ0Y7QUFDUDtBQUMvRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDREQUFRO0FBQ3BDO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osYUFBYSxXQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9ELENBQUM7QUFDTTtBQUNQO0FBQ0EsUUFBUSw2RUFBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUF3RDtBQUNwRTtBQUNBO0FBQ0EsdUJBQXVCLDRFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDZDQUE2QyxFQUE2QztBQUMxRiw0Q0FBNEMsS0FBd0M7QUFDcEYsaUNBQWlDLEtBQW9DO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxnRkFBYztBQUMvRSwrREFBK0QseUNBQXlDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsRUFBRSxNQUFNO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esa0JBQWtCO0FBQ2xCLHVDQUF1QyxRQUFRLEVBQUUsUUFBUTtBQUN6RDtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFFQUFTO0FBQ2pCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZW5kRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcGktdXRpbHNcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9zdHJlYW0vcXVvdGVzLnRzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBhZGRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdHJlYW0vcXVvdGVzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3RyZWFtL3F1b3Rlc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kLFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJ1xufSk7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgIGFkZFJlcXVlc3RNZXRhKHJlcSwgJ2RldlJlcXVlc3RUaW1pbmdJbnRlcm5hbHNFbmQnLCBwcm9jZXNzLmhydGltZS5iaWdpbnQoKSk7XG4gICAgfVxuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL3N0cmVhbS9xdW90ZXNcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfVxuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2VcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHF1ZXJ5LCBwYXJhbXMsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0IH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgICAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgICAgICBjb25zdCBvblJlcXVlc3RFcnJvciA9IHJvdXRlTW9kdWxlLmluc3RydW1lbnRhdGlvbk9uUmVxdWVzdEVycm9yLmJpbmQocm91dGVNb2R1bGUpO1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+cm91dGVNb2R1bGUucmVuZGVyKHJlcSwgcmVzLCB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucXVlcnksXG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtc1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRSZXZhbGlkYXRlSGVhZGVyS2V5czogcHJvY2Vzcy5lbnYuX19ORVhUX0FMTE9XRURfUkVWQUxJREFURV9IRUFERVJTLFxuICAgICAgICAgICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZTogQm9vbGVhbihwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFKSxcbiAgICAgICAgICAgICAgICB0cnVzdEhvc3RIZWFkZXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9UUlVTVF9IT1NUX0hFQURFUixcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBnZXQgdGhpcyBmcm9tIGZyb20gcnVudGltZSBlbnYgc28gbWFuaWZlc3RcbiAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IG5lZWQgdG8gbG9hZFxuICAgICAgICAgICAgICAgIHByZXZpZXdQcm9wczogcHJlcmVuZGVyTWFuaWZlc3QucHJldmlldyxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGVFcnJvcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGV2OiByb3V0ZU1vZHVsZS5pc0RldixcbiAgICAgICAgICAgICAgICBwYWdlOiBcIi9hcGkvc3RyZWFtL3F1b3Rlc1wiLFxuICAgICAgICAgICAgICAgIGludGVybmFsUmV2YWxpZGF0ZTogcm91dGVyU2VydmVyQ29udGV4dCA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyU2VydmVyQ29udGV4dC5yZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6ICguLi5hcmdzKT0+b25SZXF1ZXN0RXJyb3IocmVxLCAuLi5hcmdzKVxuICAgICAgICAgICAgfSkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtzcmNQYWdlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtzcmNQYWdlfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaW52b2tlUm91dGVNb2R1bGUpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB3ZSByZS10aHJvdyBpbiBkZXYgdG8gc2hvdyB0aGUgZXJyb3Igb3ZlcmxheVxuICAgICAgICBpZiAocm91dGVNb2R1bGUuaXNEZXYpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzIGlzIHRlY2huaWNhbGx5IGFuIGludmFyaWFudCBhcyBlcnJvciBoYW5kbGluZ1xuICAgICAgICAvLyBzaG91bGQgYmUgZG9uZSBpbnNpZGUgb2YgYXBpLXJlc29sdmVyIG9uRXJyb3JcbiAgICAgICAgc2VuZEVycm9yKHJlcywgNTAwLCAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyk7XG4gICAgfSBmaW5hbGx5e1xuICAgICAgICAvLyBXZSBkb24ndCBhbGxvdyBhbnkgd2FpdFVudGlsIHdvcmsgaW4gcGFnZXMgQVBJIHJvdXRlcyBjdXJyZW50bHlcbiAgICAgICAgLy8gc28gaWYgY2FsbGJhY2sgaXMgcHJlc2VudCByZXR1cm4gd2l0aCByZXNvbHZlZCBwcm9taXNlIHNpbmNlIG5vXG4gICAgICAgIC8vIHBlbmRpbmcgd29ya1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstream%2Fquotes&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fstream%2Fquotes.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/contracts/requestContracts.ts":
/*!*******************************************!*\
  !*** ./src/contracts/requestContracts.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backtestQuerySchema: () => (/* binding */ backtestQuerySchema),\n/* harmony export */   compareQuerySchema: () => (/* binding */ compareQuerySchema),\n/* harmony export */   dashboardQuerySchema: () => (/* binding */ dashboardQuerySchema),\n/* harmony export */   emptyQuerySchema: () => (/* binding */ emptyQuerySchema),\n/* harmony export */   heatmapQuerySchema: () => (/* binding */ heatmapQuerySchema),\n/* harmony export */   insiderFlowQuerySchema: () => (/* binding */ insiderFlowQuerySchema),\n/* harmony export */   newsQuerySchema: () => (/* binding */ newsQuerySchema),\n/* harmony export */   quoteQuerySchema: () => (/* binding */ quoteQuerySchema),\n/* harmony export */   quotesQuerySchema: () => (/* binding */ quotesQuerySchema),\n/* harmony export */   secQuerySchema: () => (/* binding */ secQuerySchema),\n/* harmony export */   stockQuerySchema: () => (/* binding */ stockQuerySchema),\n/* harmony export */   streamQuotesQuerySchema: () => (/* binding */ streamQuotesQuerySchema),\n/* harmony export */   tbankSbpRegistrationBodySchema: () => (/* binding */ tbankSbpRegistrationBodySchema),\n/* harmony export */   tickersQuerySchema: () => (/* binding */ tickersQuerySchema),\n/* harmony export */   timeMachineQuerySchema: () => (/* binding */ timeMachineQuerySchema),\n/* harmony export */   timeSeriesQuerySchema: () => (/* binding */ timeSeriesQuerySchema),\n/* harmony export */   warmupQuerySchema: () => (/* binding */ warmupQuerySchema),\n/* harmony export */   webVitalsBodySchema: () => (/* binding */ webVitalsBodySchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst TRUE_VALUES = new Set([\n    \"1\",\n    \"true\",\n    \"yes\",\n    \"on\"\n]);\nconst FALSE_VALUES = new Set([\n    \"0\",\n    \"false\",\n    \"no\",\n    \"off\"\n]);\nconst SYMBOL_REGEX = /^[A-Za-z][A-Za-z0-9._-]{0,15}$/;\nconst INTERVAL_REGEX = /^[0-9]+(min|h|day|week|month)$/i;\nconst DATE_REGEX = /^\\d{4}-\\d{2}-\\d{2}(?:[Tt ].*)?$/;\nfunction firstValue(value) {\n    if (Array.isArray(value)) {\n        return value.length === 1 ? value[0] : value;\n    }\n    return value;\n}\nfunction toStringValue(value) {\n    const raw = firstValue(value);\n    if (raw === undefined || raw === null) return \"\";\n    return String(raw);\n}\nfunction toBoolean(value, defaultValue) {\n    const raw = firstValue(value);\n    if (raw === undefined || raw === null || raw === \"\") return defaultValue;\n    if (typeof raw === \"boolean\") return raw;\n    const normalized = String(raw).trim().toLowerCase();\n    if (TRUE_VALUES.has(normalized)) return true;\n    if (FALSE_VALUES.has(normalized)) return false;\n    return raw;\n}\nfunction booleanParam(defaultValue) {\n    return zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>toBoolean(value, defaultValue), zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean());\n}\nfunction integerParam(defaultValue, min, max) {\n    return zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n        const raw = firstValue(value);\n        if (raw === undefined || raw === null || raw === \"\") return defaultValue;\n        const numeric = Number(raw);\n        return Number.isFinite(numeric) ? numeric : raw;\n    }, zod__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(min).max(max));\n}\nconst symbolValueSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim().min(1).max(16).regex(SYMBOL_REGEX, \"Invalid symbol format\").transform((value)=>value.toUpperCase());\nconst symbolParamSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>toStringValue(value).trim(), symbolValueSchema);\nconst optionalSymbolParamSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n    const normalized = toStringValue(value).trim();\n    return normalized ? normalized : undefined;\n}, symbolValueSchema.optional());\nfunction requiredSymbolsParam(maxItems) {\n    const base = zod__WEBPACK_IMPORTED_MODULE_0__.z.array(symbolValueSchema).min(1).max(maxItems);\n    return zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n        const raw = Array.isArray(value) ? value.join(\",\") : toStringValue(value);\n        const symbols = Array.from(new Set(raw.split(\",\").map((item)=>item.trim()).filter(Boolean)));\n        return symbols;\n    }, base);\n}\nfunction optionalSymbolsParam(maxItems) {\n    const base = zod__WEBPACK_IMPORTED_MODULE_0__.z.array(symbolValueSchema).min(1).max(maxItems);\n    return zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n        const raw = Array.isArray(value) ? value.join(\",\") : toStringValue(value);\n        const symbols = Array.from(new Set(raw.split(\",\").map((item)=>item.trim()).filter(Boolean)));\n        if (!symbols.length) return undefined;\n        return symbols;\n    }, base.optional());\n}\nconst optionalDateParamSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n    const normalized = toStringValue(value).trim();\n    return normalized ? normalized : undefined;\n}, zod__WEBPACK_IMPORTED_MODULE_0__.z.string().regex(DATE_REGEX, \"Expected date format YYYY-MM-DD\").optional());\nconst intervalParamSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n    const normalized = toStringValue(value).trim();\n    return normalized || \"1day\";\n}, zod__WEBPACK_IMPORTED_MODULE_0__.z.string().regex(INTERVAL_REGEX, \"Invalid interval format\").transform((value)=>value.toLowerCase()));\nconst optionalTrimmedString = (maxLength = 200)=>zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n        const normalized = toStringValue(value).trim();\n        return normalized ? normalized : undefined;\n    }, zod__WEBPACK_IMPORTED_MODULE_0__.z.string().max(maxLength).optional());\nconst requiredTrimmedString = (maxLength = 200)=>zod__WEBPACK_IMPORTED_MODULE_0__.z.string().trim().min(1).max(maxLength);\nconst backtestQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbol: symbolParamSchema,\n    short: integerParam(20, 2, 250),\n    long: integerParam(50, 3, 400)\n}).superRefine((value, ctx)=>{\n    if (value.short >= value.long) {\n        ctx.addIssue({\n            code: zod__WEBPACK_IMPORTED_MODULE_0__.z.ZodIssueCode.custom,\n            message: \"short must be less than long\",\n            path: [\n                \"short\"\n            ]\n        });\n    }\n});\nconst compareQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: requiredSymbolsParam(4)\n});\nconst dashboardQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: optionalSymbolsParam(120),\n    news: booleanParam(true),\n    heatmap: booleanParam(true),\n    newsSymbol: optionalSymbolParamSchema,\n    refresh: booleanParam(false)\n});\nconst heatmapQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    refresh: booleanParam(false)\n});\nconst insiderFlowQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: optionalSymbolsParam(10)\n});\nconst newsQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbol: optionalSymbolParamSchema,\n    from: optionalDateParamSchema,\n    to: optionalDateParamSchema,\n    refresh: booleanParam(false)\n});\nconst quoteQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbol: symbolParamSchema,\n    refresh: booleanParam(false)\n});\nconst quotesQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: requiredSymbolsParam(120),\n    refresh: booleanParam(false)\n});\nconst secQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbol: symbolParamSchema,\n    refresh: booleanParam(false)\n});\nconst stockQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbol: symbolParamSchema,\n    interval: intervalParamSchema,\n    refresh: booleanParam(false)\n});\nconst tickersQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    q: zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>toStringValue(value).trim().toUpperCase(), zod__WEBPACK_IMPORTED_MODULE_0__.z.string().max(32)),\n    limit: integerParam(12, 1, 40),\n    refresh: booleanParam(false)\n});\nconst timeMachineQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: requiredSymbolsParam(4)\n});\nconst timeSeriesQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbol: symbolParamSchema,\n    interval: intervalParamSchema,\n    refresh: booleanParam(false)\n});\nconst warmupQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: optionalSymbolsParam(12),\n    refresh: booleanParam(false)\n});\nconst streamQuotesQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    symbols: requiredSymbolsParam(24)\n});\nconst tbankSbpRegistrationBodySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    extCompanyId: requiredTrimmedString(80),\n    extShopId: requiredTrimmedString(80),\n    bankName: requiredTrimmedString(120),\n    bik: requiredTrimmedString(40),\n    corrAccount: requiredTrimmedString(60),\n    currentAccount: requiredTrimmedString(60),\n    serialNumber: requiredTrimmedString(80),\n    apiType: zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n        const normalized = toStringValue(value).trim();\n        return normalized || \"sbp\";\n    }, requiredTrimmedString(20)),\n    partnerId: optionalTrimmedString(120)\n});\nconst webVitalsBodySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: requiredTrimmedString(100),\n    name: requiredTrimmedString(64),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess((value)=>{\n        const numeric = Number(value);\n        return Number.isFinite(numeric) ? numeric : value;\n    }, zod__WEBPACK_IMPORTED_MODULE_0__.z.number().finite()),\n    rating: optionalTrimmedString(32),\n    navigationType: optionalTrimmedString(64)\n});\nconst emptyQuerySchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({}).strict();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9jb250cmFjdHMvcmVxdWVzdENvbnRyYWN0cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBRXhCLE1BQU1DLGNBQWMsSUFBSUMsSUFBSTtJQUFDO0lBQUs7SUFBUTtJQUFPO0NBQUs7QUFDdEQsTUFBTUMsZUFBZSxJQUFJRCxJQUFJO0lBQUM7SUFBSztJQUFTO0lBQU07Q0FBTTtBQUN4RCxNQUFNRSxlQUFlO0FBQ3JCLE1BQU1DLGlCQUFpQjtBQUN2QixNQUFNQyxhQUFhO0FBRW5CLFNBQVNDLFdBQVdDLEtBQWM7SUFDaEMsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixRQUFRO1FBQ3hCLE9BQU9BLE1BQU1HLE1BQU0sS0FBSyxJQUFJSCxLQUFLLENBQUMsRUFBRSxHQUFHQTtJQUN6QztJQUNBLE9BQU9BO0FBQ1Q7QUFFQSxTQUFTSSxjQUFjSixLQUFjO0lBQ25DLE1BQU1LLE1BQU1OLFdBQVdDO0lBQ3ZCLElBQUlLLFFBQVFDLGFBQWFELFFBQVEsTUFBTSxPQUFPO0lBQzlDLE9BQU9FLE9BQU9GO0FBQ2hCO0FBRUEsU0FBU0csVUFBVVIsS0FBYyxFQUFFUyxZQUFxQjtJQUN0RCxNQUFNSixNQUFNTixXQUFXQztJQUN2QixJQUFJSyxRQUFRQyxhQUFhRCxRQUFRLFFBQVFBLFFBQVEsSUFBSSxPQUFPSTtJQUM1RCxJQUFJLE9BQU9KLFFBQVEsV0FBVyxPQUFPQTtJQUNyQyxNQUFNSyxhQUFhSCxPQUFPRixLQUFLTSxJQUFJLEdBQUdDLFdBQVc7SUFDakQsSUFBSW5CLFlBQVlvQixHQUFHLENBQUNILGFBQWEsT0FBTztJQUN4QyxJQUFJZixhQUFha0IsR0FBRyxDQUFDSCxhQUFhLE9BQU87SUFDekMsT0FBT0w7QUFDVDtBQUVBLFNBQVNTLGFBQWFMLFlBQXFCO0lBQ3pDLE9BQU9qQixrQ0FBQ0EsQ0FBQ3VCLFVBQVUsQ0FBQyxDQUFDZixRQUFVUSxVQUFVUixPQUFPUyxlQUFlakIsa0NBQUNBLENB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SUFDOUMsR0FBR1Isa0NBQUNBLENBQUMrQixNQUFNLEdBQUc0RSxNQUFNO0lBQ3BCQyxRQUFRcEQsc0JBQXNCO0lBQzlCcUQsZ0JBQWdCckQsc0JBQXNCO0FBQ3hDLEdBQUc7QUFFSSxNQUFNc0QsbUJBQW1COUcsa0NBQUNBLENBQUM0RCxNQUFNLENBQUMsQ0FBQyxHQUFHbUQsTUFBTSxHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvdHV1bGFpL0RvY3VtZW50cy90bXAvc3JjL2NvbnRyYWN0cy9yZXF1ZXN0Q29udHJhY3RzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmNvbnN0IFRSVUVfVkFMVUVTID0gbmV3IFNldChbXCIxXCIsIFwidHJ1ZVwiLCBcInllc1wiLCBcIm9uXCJdKTtcbmNvbnN0IEZBTFNFX1ZBTFVFUyA9IG5ldyBTZXQoW1wiMFwiLCBcImZhbHNlXCIsIFwibm9cIiwgXCJvZmZcIl0pO1xuY29uc3QgU1lNQk9MX1JFR0VYID0gL15bQS1aYS16XVtBLVphLXowLTkuXy1dezAsMTV9JC87XG5jb25zdCBJTlRFUlZBTF9SRUdFWCA9IC9eWzAtOV0rKG1pbnxofGRheXx3ZWVrfG1vbnRoKSQvaTtcbmNvbnN0IERBVEVfUkVHRVggPSAvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9KD86W1R0IF0uKik/JC87XG5cbmZ1bmN0aW9uIGZpcnN0VmFsdWUodmFsdWU6IHVua25vd24pOiB1bmtub3duIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA9PT0gMSA/IHZhbHVlWzBdIDogdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiB0b1N0cmluZ1ZhbHVlKHZhbHVlOiB1bmtub3duKTogc3RyaW5nIHtcbiAgY29uc3QgcmF3ID0gZmlyc3RWYWx1ZSh2YWx1ZSk7XG4gIGlmIChyYXcgPT09IHVuZGVmaW5lZCB8fCByYXcgPT09IG51bGwpIHJldHVybiBcIlwiO1xuICByZXR1cm4gU3RyaW5nKHJhdyk7XG59XG5cbmZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZTogdW5rbm93biwgZGVmYXVsdFZhbHVlOiBib29sZWFuKTogdW5rbm93biB7XG4gIGNvbnN0IHJhdyA9IGZpcnN0VmFsdWUodmFsdWUpO1xuICBpZiAocmF3ID09PSB1bmRlZmluZWQgfHwgcmF3ID09PSBudWxsIHx8IHJhdyA9PT0gXCJcIikgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgaWYgKHR5cGVvZiByYXcgPT09IFwiYm9vbGVhblwiKSByZXR1cm4gcmF3O1xuICBjb25zdCBub3JtYWxpemVkID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChUUlVFX1ZBTFVFUy5oYXMobm9ybWFsaXplZCkpIHJldHVybiB0cnVlO1xuICBpZiAoRkFMU0VfVkFMVUVTLmhhcyhub3JtYWxpemVkKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gcmF3O1xufVxuXG5mdW5jdGlvbiBib29sZWFuUGFyYW0oZGVmYXVsdFZhbHVlOiBib29sZWFuKSB7XG4gIHJldHVybiB6LnByZXByb2Nlc3MoKHZhbHVlKSA9PiB0b0Jvb2xlYW4odmFsdWUsIGRlZmF1bHRWYWx1ZSksIHouYm9vbGVhbigpKTtcbn1cblxuZnVuY3Rpb24gaW50ZWdlclBhcmFtKGRlZmF1bHRWYWx1ZTogbnVtYmVyLCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgcmV0dXJuIHoucHJlcHJvY2VzcygodmFsdWUpID0+IHtcbiAgICBjb25zdCByYXcgPSBmaXJzdFZhbHVlKHZhbHVlKTtcbiAgICBpZiAocmF3ID09PSB1bmRlZmluZWQgfHwgcmF3ID09PSBudWxsIHx8IHJhdyA9PT0gXCJcIikgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICBjb25zdCBudW1lcmljID0gTnVtYmVyKHJhdyk7XG4gICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShudW1lcmljKSA/IG51bWVyaWMgOiByYXc7XG4gIH0sIHoubnVtYmVyKCkuaW50KCkubWluKG1pbikubWF4KG1heCkpO1xufVxuXG5jb25zdCBzeW1ib2xWYWx1ZVNjaGVtYSA9IHpcbiAgLnN0cmluZygpXG4gIC50cmltKClcbiAgLm1pbigxKVxuICAubWF4KDE2KVxuICAucmVnZXgoU1lNQk9MX1JFR0VYLCBcIkludmFsaWQgc3ltYm9sIGZvcm1hdFwiKVxuICAudHJhbnNmb3JtKCh2YWx1ZSkgPT4gdmFsdWUudG9VcHBlckNhc2UoKSk7XG5cbmNvbnN0IHN5bWJvbFBhcmFtU2NoZW1hID0gei5wcmVwcm9jZXNzKFxuICAodmFsdWUpID0+IHRvU3RyaW5nVmFsdWUodmFsdWUpLnRyaW0oKSxcbiAgc3ltYm9sVmFsdWVTY2hlbWFcbik7XG5cbmNvbnN0IG9wdGlvbmFsU3ltYm9sUGFyYW1TY2hlbWEgPSB6LnByZXByb2Nlc3MoKHZhbHVlKSA9PiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB0b1N0cmluZ1ZhbHVlKHZhbHVlKS50cmltKCk7XG4gIHJldHVybiBub3JtYWxpemVkID8gbm9ybWFsaXplZCA6IHVuZGVmaW5lZDtcbn0sIHN5bWJvbFZhbHVlU2NoZW1hLm9wdGlvbmFsKCkpO1xuXG5mdW5jdGlvbiByZXF1aXJlZFN5bWJvbHNQYXJhbShtYXhJdGVtczogbnVtYmVyKSB7XG4gIGNvbnN0IGJhc2UgPSB6LmFycmF5KHN5bWJvbFZhbHVlU2NoZW1hKS5taW4oMSkubWF4KG1heEl0ZW1zKTtcbiAgcmV0dXJuIHoucHJlcHJvY2VzcygodmFsdWUpID0+IHtcbiAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oXCIsXCIpIDogdG9TdHJpbmdWYWx1ZSh2YWx1ZSk7XG4gICAgY29uc3Qgc3ltYm9scyA9IEFycmF5LmZyb20oXG4gICAgICBuZXcgU2V0KFxuICAgICAgICByYXdcbiAgICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS50cmltKCkpXG4gICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgKVxuICAgICk7XG4gICAgcmV0dXJuIHN5bWJvbHM7XG4gIH0sIGJhc2UpO1xufVxuXG5mdW5jdGlvbiBvcHRpb25hbFN5bWJvbHNQYXJhbShtYXhJdGVtczogbnVtYmVyKSB7XG4gIGNvbnN0IGJhc2UgPSB6LmFycmF5KHN5bWJvbFZhbHVlU2NoZW1hKS5taW4oMSkubWF4KG1heEl0ZW1zKTtcbiAgcmV0dXJuIHoucHJlcHJvY2VzcygodmFsdWUpID0+IHtcbiAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oXCIsXCIpIDogdG9TdHJpbmdWYWx1ZSh2YWx1ZSk7XG4gICAgY29uc3Qgc3ltYm9scyA9IEFycmF5LmZyb20oXG4gICAgICBuZXcgU2V0KFxuICAgICAgICByYXdcbiAgICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS50cmltKCkpXG4gICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgKVxuICAgICk7XG4gICAgaWYgKCFzeW1ib2xzLmxlbmd0aCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc3ltYm9scztcbiAgfSwgYmFzZS5vcHRpb25hbCgpKTtcbn1cblxuY29uc3Qgb3B0aW9uYWxEYXRlUGFyYW1TY2hlbWEgPSB6LnByZXByb2Nlc3MoKHZhbHVlKSA9PiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB0b1N0cmluZ1ZhbHVlKHZhbHVlKS50cmltKCk7XG4gIHJldHVybiBub3JtYWxpemVkID8gbm9ybWFsaXplZCA6IHVuZGVmaW5lZDtcbn0sIHouc3RyaW5nKCkucmVnZXgoREFURV9SRUdFWCwgXCJFeHBlY3RlZCBkYXRlIGZvcm1hdCBZWVlZLU1NLUREXCIpLm9wdGlvbmFsKCkpO1xuXG5jb25zdCBpbnRlcnZhbFBhcmFtU2NoZW1hID0gei5wcmVwcm9jZXNzKCh2YWx1ZSkgPT4ge1xuICBjb25zdCBub3JtYWxpemVkID0gdG9TdHJpbmdWYWx1ZSh2YWx1ZSkudHJpbSgpO1xuICByZXR1cm4gbm9ybWFsaXplZCB8fCBcIjFkYXlcIjtcbn0sIHouc3RyaW5nKCkucmVnZXgoSU5URVJWQUxfUkVHRVgsIFwiSW52YWxpZCBpbnRlcnZhbCBmb3JtYXRcIikudHJhbnNmb3JtKCh2YWx1ZSkgPT4gdmFsdWUudG9Mb3dlckNhc2UoKSkpO1xuXG5jb25zdCBvcHRpb25hbFRyaW1tZWRTdHJpbmcgPSAobWF4TGVuZ3RoID0gMjAwKSA9PlxuICB6LnByZXByb2Nlc3MoKHZhbHVlKSA9PiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRvU3RyaW5nVmFsdWUodmFsdWUpLnRyaW0oKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZCA/IG5vcm1hbGl6ZWQgOiB1bmRlZmluZWQ7XG4gIH0sIHouc3RyaW5nKCkubWF4KG1heExlbmd0aCkub3B0aW9uYWwoKSk7XG5cbmNvbnN0IHJlcXVpcmVkVHJpbW1lZFN0cmluZyA9IChtYXhMZW5ndGggPSAyMDApID0+XG4gIHouc3RyaW5nKCkudHJpbSgpLm1pbigxKS5tYXgobWF4TGVuZ3RoKTtcblxuZXhwb3J0IGNvbnN0IGJhY2t0ZXN0UXVlcnlTY2hlbWEgPSB6XG4gIC5vYmplY3Qoe1xuICAgIHN5bWJvbDogc3ltYm9sUGFyYW1TY2hlbWEsXG4gICAgc2hvcnQ6IGludGVnZXJQYXJhbSgyMCwgMiwgMjUwKSxcbiAgICBsb25nOiBpbnRlZ2VyUGFyYW0oNTAsIDMsIDQwMClcbiAgfSlcbiAgLnN1cGVyUmVmaW5lKCh2YWx1ZSwgY3R4KSA9PiB7XG4gICAgaWYgKHZhbHVlLnNob3J0ID49IHZhbHVlLmxvbmcpIHtcbiAgICAgIGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgIGNvZGU6IHouWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgbWVzc2FnZTogXCJzaG9ydCBtdXN0IGJlIGxlc3MgdGhhbiBsb25nXCIsXG4gICAgICAgIHBhdGg6IFtcInNob3J0XCJdXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG5leHBvcnQgY29uc3QgY29tcGFyZVF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICBzeW1ib2xzOiByZXF1aXJlZFN5bWJvbHNQYXJhbSg0KVxufSk7XG5cbmV4cG9ydCBjb25zdCBkYXNoYm9hcmRRdWVyeVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgc3ltYm9sczogb3B0aW9uYWxTeW1ib2xzUGFyYW0oMTIwKSxcbiAgbmV3czogYm9vbGVhblBhcmFtKHRydWUpLFxuICBoZWF0bWFwOiBib29sZWFuUGFyYW0odHJ1ZSksXG4gIG5ld3NTeW1ib2w6IG9wdGlvbmFsU3ltYm9sUGFyYW1TY2hlbWEsXG4gIHJlZnJlc2g6IGJvb2xlYW5QYXJhbShmYWxzZSlcbn0pO1xuXG5leHBvcnQgY29uc3QgaGVhdG1hcFF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICByZWZyZXNoOiBib29sZWFuUGFyYW0oZmFsc2UpXG59KTtcblxuZXhwb3J0IGNvbnN0IGluc2lkZXJGbG93UXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN5bWJvbHM6IG9wdGlvbmFsU3ltYm9sc1BhcmFtKDEwKVxufSk7XG5cbmV4cG9ydCBjb25zdCBuZXdzUXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN5bWJvbDogb3B0aW9uYWxTeW1ib2xQYXJhbVNjaGVtYSxcbiAgZnJvbTogb3B0aW9uYWxEYXRlUGFyYW1TY2hlbWEsXG4gIHRvOiBvcHRpb25hbERhdGVQYXJhbVNjaGVtYSxcbiAgcmVmcmVzaDogYm9vbGVhblBhcmFtKGZhbHNlKVxufSk7XG5cbmV4cG9ydCBjb25zdCBxdW90ZVF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICBzeW1ib2w6IHN5bWJvbFBhcmFtU2NoZW1hLFxuICByZWZyZXNoOiBib29sZWFuUGFyYW0oZmFsc2UpXG59KTtcblxuZXhwb3J0IGNvbnN0IHF1b3Rlc1F1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICBzeW1ib2xzOiByZXF1aXJlZFN5bWJvbHNQYXJhbSgxMjApLFxuICByZWZyZXNoOiBib29sZWFuUGFyYW0oZmFsc2UpXG59KTtcblxuZXhwb3J0IGNvbnN0IHNlY1F1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICBzeW1ib2w6IHN5bWJvbFBhcmFtU2NoZW1hLFxuICByZWZyZXNoOiBib29sZWFuUGFyYW0oZmFsc2UpXG59KTtcblxuZXhwb3J0IGNvbnN0IHN0b2NrUXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN5bWJvbDogc3ltYm9sUGFyYW1TY2hlbWEsXG4gIGludGVydmFsOiBpbnRlcnZhbFBhcmFtU2NoZW1hLFxuICByZWZyZXNoOiBib29sZWFuUGFyYW0oZmFsc2UpXG59KTtcblxuZXhwb3J0IGNvbnN0IHRpY2tlcnNRdWVyeVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcTogei5wcmVwcm9jZXNzKCh2YWx1ZSkgPT4gdG9TdHJpbmdWYWx1ZSh2YWx1ZSkudHJpbSgpLnRvVXBwZXJDYXNlKCksIHouc3RyaW5nKCkubWF4KDMyKSksXG4gIGxpbWl0OiBpbnRlZ2VyUGFyYW0oMTIsIDEsIDQwKSxcbiAgcmVmcmVzaDogYm9vbGVhblBhcmFtKGZhbHNlKVxufSk7XG5cbmV4cG9ydCBjb25zdCB0aW1lTWFjaGluZVF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICBzeW1ib2xzOiByZXF1aXJlZFN5bWJvbHNQYXJhbSg0KVxufSk7XG5cbmV4cG9ydCBjb25zdCB0aW1lU2VyaWVzUXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN5bWJvbDogc3ltYm9sUGFyYW1TY2hlbWEsXG4gIGludGVydmFsOiBpbnRlcnZhbFBhcmFtU2NoZW1hLFxuICByZWZyZXNoOiBib29sZWFuUGFyYW0oZmFsc2UpXG59KTtcblxuZXhwb3J0IGNvbnN0IHdhcm11cFF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe1xuICBzeW1ib2xzOiBvcHRpb25hbFN5bWJvbHNQYXJhbSgxMiksXG4gIHJlZnJlc2g6IGJvb2xlYW5QYXJhbShmYWxzZSlcbn0pO1xuXG5leHBvcnQgY29uc3Qgc3RyZWFtUXVvdGVzUXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN5bWJvbHM6IHJlcXVpcmVkU3ltYm9sc1BhcmFtKDI0KVxufSk7XG5cbmV4cG9ydCBjb25zdCB0YmFua1NicFJlZ2lzdHJhdGlvbkJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGV4dENvbXBhbnlJZDogcmVxdWlyZWRUcmltbWVkU3RyaW5nKDgwKSxcbiAgZXh0U2hvcElkOiByZXF1aXJlZFRyaW1tZWRTdHJpbmcoODApLFxuICBiYW5rTmFtZTogcmVxdWlyZWRUcmltbWVkU3RyaW5nKDEyMCksXG4gIGJpazogcmVxdWlyZWRUcmltbWVkU3RyaW5nKDQwKSxcbiAgY29yckFjY291bnQ6IHJlcXVpcmVkVHJpbW1lZFN0cmluZyg2MCksXG4gIGN1cnJlbnRBY2NvdW50OiByZXF1aXJlZFRyaW1tZWRTdHJpbmcoNjApLFxuICBzZXJpYWxOdW1iZXI6IHJlcXVpcmVkVHJpbW1lZFN0cmluZyg4MCksXG4gIGFwaVR5cGU6IHoucHJlcHJvY2VzcygodmFsdWUpID0+IHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdG9TdHJpbmdWYWx1ZSh2YWx1ZSkudHJpbSgpO1xuICAgIHJldHVybiBub3JtYWxpemVkIHx8IFwic2JwXCI7XG4gIH0sIHJlcXVpcmVkVHJpbW1lZFN0cmluZygyMCkpLFxuICBwYXJ0bmVySWQ6IG9wdGlvbmFsVHJpbW1lZFN0cmluZygxMjApXG59KTtcblxuZXhwb3J0IGNvbnN0IHdlYlZpdGFsc0JvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiByZXF1aXJlZFRyaW1tZWRTdHJpbmcoMTAwKSxcbiAgbmFtZTogcmVxdWlyZWRUcmltbWVkU3RyaW5nKDY0KSxcbiAgdmFsdWU6IHoucHJlcHJvY2VzcygodmFsdWUpID0+IHtcbiAgICBjb25zdCBudW1lcmljID0gTnVtYmVyKHZhbHVlKTtcbiAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG51bWVyaWMpID8gbnVtZXJpYyA6IHZhbHVlO1xuICB9LCB6Lm51bWJlcigpLmZpbml0ZSgpKSxcbiAgcmF0aW5nOiBvcHRpb25hbFRyaW1tZWRTdHJpbmcoMzIpLFxuICBuYXZpZ2F0aW9uVHlwZTogb3B0aW9uYWxUcmltbWVkU3RyaW5nKDY0KVxufSk7XG5cbmV4cG9ydCBjb25zdCBlbXB0eVF1ZXJ5U2NoZW1hID0gei5vYmplY3Qoe30pLnN0cmljdCgpO1xuIl0sIm5hbWVzIjpbInoiLCJUUlVFX1ZBTFVFUyIsIlNldCIsIkZBTFNFX1ZBTFVFUyIsIlNZTUJPTF9SRUdFWCIsIklOVEVSVkFMX1JFR0VYIiwiREFURV9SRUdFWCIsImZpcnN0VmFsdWUiLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsInRvU3RyaW5nVmFsdWUiLCJyYXciLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJ0b0Jvb2xlYW4iLCJkZWZhdWx0VmFsdWUiLCJub3JtYWxpemVkIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiaGFzIiwiYm9vbGVhblBhcmFtIiwicHJlcHJvY2VzcyIsImJvb2xlYW4iLCJpbnRlZ2VyUGFyYW0iLCJtaW4iLCJtYXgiLCJudW1lcmljIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJudW1iZXIiLCJpbnQiLCJzeW1ib2xWYWx1ZVNjaGVtYSIsInN0cmluZyIsInJlZ2V4IiwidHJhbnNmb3JtIiwidG9VcHBlckNhc2UiLCJzeW1ib2xQYXJhbVNjaGVtYSIsIm9wdGlvbmFsU3ltYm9sUGFyYW1TY2hlbWEiLCJvcHRpb25hbCIsInJlcXVpcmVkU3ltYm9sc1BhcmFtIiwibWF4SXRlbXMiLCJiYXNlIiwiYXJyYXkiLCJqb2luIiwic3ltYm9scyIsImZyb20iLCJzcGxpdCIsIm1hcCIsIml0ZW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwib3B0aW9uYWxTeW1ib2xzUGFyYW0iLCJvcHRpb25hbERhdGVQYXJhbVNjaGVtYSIsImludGVydmFsUGFyYW1TY2hlbWEiLCJvcHRpb25hbFRyaW1tZWRTdHJpbmciLCJtYXhMZW5ndGgiLCJyZXF1aXJlZFRyaW1tZWRTdHJpbmciLCJiYWNrdGVzdFF1ZXJ5U2NoZW1hIiwib2JqZWN0Iiwic3ltYm9sIiwic2hvcnQiLCJsb25nIiwic3VwZXJSZWZpbmUiLCJjdHgiLCJhZGRJc3N1ZSIsImNvZGUiLCJab2RJc3N1ZUNvZGUiLCJjdXN0b20iLCJtZXNzYWdlIiwicGF0aCIsImNvbXBhcmVRdWVyeVNjaGVtYSIsImRhc2hib2FyZFF1ZXJ5U2NoZW1hIiwibmV3cyIsImhlYXRtYXAiLCJuZXdzU3ltYm9sIiwicmVmcmVzaCIsImhlYXRtYXBRdWVyeVNjaGVtYSIsImluc2lkZXJGbG93UXVlcnlTY2hlbWEiLCJuZXdzUXVlcnlTY2hlbWEiLCJ0byIsInF1b3RlUXVlcnlTY2hlbWEiLCJxdW90ZXNRdWVyeVNjaGVtYSIsInNlY1F1ZXJ5U2NoZW1hIiwic3RvY2tRdWVyeVNjaGVtYSIsImludGVydmFsIiwidGlja2Vyc1F1ZXJ5U2NoZW1hIiwicSIsImxpbWl0IiwidGltZU1hY2hpbmVRdWVyeVNjaGVtYSIsInRpbWVTZXJpZXNRdWVyeVNjaGVtYSIsIndhcm11cFF1ZXJ5U2NoZW1hIiwic3RyZWFtUXVvdGVzUXVlcnlTY2hlbWEiLCJ0YmFua1NicFJlZ2lzdHJhdGlvbkJvZHlTY2hlbWEiLCJleHRDb21wYW55SWQiLCJleHRTaG9wSWQiLCJiYW5rTmFtZSIsImJpayIsImNvcnJBY2NvdW50IiwiY3VycmVudEFjY291bnQiLCJzZXJpYWxOdW1iZXIiLCJhcGlUeXBlIiwicGFydG5lcklkIiwid2ViVml0YWxzQm9keVNjaGVtYSIsImlkIiwibmFtZSIsImZpbml0ZSIsInJhdGluZyIsIm5hdmlnYXRpb25UeXBlIiwiZW1wdHlRdWVyeVNjaGVtYSIsInN0cmljdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/contracts/requestContracts.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/apiValidation.ts":
/*!**********************************!*\
  !*** ./src/lib/apiValidation.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseBody: () => (/* binding */ parseBody),\n/* harmony export */   parseQuery: () => (/* binding */ parseQuery)\n/* harmony export */ });\nfunction normalizeValue(value) {\n    if (Array.isArray(value)) {\n        if (value.length <= 1) return value[0];\n        return value;\n    }\n    return value;\n}\nfunction normalizeObject(input) {\n    if (!input || typeof input !== \"object\") return {};\n    return Object.fromEntries(Object.entries(input).map(([key, value])=>[\n            key,\n            normalizeValue(value)\n        ]));\n}\nfunction formatIssues(error) {\n    return error.issues.map((issue)=>({\n            path: issue.path.join(\".\") || \"root\",\n            message: issue.message\n        }));\n}\nfunction sendValidationError(res, label, error) {\n    res.status(400).json({\n        error: `Invalid ${label}`,\n        issues: formatIssues(error)\n    });\n    return null;\n}\nfunction parseQuery(req, res, schema) {\n    const payload = normalizeObject(req.query);\n    const result = schema.safeParse(payload);\n    if (!result.success) {\n        return sendValidationError(res, \"query parameters\", result.error);\n    }\n    return result.data;\n}\nfunction parseBody(req, res, schema) {\n    let body = req.body;\n    if (typeof body === \"string\") {\n        try {\n            body = JSON.parse(body);\n        } catch  {\n            res.status(400).json({\n                error: \"Invalid request body\",\n                issues: [\n                    {\n                        path: \"root\",\n                        message: \"Body must be valid JSON\"\n                    }\n                ]\n            });\n            return null;\n        }\n    }\n    const payload = normalizeObject(body);\n    const result = schema.safeParse(payload);\n    if (!result.success) {\n        return sendValidationError(res, \"request body\", result.error);\n    }\n    return result.data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvYXBpVmFsaWRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUdBLFNBQVNBLGVBQWVDLEtBQWM7SUFDcEMsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixRQUFRO1FBQ3hCLElBQUlBLE1BQU1HLE1BQU0sSUFBSSxHQUFHLE9BQU9ILEtBQUssQ0FBQyxFQUFFO1FBQ3RDLE9BQU9BO0lBQ1Q7SUFDQSxPQUFPQTtBQUNUO0FBRUEsU0FBU0ksZ0JBQWdCQyxLQUFjO0lBQ3JDLElBQUksQ0FBQ0EsU0FBUyxPQUFPQSxVQUFVLFVBQVUsT0FBTyxDQUFDO0lBQ2pELE9BQU9DLE9BQU9DLFdBQVcsQ0FDdkJELE9BQU9FLE9BQU8sQ0FBQ0gsT0FBa0NJLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEtBQUtWLE1BQU0sR0FBSztZQUNyRVU7WUFDQVgsZUFBZUM7U0FDaEI7QUFFTDtBQUVBLFNBQVNXLGFBQWFDLEtBQWlCO0lBQ3JDLE9BQU9BLE1BQU1DLE1BQU0sQ0FBQ0osR0FBRyxDQUFDLENBQUNLLFFBQVc7WUFDbENDLE1BQU1ELE1BQU1DLElBQUksQ0FBQ0MsSUFBSSxDQUFDLFFBQVE7WUFDOUJDLFNBQVNILE1BQU1HLE9BQU87UUFDeEI7QUFDRjtBQUVBLFNBQVNDLG9CQUNQQyxHQUFvQixFQUNwQkMsS0FBYSxFQUNiUixLQUFpQjtJQUVqQk8sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUNuQlYsT0FBTyxDQUFDLFFBQVEsRUFBRVEsT0FBTztRQUN6QlAsUUFBUUYsYUFBYUM7SUFDdkI7SUFDQSxPQUFPO0FBQ1Q7QUFFTyxTQUFTVyxXQUNkQyxHQUFtQixFQUNuQkwsR0FBb0IsRUFDcEJNLE1BQVM7SUFFVCxNQUFNQyxVQUFVdEIsZ0JBQWdCb0IsSUFBSUcsS0FBSztJQUN6QyxNQUFNQyxTQUFTSCxPQUFPSSxTQUFTLENBQUNIO0lBQ2hDLElBQUksQ0FBQ0UsT0FBT0UsT0FBTyxFQUFFO1FBQ25CLE9BQU9aLG9CQUFvQkMsS0FBSyxvQkFBb0JTLE9BQU9oQixLQUFLO0lBQ2xFO0lBQ0EsT0FBT2dCLE9BQU9HLElBQUk7QUFDcEI7QUFFTyxTQUFTQyxVQUNkUixHQUFtQixFQUNuQkwsR0FBb0IsRUFDcEJNLE1BQVM7SUFFVCxJQUFJUSxPQUFnQlQsSUFBSVMsSUFBSTtJQUM1QixJQUFJLE9BQU9BLFNBQVMsVUFBVTtRQUM1QixJQUFJO1lBQ0ZBLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ0Y7UUFDcEIsRUFBRSxPQUFNO1lBQ05kLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVWLE9BQU87Z0JBQXdCQyxRQUFRO29CQUFDO3dCQUFFRSxNQUFNO3dCQUFRRSxTQUFTO29CQUEwQjtpQkFBRTtZQUFDO1lBQ3JILE9BQU87UUFDVDtJQUNGO0lBRUEsTUFBTVMsVUFBVXRCLGdCQUFnQjZCO0lBQ2hDLE1BQU1MLFNBQVNILE9BQU9JLFNBQVMsQ0FBQ0g7SUFDaEMsSUFBSSxDQUFDRSxPQUFPRSxPQUFPLEVBQUU7UUFDbkIsT0FBT1osb0JBQW9CQyxLQUFLLGdCQUFnQlMsT0FBT2hCLEtBQUs7SUFDOUQ7SUFDQSxPQUFPZ0IsT0FBT0csSUFBSTtBQUNwQiIsInNvdXJjZXMiOlsiL1VzZXJzL3R1dWxhaS9Eb2N1bWVudHMvdG1wL3NyYy9saWIvYXBpVmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHR5cGUgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5mdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZTogdW5rbm93bik6IHVua25vd24ge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBpZiAodmFsdWUubGVuZ3RoIDw9IDEpIHJldHVybiB2YWx1ZVswXTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPYmplY3QoaW5wdXQ6IHVua25vd24pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIGlmICghaW5wdXQgfHwgdHlwZW9mIGlucHV0ICE9PSBcIm9iamVjdFwiKSByZXR1cm4ge307XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgT2JqZWN0LmVudHJpZXMoaW5wdXQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBbXG4gICAgICBrZXksXG4gICAgICBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgICBdKVxuICApO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRJc3N1ZXMoZXJyb3I6IHouWm9kRXJyb3IpIHtcbiAgcmV0dXJuIGVycm9yLmlzc3Vlcy5tYXAoKGlzc3VlKSA9PiAoe1xuICAgIHBhdGg6IGlzc3VlLnBhdGguam9pbihcIi5cIikgfHwgXCJyb290XCIsXG4gICAgbWVzc2FnZTogaXNzdWUubWVzc2FnZVxuICB9KSk7XG59XG5cbmZ1bmN0aW9uIHNlbmRWYWxpZGF0aW9uRXJyb3IoXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxuICBsYWJlbDogc3RyaW5nLFxuICBlcnJvcjogei5ab2RFcnJvclxuKTogbnVsbCB7XG4gIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICBlcnJvcjogYEludmFsaWQgJHtsYWJlbH1gLFxuICAgIGlzc3VlczogZm9ybWF0SXNzdWVzKGVycm9yKVxuICB9KTtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5PFQgZXh0ZW5kcyB6LlpvZFR5cGVBbnk+KFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZSxcbiAgc2NoZW1hOiBUXG4pOiB6LmluZmVyPFQ+IHwgbnVsbCB7XG4gIGNvbnN0IHBheWxvYWQgPSBub3JtYWxpemVPYmplY3QocmVxLnF1ZXJ5KTtcbiAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLnNhZmVQYXJzZShwYXlsb2FkKTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybiBzZW5kVmFsaWRhdGlvbkVycm9yKHJlcywgXCJxdWVyeSBwYXJhbWV0ZXJzXCIsIHJlc3VsdC5lcnJvcik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdC5kYXRhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCb2R5PFQgZXh0ZW5kcyB6LlpvZFR5cGVBbnk+KFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZSxcbiAgc2NoZW1hOiBUXG4pOiB6LmluZmVyPFQ+IHwgbnVsbCB7XG4gIGxldCBib2R5OiB1bmtub3duID0gcmVxLmJvZHk7XG4gIGlmICh0eXBlb2YgYm9keSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRyeSB7XG4gICAgICBib2R5ID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIiwgaXNzdWVzOiBbeyBwYXRoOiBcInJvb3RcIiwgbWVzc2FnZTogXCJCb2R5IG11c3QgYmUgdmFsaWQgSlNPTlwiIH1dIH0pO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcGF5bG9hZCA9IG5vcm1hbGl6ZU9iamVjdChib2R5KTtcbiAgY29uc3QgcmVzdWx0ID0gc2NoZW1hLnNhZmVQYXJzZShwYXlsb2FkKTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIHJldHVybiBzZW5kVmFsaWRhdGlvbkVycm9yKHJlcywgXCJyZXF1ZXN0IGJvZHlcIiwgcmVzdWx0LmVycm9yKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0LmRhdGE7XG59XG4iXSwibmFtZXMiOlsibm9ybWFsaXplVmFsdWUiLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIm5vcm1hbGl6ZU9iamVjdCIsImlucHV0IiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwibWFwIiwia2V5IiwiZm9ybWF0SXNzdWVzIiwiZXJyb3IiLCJpc3N1ZXMiLCJpc3N1ZSIsInBhdGgiLCJqb2luIiwibWVzc2FnZSIsInNlbmRWYWxpZGF0aW9uRXJyb3IiLCJyZXMiLCJsYWJlbCIsInN0YXR1cyIsImpzb24iLCJwYXJzZVF1ZXJ5IiwicmVxIiwic2NoZW1hIiwicGF5bG9hZCIsInF1ZXJ5IiwicmVzdWx0Iiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImRhdGEiLCJwYXJzZUJvZHkiLCJib2R5IiwiSlNPTiIsInBhcnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/apiValidation.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/cache/l2Redis.ts":
/*!**********************************!*\
  !*** ./src/lib/cache/l2Redis.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acquireL2Lock: () => (/* binding */ acquireL2Lock),\n/* harmony export */   isL2CacheEnabled: () => (/* binding */ isL2CacheEnabled),\n/* harmony export */   readL2Cache: () => (/* binding */ readL2Cache),\n/* harmony export */   releaseL2Lock: () => (/* binding */ releaseL2Lock),\n/* harmony export */   writeL2Cache: () => (/* binding */ writeL2Cache)\n/* harmony export */ });\nconst DEFAULT_TIMEOUT_MS = 900;\nfunction getConfig() {\n    const baseUrl = process.env.REDIS_REST_URL || process.env.UPSTASH_REDIS_REST_URL;\n    const token = process.env.REDIS_REST_TOKEN || process.env.UPSTASH_REDIS_REST_TOKEN;\n    return {\n        baseUrl: baseUrl ? baseUrl.replace(/\\/$/, \"\") : \"\",\n        token: token || \"\"\n    };\n}\nfunction isL2CacheEnabled() {\n    const { baseUrl, token } = getConfig();\n    return Boolean(baseUrl && token);\n}\nasync function fetchWithTimeout(url, init, timeoutMs = DEFAULT_TIMEOUT_MS) {\n    const controller = new AbortController();\n    const timer = setTimeout(()=>controller.abort(), timeoutMs);\n    try {\n        return await fetch(url, {\n            ...init,\n            signal: controller.signal,\n            headers: {\n                Authorization: `Bearer ${getConfig().token}`,\n                \"Content-Type\": \"application/json\",\n                ...init?.headers || {}\n            }\n        });\n    } finally{\n        clearTimeout(timer);\n    }\n}\nasync function readL2Cache(key) {\n    if (!isL2CacheEnabled()) return null;\n    const { baseUrl } = getConfig();\n    try {\n        const response = await fetchWithTimeout(`${baseUrl}/get/${encodeURIComponent(key)}`, {\n            method: \"GET\"\n        });\n        if (!response.ok) return null;\n        const payload = await response.json().catch(()=>null);\n        const rawValue = payload?.result;\n        if (!rawValue) return null;\n        const parsed = JSON.parse(rawValue);\n        if (!parsed || typeof parsed !== \"object\") return null;\n        if (!Number.isFinite(parsed.expiresAt)) return null;\n        return parsed;\n    } catch  {\n        return null;\n    }\n}\nasync function writeL2Cache(key, entry, ttlMs) {\n    if (!isL2CacheEnabled()) return;\n    const { baseUrl } = getConfig();\n    const ttlSeconds = Math.max(1, Math.floor(ttlMs / 1000));\n    try {\n        await fetchWithTimeout(`${baseUrl}/set/${encodeURIComponent(key)}`, {\n            method: \"POST\",\n            body: JSON.stringify({\n                value: JSON.stringify(entry),\n                ex: ttlSeconds\n            })\n        });\n    } catch  {\n    // Best effort.\n    }\n}\nasync function acquireL2Lock(key, ttlSeconds = 8) {\n    if (!isL2CacheEnabled()) return true;\n    const { baseUrl } = getConfig();\n    const safeTtl = Math.max(1, Math.min(60, Math.floor(ttlSeconds)));\n    const token = `${Date.now()}-${Math.random().toString(36).slice(2, 10)}`;\n    try {\n        // Upstash REST-compatible NX lock.\n        const url = `${baseUrl}/set/${encodeURIComponent(`lock:${key}`)}/${encodeURIComponent(token)}?NX=true&EX=${safeTtl}`;\n        const response = await fetchWithTimeout(url, {\n            method: \"POST\"\n        }, 800);\n        if (!response.ok) return false;\n        const payload = await response.json().catch(()=>null);\n        return payload?.result === \"OK\";\n    } catch  {\n        return false;\n    }\n}\nasync function releaseL2Lock(key) {\n    if (!isL2CacheEnabled()) return;\n    const { baseUrl } = getConfig();\n    try {\n        await fetchWithTimeout(`${baseUrl}/del/${encodeURIComponent(`lock:${key}`)}`, {\n            method: \"POST\"\n        }, 800);\n    } catch  {\n    // Best effort.\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxHQUFHLENBQUMsSUFBSVQsS0FBS0UsS0FBSyxDQUFDSDtJQUNwRCxNQUFNeEMsUUFBUSxHQUFHbUQsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRVgsS0FBS1ksTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsS0FBSyxDQUFDLEdBQUcsS0FBSztJQUV4RSxJQUFJO1FBQ0YsbUNBQW1DO1FBQ25DLE1BQU1oRCxNQUFNLEdBQUdaLFFBQVEsS0FBSyxFQUFFNEIsbUJBQzVCLENBQUMsS0FBSyxFQUFFRixLQUFLLEVBQ2IsQ0FBQyxFQUFFRSxtQkFBbUJ2QixPQUFPLFlBQVksRUFBRWlELFNBQVM7UUFDdEQsTUFBTTNCLFdBQVcsTUFBTWhCLGlCQUFpQkMsS0FBSztZQUFFaUIsUUFBUTtRQUFPLEdBQUc7UUFDakUsSUFBSSxDQUFDRixTQUFTRyxFQUFFLEVBQUUsT0FBTztRQUN6QixNQUFNQyxVQUFVLE1BQU1KLFNBQVNLLElBQUksR0FBR0MsS0FBSyxDQUFDLElBQU07UUFDbEQsT0FBT0YsU0FBU0ksV0FBVztJQUM3QixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWUwQixjQUFjbkMsR0FBVztJQUM3QyxJQUFJLENBQUNqQixvQkFBb0I7SUFDekIsTUFBTSxFQUFFVCxPQUFPLEVBQUUsR0FBR0Q7SUFDcEIsSUFBSTtRQUNGLE1BQU1ZLGlCQUFpQixHQUFHWCxRQUFRLEtBQUssRUFBRTRCLG1CQUFtQixDQUFDLEtBQUssRUFBRUYsS0FBSyxHQUFHLEVBQUU7WUFDNUVHLFFBQVE7UUFDVixHQUFHO0lBQ0wsRUFBRSxPQUFNO0lBQ04sZUFBZTtJQUNqQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdHV1bGFpL0RvY3VtZW50cy90bXAvc3JjL2xpYi9jYWNoZS9sMlJlZGlzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgTDJFbnRyeTxUPiA9IHtcbiAgdmFsdWU6IFQ7XG4gIHVwZGF0ZWRBdDogbnVtYmVyO1xuICBleHBpcmVzQXQ6IG51bWJlcjtcbn07XG5cbmNvbnN0IERFRkFVTFRfVElNRU9VVF9NUyA9IDkwMDtcblxuZnVuY3Rpb24gZ2V0Q29uZmlnKCkge1xuICBjb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuUkVESVNfUkVTVF9VUkwgfHwgcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTDtcbiAgY29uc3QgdG9rZW4gPSBwcm9jZXNzLmVudi5SRURJU19SRVNUX1RPS0VOIHx8IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTjtcbiAgcmV0dXJuIHtcbiAgICBiYXNlVXJsOiBiYXNlVXJsID8gYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgXCJcIikgOiBcIlwiLFxuICAgIHRva2VuOiB0b2tlbiB8fCBcIlwiXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0wyQ2FjaGVFbmFibGVkKCkge1xuICBjb25zdCB7IGJhc2VVcmwsIHRva2VuIH0gPSBnZXRDb25maWcoKTtcbiAgcmV0dXJuIEJvb2xlYW4oYmFzZVVybCAmJiB0b2tlbik7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aFRpbWVvdXQodXJsOiBzdHJpbmcsIGluaXQ/OiBSZXF1ZXN0SW5pdCwgdGltZW91dE1zID0gREVGQVVMVF9USU1FT1VUX01TKSB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXRNcyk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgLi4uaW5pdCxcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtnZXRDb25maWcoKS50b2tlbn1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgLi4uKGluaXQ/LmhlYWRlcnMgfHwge30pXG4gICAgICB9XG4gICAgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEwyQ2FjaGU8VD4oa2V5OiBzdHJpbmcpOiBQcm9taXNlPEwyRW50cnk8VD4gfCBudWxsPiB7XG4gIGlmICghaXNMMkNhY2hlRW5hYmxlZCgpKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgeyBiYXNlVXJsIH0gPSBnZXRDb25maWcoKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFRpbWVvdXQoXG4gICAgICBgJHtiYXNlVXJsfS9nZXQvJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX1gLFxuICAgICAgeyBtZXRob2Q6IFwiR0VUXCIgfVxuICAgICk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiBudWxsKTtcbiAgICBjb25zdCByYXdWYWx1ZSA9IHBheWxvYWQ/LnJlc3VsdDtcbiAgICBpZiAoIXJhd1ZhbHVlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhd1ZhbHVlKSBhcyBMMkVudHJ5PFQ+O1xuICAgIGlmICghcGFyc2VkIHx8IHR5cGVvZiBwYXJzZWQgIT09IFwib2JqZWN0XCIpIHJldHVybiBudWxsO1xuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHBhcnNlZC5leHBpcmVzQXQpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gcGFyc2VkO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JpdGVMMkNhY2hlPFQ+KGtleTogc3RyaW5nLCBlbnRyeTogTDJFbnRyeTxUPiwgdHRsTXM6IG51bWJlcikge1xuICBpZiAoIWlzTDJDYWNoZUVuYWJsZWQoKSkgcmV0dXJuO1xuICBjb25zdCB7IGJhc2VVcmwgfSA9IGdldENvbmZpZygpO1xuICBjb25zdCB0dGxTZWNvbmRzID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcih0dGxNcyAvIDEwMDApKTtcblxuICB0cnkge1xuICAgIGF3YWl0IGZldGNoV2l0aFRpbWVvdXQoYCR7YmFzZVVybH0vc2V0LyR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9YCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGVudHJ5KSxcbiAgICAgICAgZXg6IHR0bFNlY29uZHNcbiAgICAgIH0pXG4gICAgfSk7XG4gIH0gY2F0Y2gge1xuICAgIC8vIEJlc3QgZWZmb3J0LlxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhY3F1aXJlTDJMb2NrKGtleTogc3RyaW5nLCB0dGxTZWNvbmRzID0gOCkge1xuICBpZiAoIWlzTDJDYWNoZUVuYWJsZWQoKSkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IHsgYmFzZVVybCB9ID0gZ2V0Q29uZmlnKCk7XG4gIGNvbnN0IHNhZmVUdGwgPSBNYXRoLm1heCgxLCBNYXRoLm1pbig2MCwgTWF0aC5mbG9vcih0dGxTZWNvbmRzKSkpO1xuICBjb25zdCB0b2tlbiA9IGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgMTApfWA7XG5cbiAgdHJ5IHtcbiAgICAvLyBVcHN0YXNoIFJFU1QtY29tcGF0aWJsZSBOWCBsb2NrLlxuICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9L3NldC8ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgIGBsb2NrOiR7a2V5fWBcbiAgICApfS8ke2VuY29kZVVSSUNvbXBvbmVudCh0b2tlbil9P05YPXRydWUmRVg9JHtzYWZlVHRsfWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhUaW1lb3V0KHVybCwgeyBtZXRob2Q6IFwiUE9TVFwiIH0sIDgwMCk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgcmV0dXJuIHBheWxvYWQ/LnJlc3VsdCA9PT0gXCJPS1wiO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VMMkxvY2soa2V5OiBzdHJpbmcpIHtcbiAgaWYgKCFpc0wyQ2FjaGVFbmFibGVkKCkpIHJldHVybjtcbiAgY29uc3QgeyBiYXNlVXJsIH0gPSBnZXRDb25maWcoKTtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmZXRjaFdpdGhUaW1lb3V0KGAke2Jhc2VVcmx9L2RlbC8ke2VuY29kZVVSSUNvbXBvbmVudChgbG9jazoke2tleX1gKX1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiXG4gICAgfSwgODAwKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gQmVzdCBlZmZvcnQuXG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgeyBMMkVudHJ5IH07XG4iXSwibmFtZXMiOlsiREVGQVVMVF9USU1FT1VUX01TIiwiZ2V0Q29uZmlnIiwiYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJSRURJU19SRVNUX1VSTCIsIlVQU1RBU0hfUkVESVNfUkVTVF9VUkwiLCJ0b2tlbiIsIlJFRElTX1JFU1RfVE9LRU4iLCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4iLCJyZXBsYWNlIiwiaXNMMkNhY2hlRW5hYmxlZCIsIkJvb2xlYW4iLCJmZXRjaFdpdGhUaW1lb3V0IiwidXJsIiwiaW5pdCIsInRpbWVvdXRNcyIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJhYm9ydCIsImZldGNoIiwic2lnbmFsIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJjbGVhclRpbWVvdXQiLCJyZWFkTDJDYWNoZSIsImtleSIsInJlc3BvbnNlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibWV0aG9kIiwib2siLCJwYXlsb2FkIiwianNvbiIsImNhdGNoIiwicmF3VmFsdWUiLCJyZXN1bHQiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImV4cGlyZXNBdCIsIndyaXRlTDJDYWNoZSIsImVudHJ5IiwidHRsTXMiLCJ0dGxTZWNvbmRzIiwiTWF0aCIsIm1heCIsImZsb29yIiwiYm9keSIsInN0cmluZ2lmeSIsInZhbHVlIiwiZXgiLCJhY3F1aXJlTDJMb2NrIiwic2FmZVR0bCIsIm1pbiIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwicmVsZWFzZUwyTG9jayJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/cache/l2Redis.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/dataAccess/service.ts":
/*!***************************************!*\
  !*** ./src/lib/dataAccess/service.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dataAccess: () => (/* binding */ dataAccess)\n/* harmony export */ });\n/* harmony import */ var _lib_heatmapData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/heatmapData */ \"(api-node)/./src/lib/heatmapData.ts\");\n/* harmony import */ var _lib_newsData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/newsData */ \"(api-node)/./src/lib/newsData.ts\");\n/* harmony import */ var _lib_quotesData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/quotesData */ \"(api-node)/./src/lib/quotesData.ts\");\n/* harmony import */ var _lib_sec__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/sec */ \"(api-node)/./src/lib/sec.ts\");\n/* harmony import */ var _lib_twelveData__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/twelveData */ \"(api-node)/./src/lib/twelveData.ts\");\n/* harmony import */ var _lib_tickerData__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/tickerData */ \"(api-node)/./src/lib/tickerData.ts\");\n\n\n\n\n\n\nconst dataAccess = {\n    async dashboard (symbols, options) {\n        const [quotes, news, heatmap] = await Promise.all([\n            (0,_lib_quotesData__WEBPACK_IMPORTED_MODULE_2__.getCachedQuotesPayload)(symbols, {\n                forceRefresh: options.forceRefresh\n            }),\n            options.includeNews ? (0,_lib_newsData__WEBPACK_IMPORTED_MODULE_1__.getCachedNewsPayload)(options.newsSymbol, {\n                forceRefresh: options.forceRefresh\n            }) : Promise.resolve(null),\n            options.includeHeatmap ? (0,_lib_heatmapData__WEBPACK_IMPORTED_MODULE_0__.getCachedHeatmapPayload)({\n                forceRefresh: options.forceRefresh\n            }) : Promise.resolve(null)\n        ]);\n        return {\n            quotes,\n            news,\n            heatmap\n        };\n    },\n    quotes (symbols, ctx = {}) {\n        return (0,_lib_quotesData__WEBPACK_IMPORTED_MODULE_2__.getCachedQuotesPayload)(symbols, {\n            forceRefresh: ctx.forceRefresh\n        });\n    },\n    news (symbol, ctx = {}) {\n        return (0,_lib_newsData__WEBPACK_IMPORTED_MODULE_1__.getCachedNewsPayload)(symbol, {\n            from: ctx.from,\n            to: ctx.to,\n            forceRefresh: ctx.forceRefresh\n        });\n    },\n    heatmap (ctx = {}) {\n        return (0,_lib_heatmapData__WEBPACK_IMPORTED_MODULE_0__.getCachedHeatmapPayload)({\n            forceRefresh: ctx.forceRefresh\n        });\n    },\n    sec (symbol, ctx = {}) {\n        return (0,_lib_sec__WEBPACK_IMPORTED_MODULE_3__.getRecentFilings)(symbol).then(({ filings })=>({\n                symbol,\n                filings: filings.slice(0, 6),\n                summary: (0,_lib_sec__WEBPACK_IMPORTED_MODULE_3__.buildWhisperSummary)(filings)\n            }));\n    },\n    timeSeries (symbol, interval = \"1day\") {\n        return (0,_lib_twelveData__WEBPACK_IMPORTED_MODULE_4__.getTimeSeries)(symbol, interval);\n    },\n    tickerSearch (query, limit = 12, ctx = {}) {\n        return (0,_lib_tickerData__WEBPACK_IMPORTED_MODULE_5__.getTickerSearchPayload)(query, limit, {\n            forceRefresh: ctx.forceRefresh\n        });\n    },\n    warmTickers (symbols) {\n        return (0,_lib_tickerData__WEBPACK_IMPORTED_MODULE_5__.warmTickerSearchCache)(symbols);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvZGF0YUFjY2Vzcy9zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEQ7QUFDTjtBQUNJO0FBQ1E7QUFDakI7QUFDZ0M7QUFNMUUsTUFBTVEsYUFBYTtJQUN4QixNQUFNQyxXQUNKQyxPQUFpQixFQUNqQkMsT0FLQztRQUVELE1BQU0sQ0FBQ0MsUUFBUUMsTUFBTUMsUUFBUSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUNoRGQsdUVBQXNCQSxDQUFDUSxTQUFTO2dCQUFFTyxjQUFjTixRQUFRTSxZQUFZO1lBQUM7WUFDckVOLFFBQVFPLFdBQVcsR0FDZmpCLG1FQUFvQkEsQ0FBQ1UsUUFBUVEsVUFBVSxFQUFFO2dCQUFFRixjQUFjTixRQUFRTSxZQUFZO1lBQUMsS0FDOUVGLFFBQVFLLE9BQU8sQ0FBQztZQUNwQlQsUUFBUVUsY0FBYyxHQUNsQnJCLHlFQUF1QkEsQ0FBQztnQkFBRWlCLGNBQWNOLFFBQVFNLFlBQVk7WUFBQyxLQUM3REYsUUFBUUssT0FBTyxDQUFDO1NBQ3JCO1FBRUQsT0FBTztZQUFFUjtZQUFRQztZQUFNQztRQUFRO0lBQ2pDO0lBRUFGLFFBQU9GLE9BQWlCLEVBQUVZLE1BQXlCLENBQUMsQ0FBQztRQUNuRCxPQUFPcEIsdUVBQXNCQSxDQUFDUSxTQUFTO1lBQUVPLGNBQWNLLElBQUlMLFlBQVk7UUFBQztJQUMxRTtJQUVBSixNQUFLVSxNQUFjLEVBQUVELE1BQTBELENBQUMsQ0FBQztRQUMvRSxPQUFPckIsbUVBQW9CQSxDQUFDc0IsUUFBUTtZQUNsQ0MsTUFBTUYsSUFBSUUsSUFBSTtZQUNkQyxJQUFJSCxJQUFJRyxFQUFFO1lBQ1ZSLGNBQWNLLElBQUlMLFlBQVk7UUFDaEM7SUFDRjtJQUVBSCxTQUFRUSxNQUF5QixDQUFDLENBQUM7UUFDakMsT0FBT3RCLHlFQUF1QkEsQ0FBQztZQUFFaUIsY0FBY0ssSUFBSUwsWUFBWTtRQUFDO0lBQ2xFO0lBRUFTLEtBQUlILE1BQWMsRUFBRUQsTUFBeUIsQ0FBQyxDQUFDO1FBQzdDLE9BQU9uQiwwREFBZ0JBLENBQUNvQixRQUFRSSxJQUFJLENBQUMsQ0FBQyxFQUFFQyxPQUFPLEVBQUUsR0FBTTtnQkFDckRMO2dCQUNBSyxTQUFTQSxRQUFRQyxLQUFLLENBQUMsR0FBRztnQkFDMUJDLFNBQVMxQiw2REFBbUJBLENBQUN3QjtZQUMvQjtJQUNGO0lBRUFHLFlBQVdSLE1BQWMsRUFBRVMsV0FBVyxNQUFNO1FBQzFDLE9BQU8zQiw4REFBYUEsQ0FBQ2tCLFFBQVFTO0lBQy9CO0lBRUFDLGNBQWFDLEtBQWEsRUFBRUMsUUFBUSxFQUFFLEVBQUViLE1BQXlCLENBQUMsQ0FBQztRQUNqRSxPQUFPaEIsdUVBQXNCQSxDQUFDNEIsT0FBT0MsT0FBTztZQUFFbEIsY0FBY0ssSUFBSUwsWUFBWTtRQUFDO0lBQy9FO0lBRUFtQixhQUFZMUIsT0FBaUI7UUFDM0IsT0FBT0gsc0VBQXFCQSxDQUFDRztJQUMvQjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL2RhdGFBY2Nlc3Mvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRDYWNoZWRIZWF0bWFwUGF5bG9hZCB9IGZyb20gXCJAL2xpYi9oZWF0bWFwRGF0YVwiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVkTmV3c1BheWxvYWQgfSBmcm9tIFwiQC9saWIvbmV3c0RhdGFcIjtcbmltcG9ydCB7IGdldENhY2hlZFF1b3Rlc1BheWxvYWQgfSBmcm9tIFwiQC9saWIvcXVvdGVzRGF0YVwiO1xuaW1wb3J0IHsgZ2V0UmVjZW50RmlsaW5ncywgYnVpbGRXaGlzcGVyU3VtbWFyeSB9IGZyb20gXCJAL2xpYi9zZWNcIjtcbmltcG9ydCB7IGdldFRpbWVTZXJpZXMgfSBmcm9tIFwiQC9saWIvdHdlbHZlRGF0YVwiO1xuaW1wb3J0IHsgZ2V0VGlja2VyU2VhcmNoUGF5bG9hZCwgd2FybVRpY2tlclNlYXJjaENhY2hlIH0gZnJvbSBcIkAvbGliL3RpY2tlckRhdGFcIjtcblxuZXhwb3J0IHR5cGUgRGF0YUFjY2Vzc0NvbnRleHQgPSB7XG4gIGZvcmNlUmVmcmVzaD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgY29uc3QgZGF0YUFjY2VzcyA9IHtcbiAgYXN5bmMgZGFzaGJvYXJkKFxuICAgIHN5bWJvbHM6IHN0cmluZ1tdLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGluY2x1ZGVOZXdzOiBib29sZWFuO1xuICAgICAgaW5jbHVkZUhlYXRtYXA6IGJvb2xlYW47XG4gICAgICBuZXdzU3ltYm9sOiBzdHJpbmc7XG4gICAgICBmb3JjZVJlZnJlc2g/OiBib29sZWFuO1xuICAgIH1cbiAgKSB7XG4gICAgY29uc3QgW3F1b3RlcywgbmV3cywgaGVhdG1hcF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBnZXRDYWNoZWRRdW90ZXNQYXlsb2FkKHN5bWJvbHMsIHsgZm9yY2VSZWZyZXNoOiBvcHRpb25zLmZvcmNlUmVmcmVzaCB9KSxcbiAgICAgIG9wdGlvbnMuaW5jbHVkZU5ld3NcbiAgICAgICAgPyBnZXRDYWNoZWROZXdzUGF5bG9hZChvcHRpb25zLm5ld3NTeW1ib2wsIHsgZm9yY2VSZWZyZXNoOiBvcHRpb25zLmZvcmNlUmVmcmVzaCB9KVxuICAgICAgICA6IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICAgIG9wdGlvbnMuaW5jbHVkZUhlYXRtYXBcbiAgICAgICAgPyBnZXRDYWNoZWRIZWF0bWFwUGF5bG9hZCh7IGZvcmNlUmVmcmVzaDogb3B0aW9ucy5mb3JjZVJlZnJlc2ggfSlcbiAgICAgICAgOiBQcm9taXNlLnJlc29sdmUobnVsbClcbiAgICBdKTtcblxuICAgIHJldHVybiB7IHF1b3RlcywgbmV3cywgaGVhdG1hcCB9O1xuICB9LFxuXG4gIHF1b3RlcyhzeW1ib2xzOiBzdHJpbmdbXSwgY3R4OiBEYXRhQWNjZXNzQ29udGV4dCA9IHt9KSB7XG4gICAgcmV0dXJuIGdldENhY2hlZFF1b3Rlc1BheWxvYWQoc3ltYm9scywgeyBmb3JjZVJlZnJlc2g6IGN0eC5mb3JjZVJlZnJlc2ggfSk7XG4gIH0sXG5cbiAgbmV3cyhzeW1ib2w6IHN0cmluZywgY3R4OiBEYXRhQWNjZXNzQ29udGV4dCAmIHsgZnJvbT86IHN0cmluZzsgdG8/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgcmV0dXJuIGdldENhY2hlZE5ld3NQYXlsb2FkKHN5bWJvbCwge1xuICAgICAgZnJvbTogY3R4LmZyb20sXG4gICAgICB0bzogY3R4LnRvLFxuICAgICAgZm9yY2VSZWZyZXNoOiBjdHguZm9yY2VSZWZyZXNoXG4gICAgfSk7XG4gIH0sXG5cbiAgaGVhdG1hcChjdHg6IERhdGFBY2Nlc3NDb250ZXh0ID0ge30pIHtcbiAgICByZXR1cm4gZ2V0Q2FjaGVkSGVhdG1hcFBheWxvYWQoeyBmb3JjZVJlZnJlc2g6IGN0eC5mb3JjZVJlZnJlc2ggfSk7XG4gIH0sXG5cbiAgc2VjKHN5bWJvbDogc3RyaW5nLCBjdHg6IERhdGFBY2Nlc3NDb250ZXh0ID0ge30pIHtcbiAgICByZXR1cm4gZ2V0UmVjZW50RmlsaW5ncyhzeW1ib2wpLnRoZW4oKHsgZmlsaW5ncyB9KSA9PiAoe1xuICAgICAgc3ltYm9sLFxuICAgICAgZmlsaW5nczogZmlsaW5ncy5zbGljZSgwLCA2KSxcbiAgICAgIHN1bW1hcnk6IGJ1aWxkV2hpc3BlclN1bW1hcnkoZmlsaW5ncylcbiAgICB9KSk7XG4gIH0sXG5cbiAgdGltZVNlcmllcyhzeW1ib2w6IHN0cmluZywgaW50ZXJ2YWwgPSBcIjFkYXlcIikge1xuICAgIHJldHVybiBnZXRUaW1lU2VyaWVzKHN5bWJvbCwgaW50ZXJ2YWwpO1xuICB9LFxuXG4gIHRpY2tlclNlYXJjaChxdWVyeTogc3RyaW5nLCBsaW1pdCA9IDEyLCBjdHg6IERhdGFBY2Nlc3NDb250ZXh0ID0ge30pIHtcbiAgICByZXR1cm4gZ2V0VGlja2VyU2VhcmNoUGF5bG9hZChxdWVyeSwgbGltaXQsIHsgZm9yY2VSZWZyZXNoOiBjdHguZm9yY2VSZWZyZXNoIH0pO1xuICB9LFxuXG4gIHdhcm1UaWNrZXJzKHN5bWJvbHM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIHdhcm1UaWNrZXJTZWFyY2hDYWNoZShzeW1ib2xzKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJnZXRDYWNoZWRIZWF0bWFwUGF5bG9hZCIsImdldENhY2hlZE5ld3NQYXlsb2FkIiwiZ2V0Q2FjaGVkUXVvdGVzUGF5bG9hZCIsImdldFJlY2VudEZpbGluZ3MiLCJidWlsZFdoaXNwZXJTdW1tYXJ5IiwiZ2V0VGltZVNlcmllcyIsImdldFRpY2tlclNlYXJjaFBheWxvYWQiLCJ3YXJtVGlja2VyU2VhcmNoQ2FjaGUiLCJkYXRhQWNjZXNzIiwiZGFzaGJvYXJkIiwic3ltYm9scyIsIm9wdGlvbnMiLCJxdW90ZXMiLCJuZXdzIiwiaGVhdG1hcCIsIlByb21pc2UiLCJhbGwiLCJmb3JjZVJlZnJlc2giLCJpbmNsdWRlTmV3cyIsIm5ld3NTeW1ib2wiLCJyZXNvbHZlIiwiaW5jbHVkZUhlYXRtYXAiLCJjdHgiLCJzeW1ib2wiLCJmcm9tIiwidG8iLCJzZWMiLCJ0aGVuIiwiZmlsaW5ncyIsInNsaWNlIiwic3VtbWFyeSIsInRpbWVTZXJpZXMiLCJpbnRlcnZhbCIsInRpY2tlclNlYXJjaCIsInF1ZXJ5IiwibGltaXQiLCJ3YXJtVGlja2VycyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/dataAccess/service.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/heatmap.ts":
/*!****************************!*\
  !*** ./src/lib/heatmap.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildHeatmapPayload: () => (/* binding */ buildHeatmapPayload)\n/* harmony export */ });\n/* harmony import */ var _lib_heatmapUniverse__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/heatmapUniverse */ \"(api-node)/./src/lib/heatmapUniverse.ts\");\n/* harmony import */ var _lib_twelveData__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/twelveData */ \"(api-node)/./src/lib/twelveData.ts\");\n\n\nconst STOOQ_BASE = \"https://stooq.com/q/d/l/\";\nconst REQUEST_TIMEOUT_MS = 1600;\nconst CONCURRENCY = 12;\nconst CLOSE_CACHE_TTL_MS = 24 * 60 * 60 * 1000;\nconst CLOSE_CACHE = new Map();\nfunction stooqSymbols(symbol) {\n    const normalized = symbol.trim().toLowerCase().replace(/\\./g, \"-\");\n    const candidates = [\n        `${normalized}.us`,\n        normalized\n    ];\n    return Array.from(new Set(candidates));\n}\nfunction parseCsv(csv) {\n    const lines = csv.trim().split(/\\r?\\n/);\n    if (lines.length < 2) return [];\n    const rows = lines.slice(1);\n    return rows.map((line)=>line.split(\",\")).filter((cols)=>cols.length >= 5).map((cols)=>{\n        const [date, , , , close] = cols;\n        if (!date || !close || close === \"N/D\") return null;\n        const value = Number(close);\n        if (!Number.isFinite(value)) return null;\n        return {\n            time: date,\n            close: value\n        };\n    }).filter((point)=>Boolean(point)).sort((a, b)=>a.time.localeCompare(b.time));\n}\nasync function fetchCloses(symbol) {\n    const cached = CLOSE_CACHE.get(symbol);\n    if (cached && Date.now() - cached.at < CLOSE_CACHE_TTL_MS) {\n        return cached.data;\n    }\n    for (const candidate of stooqSymbols(symbol)){\n        const url = new URL(STOOQ_BASE);\n        url.searchParams.set(\"s\", candidate);\n        url.searchParams.set(\"i\", \"d\");\n        const controller = new AbortController();\n        const timer = setTimeout(()=>controller.abort(), REQUEST_TIMEOUT_MS);\n        try {\n            const response = await fetch(url.toString(), {\n                signal: controller.signal\n            });\n            if (!response.ok) continue;\n            const csv = await response.text();\n            const parsed = parseCsv(csv);\n            if (parsed.length) {\n                const capped = parsed.slice(-320);\n                CLOSE_CACHE.set(symbol, {\n                    at: Date.now(),\n                    data: capped\n                });\n                return capped;\n            }\n        } catch  {\n        // Try next symbol format.\n        } finally{\n            clearTimeout(timer);\n        }\n    }\n    CLOSE_CACHE.set(symbol, {\n        at: Date.now(),\n        data: []\n    });\n    return [];\n}\nasync function mapWithConcurrency(items, limit, mapper) {\n    if (items.length === 0) return [];\n    const results = new Array(items.length);\n    let cursor = 0;\n    const workers = Array.from({\n        length: Math.min(limit, items.length)\n    }, async ()=>{\n        while(true){\n            const index = cursor;\n            cursor += 1;\n            if (index >= items.length) break;\n            results[index] = await mapper(items[index], index);\n        }\n    });\n    await Promise.all(workers);\n    return results;\n}\nfunction refAt(series, lookback) {\n    if (series.length <= lookback) return null;\n    const point = series[series.length - 1 - lookback];\n    return Number.isFinite(point?.close) ? point.close : null;\n}\nfunction buildRefs(series) {\n    const latest = series.length ? series[series.length - 1].close : null;\n    return {\n        latest: Number.isFinite(latest) ? latest : null,\n        day: refAt(series, 1),\n        week: refAt(series, 5),\n        month: refAt(series, 21),\n        year: refAt(series, 252)\n    };\n}\nfunction changeFrom(current, reference) {\n    if (current === null || reference === null || !Number.isFinite(current) || !Number.isFinite(reference) || reference === 0) {\n        return null;\n    }\n    return (current - reference) / reference * 100;\n}\nfunction pickLivePrice(quote, refs) {\n    const quotePrice = Number(quote?.price);\n    if (Number.isFinite(quotePrice)) return quotePrice;\n    return refs.latest;\n}\nfunction computeChangesFromQuote(quote, price, refs) {\n    const quoteDay = Number(quote?.percentChange);\n    const day = Number.isFinite(quoteDay) ? quoteDay : changeFrom(price, refs.day);\n    return {\n        day,\n        week: changeFrom(price, refs.week),\n        month: changeFrom(price, refs.month),\n        year: changeFrom(price, refs.year)\n    };\n}\nfunction buildSectorStats(tickers) {\n    const periods = [\n        \"day\",\n        \"week\",\n        \"month\",\n        \"year\"\n    ];\n    const grouped = new Map();\n    tickers.forEach((ticker)=>{\n        const current = grouped.get(ticker.sector) || {\n            sector: ticker.sector,\n            marketCapB: 0,\n            count: 0,\n            weightedSums: {\n                day: 0,\n                week: 0,\n                month: 0,\n                year: 0\n            },\n            weightedCaps: {\n                day: 0,\n                week: 0,\n                month: 0,\n                year: 0\n            }\n        };\n        current.marketCapB += ticker.marketCapB;\n        current.count += 1;\n        periods.forEach((period)=>{\n            const value = ticker.changes[period];\n            if (value === null) return;\n            current.weightedSums[period] += value * ticker.marketCapB;\n            current.weightedCaps[period] += ticker.marketCapB;\n        });\n        grouped.set(ticker.sector, current);\n    });\n    return Array.from(grouped.values()).map((entry)=>({\n            sector: entry.sector,\n            marketCapB: entry.marketCapB,\n            count: entry.count,\n            changes: {\n                day: entry.weightedCaps.day > 0 ? entry.weightedSums.day / entry.weightedCaps.day : null,\n                week: entry.weightedCaps.week > 0 ? entry.weightedSums.week / entry.weightedCaps.week : null,\n                month: entry.weightedCaps.month > 0 ? entry.weightedSums.month / entry.weightedCaps.month : null,\n                year: entry.weightedCaps.year > 0 ? entry.weightedSums.year / entry.weightedCaps.year : null\n            }\n        })).sort((a, b)=>b.marketCapB - a.marketCapB);\n}\nasync function buildHeatmapPayload() {\n    const symbols = _lib_heatmapUniverse__WEBPACK_IMPORTED_MODULE_0__.HEATMAP_UNIVERSE.map((item)=>item.symbol);\n    const closePairs = await mapWithConcurrency(_lib_heatmapUniverse__WEBPACK_IMPORTED_MODULE_0__.HEATMAP_UNIVERSE, CONCURRENCY, async (item)=>{\n        const series = await fetchCloses(item.symbol);\n        return [\n            item.symbol,\n            buildRefs(series)\n        ];\n    });\n    const closeMap = new Map(closePairs);\n    let quotes = [];\n    try {\n        quotes = await (0,_lib_twelveData__WEBPACK_IMPORTED_MODULE_1__.getQuotes)(symbols);\n    } catch  {\n    // Keep stale historical-only heatmap if quote API is limited.\n    }\n    const quoteMap = new Map(quotes.map((quote)=>[\n            quote.symbol,\n            quote\n        ]));\n    const tickers = _lib_heatmapUniverse__WEBPACK_IMPORTED_MODULE_0__.HEATMAP_UNIVERSE.map((item)=>{\n        const refs = closeMap.get(item.symbol) || {\n            latest: null,\n            day: null,\n            week: null,\n            month: null,\n            year: null\n        };\n        const quote = quoteMap.get(item.symbol);\n        const livePrice = pickLivePrice(quote, refs);\n        return {\n            symbol: item.symbol,\n            name: item.name,\n            sector: item.sector,\n            marketCapB: item.marketCapB,\n            currency: quote?.currency || \"USD\",\n            price: livePrice,\n            changes: computeChangesFromQuote(quote, livePrice, refs)\n        };\n    });\n    const sectors = buildSectorStats(tickers);\n    return {\n        updatedAt: new Date().toISOString(),\n        source: \"Twelve Data quotes + Stooq history\",\n        tickers,\n        sectors\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBWTlCLGNBQWNDLE9BQU9DO1FBRXZDLE9BQU87WUFDTHBGLFFBQVEyRyxLQUFLM0csTUFBTTtZQUNuQmlILE1BQU1OLEtBQUtNLElBQUk7WUFDZmpCLFFBQVFXLEtBQUtYLE1BQU07WUFDbkJDLFlBQVlVLEtBQUtWLFVBQVU7WUFDM0JpQixVQUFVL0IsT0FBTytCLFlBQVk7WUFDN0I1QixPQUFPMEI7WUFDUFYsU0FBU2Ysd0JBQXdCSixPQUFPNkIsV0FBVzVCO1FBQ3JEO0lBQ0Y7SUFFQSxNQUFNK0IsVUFBVXpCLGlCQUFpQkM7SUFFakMsT0FBTztRQUNMeUIsV0FBVyxJQUFJakYsT0FBT2tGLFdBQVc7UUFDakNDLFFBQVE7UUFDUjNCO1FBQ0F3QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL2hlYXRtYXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSEVBVE1BUF9VTklWRVJTRSB9IGZyb20gXCJAL2xpYi9oZWF0bWFwVW5pdmVyc2VcIjtcbmltcG9ydCB7IGdldFF1b3RlcywgdHlwZSBRdW90ZSB9IGZyb20gXCJAL2xpYi90d2VsdmVEYXRhXCI7XG5pbXBvcnQgdHlwZSB7XG4gIEhlYXRtYXBDaGFuZ2VTZXQsXG4gIEhlYXRtYXBQYXlsb2FkLFxuICBIZWF0bWFwUGVyaW9kLFxuICBIZWF0bWFwU2VjdG9yLFxuICBIZWF0bWFwVGlja2VyXG59IGZyb20gXCJAL3R5cGVzL2hlYXRtYXBcIjtcblxuY29uc3QgU1RPT1FfQkFTRSA9IFwiaHR0cHM6Ly9zdG9vcS5jb20vcS9kL2wvXCI7XG5jb25zdCBSRVFVRVNUX1RJTUVPVVRfTVMgPSAxNjAwO1xuY29uc3QgQ09OQ1VSUkVOQ1kgPSAxMjtcbmNvbnN0IENMT1NFX0NBQ0hFX1RUTF9NUyA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbnR5cGUgQ2xvc2VQb2ludCA9IHsgdGltZTogc3RyaW5nOyBjbG9zZTogbnVtYmVyIH07XG50eXBlIENsb3NlUmVmcyA9IHtcbiAgbGF0ZXN0OiBudW1iZXIgfCBudWxsO1xuICBkYXk6IG51bWJlciB8IG51bGw7XG4gIHdlZWs6IG51bWJlciB8IG51bGw7XG4gIG1vbnRoOiBudW1iZXIgfCBudWxsO1xuICB5ZWFyOiBudW1iZXIgfCBudWxsO1xufTtcblxuY29uc3QgQ0xPU0VfQ0FDSEUgPSBuZXcgTWFwPHN0cmluZywgeyBhdDogbnVtYmVyOyBkYXRhOiBDbG9zZVBvaW50W10gfT4oKTtcblxuZnVuY3Rpb24gc3Rvb3FTeW1ib2xzKHN5bWJvbDogc3RyaW5nKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBzeW1ib2wudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwuL2csIFwiLVwiKTtcbiAgY29uc3QgY2FuZGlkYXRlcyA9IFtgJHtub3JtYWxpemVkfS51c2AsIG5vcm1hbGl6ZWRdO1xuICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KGNhbmRpZGF0ZXMpKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDc3YoY3N2OiBzdHJpbmcpOiBDbG9zZVBvaW50W10ge1xuICBjb25zdCBsaW5lcyA9IGNzdi50cmltKCkuc3BsaXQoL1xccj9cXG4vKTtcbiAgaWYgKGxpbmVzLmxlbmd0aCA8IDIpIHJldHVybiBbXTtcbiAgY29uc3Qgcm93cyA9IGxpbmVzLnNsaWNlKDEpO1xuXG4gIHJldHVybiByb3dzXG4gICAgLm1hcCgobGluZSkgPT4gbGluZS5zcGxpdChcIixcIikpXG4gICAgLmZpbHRlcigoY29scykgPT4gY29scy5sZW5ndGggPj0gNSlcbiAgICAubWFwKChjb2xzKSA9PiB7XG4gICAgICBjb25zdCBbZGF0ZSwgLCAsICwgY2xvc2VdID0gY29scztcbiAgICAgIGlmICghZGF0ZSB8fCAhY2xvc2UgfHwgY2xvc2UgPT09IFwiTi9EXCIpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoY2xvc2UpO1xuICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB7IHRpbWU6IGRhdGUsIGNsb3NlOiB2YWx1ZSB9O1xuICAgIH0pXG4gICAgLmZpbHRlcigocG9pbnQpOiBwb2ludCBpcyBDbG9zZVBvaW50ID0+IEJvb2xlYW4ocG9pbnQpKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLnRpbWUubG9jYWxlQ29tcGFyZShiLnRpbWUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hDbG9zZXMoc3ltYm9sOiBzdHJpbmcpOiBQcm9taXNlPENsb3NlUG9pbnRbXT4ge1xuICBjb25zdCBjYWNoZWQgPSBDTE9TRV9DQUNIRS5nZXQoc3ltYm9sKTtcbiAgaWYgKGNhY2hlZCAmJiBEYXRlLm5vdygpIC0gY2FjaGVkLmF0IDwgQ0xPU0VfQ0FDSEVfVFRMX01TKSB7XG4gICAgcmV0dXJuIGNhY2hlZC5kYXRhO1xuICB9XG5cbiAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2Ygc3Rvb3FTeW1ib2xzKHN5bWJvbCkpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKFNUT09RX0JBU0UpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic1wiLCBjYW5kaWRhdGUpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiaVwiLCBcImRcIik7XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIFJFUVVFU1RfVElNRU9VVF9NUyk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIGNvbnRpbnVlO1xuICAgICAgY29uc3QgY3N2ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VDc3YoY3N2KTtcbiAgICAgIGlmIChwYXJzZWQubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNhcHBlZCA9IHBhcnNlZC5zbGljZSgtMzIwKTtcbiAgICAgICAgQ0xPU0VfQ0FDSEUuc2V0KHN5bWJvbCwgeyBhdDogRGF0ZS5ub3coKSwgZGF0YTogY2FwcGVkIH0pO1xuICAgICAgICByZXR1cm4gY2FwcGVkO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gVHJ5IG5leHQgc3ltYm9sIGZvcm1hdC5cbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICB9XG4gIH1cblxuICBDTE9TRV9DQUNIRS5zZXQoc3ltYm9sLCB7IGF0OiBEYXRlLm5vdygpLCBkYXRhOiBbXSB9KTtcbiAgcmV0dXJuIFtdO1xufVxuXG5hc3luYyBmdW5jdGlvbiBtYXBXaXRoQ29uY3VycmVuY3k8VCwgUj4oXG4gIGl0ZW1zOiBUW10sXG4gIGxpbWl0OiBudW1iZXIsXG4gIG1hcHBlcjogKGl0ZW06IFQsIGluZGV4OiBudW1iZXIpID0+IFByb21pc2U8Uj5cbikge1xuICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSByZXR1cm4gW10gYXMgUltdO1xuICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5PFI+KGl0ZW1zLmxlbmd0aCk7XG4gIGxldCBjdXJzb3IgPSAwO1xuXG4gIGNvbnN0IHdvcmtlcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNYXRoLm1pbihsaW1pdCwgaXRlbXMubGVuZ3RoKSB9LCBhc3luYyAoKSA9PiB7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gY3Vyc29yO1xuICAgICAgY3Vyc29yICs9IDE7XG4gICAgICBpZiAoaW5kZXggPj0gaXRlbXMubGVuZ3RoKSBicmVhaztcbiAgICAgIHJlc3VsdHNbaW5kZXhdID0gYXdhaXQgbWFwcGVyKGl0ZW1zW2luZGV4XSwgaW5kZXgpO1xuICAgIH1cbiAgfSk7XG5cbiAgYXdhaXQgUHJvbWlzZS5hbGwod29ya2Vycyk7XG4gIHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiByZWZBdChzZXJpZXM6IENsb3NlUG9pbnRbXSwgbG9va2JhY2s6IG51bWJlcik6IG51bWJlciB8IG51bGwge1xuICBpZiAoc2VyaWVzLmxlbmd0aCA8PSBsb29rYmFjaykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHBvaW50ID0gc2VyaWVzW3Nlcmllcy5sZW5ndGggLSAxIC0gbG9va2JhY2tdO1xuICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHBvaW50Py5jbG9zZSkgPyBwb2ludC5jbG9zZSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVmcyhzZXJpZXM6IENsb3NlUG9pbnRbXSk6IENsb3NlUmVmcyB7XG4gIGNvbnN0IGxhdGVzdCA9IHNlcmllcy5sZW5ndGggPyBzZXJpZXNbc2VyaWVzLmxlbmd0aCAtIDFdLmNsb3NlIDogbnVsbDtcbiAgcmV0dXJuIHtcbiAgICBsYXRlc3Q6IE51bWJlci5pc0Zpbml0ZShsYXRlc3QpID8gbGF0ZXN0IDogbnVsbCxcbiAgICBkYXk6IHJlZkF0KHNlcmllcywgMSksXG4gICAgd2VlazogcmVmQXQoc2VyaWVzLCA1KSxcbiAgICBtb250aDogcmVmQXQoc2VyaWVzLCAyMSksXG4gICAgeWVhcjogcmVmQXQoc2VyaWVzLCAyNTIpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNoYW5nZUZyb20oY3VycmVudDogbnVtYmVyIHwgbnVsbCwgcmVmZXJlbmNlOiBudW1iZXIgfCBudWxsKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmIChcbiAgICBjdXJyZW50ID09PSBudWxsIHx8XG4gICAgcmVmZXJlbmNlID09PSBudWxsIHx8XG4gICAgIU51bWJlci5pc0Zpbml0ZShjdXJyZW50KSB8fFxuICAgICFOdW1iZXIuaXNGaW5pdGUocmVmZXJlbmNlKSB8fFxuICAgIHJlZmVyZW5jZSA9PT0gMFxuICApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gKChjdXJyZW50IC0gcmVmZXJlbmNlKSAvIHJlZmVyZW5jZSkgKiAxMDA7XG59XG5cbmZ1bmN0aW9uIHBpY2tMaXZlUHJpY2UocXVvdGU6IFF1b3RlIHwgdW5kZWZpbmVkLCByZWZzOiBDbG9zZVJlZnMpOiBudW1iZXIgfCBudWxsIHtcbiAgY29uc3QgcXVvdGVQcmljZSA9IE51bWJlcihxdW90ZT8ucHJpY2UpO1xuICBpZiAoTnVtYmVyLmlzRmluaXRlKHF1b3RlUHJpY2UpKSByZXR1cm4gcXVvdGVQcmljZTtcbiAgcmV0dXJuIHJlZnMubGF0ZXN0O1xufVxuXG5mdW5jdGlvbiBjb21wdXRlQ2hhbmdlc0Zyb21RdW90ZShxdW90ZTogUXVvdGUgfCB1bmRlZmluZWQsIHByaWNlOiBudW1iZXIgfCBudWxsLCByZWZzOiBDbG9zZVJlZnMpIHtcbiAgY29uc3QgcXVvdGVEYXkgPSBOdW1iZXIocXVvdGU/LnBlcmNlbnRDaGFuZ2UpO1xuICBjb25zdCBkYXkgPSBOdW1iZXIuaXNGaW5pdGUocXVvdGVEYXkpID8gcXVvdGVEYXkgOiBjaGFuZ2VGcm9tKHByaWNlLCByZWZzLmRheSk7XG4gIHJldHVybiB7XG4gICAgZGF5LFxuICAgIHdlZWs6IGNoYW5nZUZyb20ocHJpY2UsIHJlZnMud2VlayksXG4gICAgbW9udGg6IGNoYW5nZUZyb20ocHJpY2UsIHJlZnMubW9udGgpLFxuICAgIHllYXI6IGNoYW5nZUZyb20ocHJpY2UsIHJlZnMueWVhcilcbiAgfSBzYXRpc2ZpZXMgSGVhdG1hcENoYW5nZVNldDtcbn1cblxuZnVuY3Rpb24gYnVpbGRTZWN0b3JTdGF0cyh0aWNrZXJzOiBIZWF0bWFwVGlja2VyW10pOiBIZWF0bWFwU2VjdG9yW10ge1xuICBjb25zdCBwZXJpb2RzOiBIZWF0bWFwUGVyaW9kW10gPSBbXCJkYXlcIiwgXCJ3ZWVrXCIsIFwibW9udGhcIiwgXCJ5ZWFyXCJdO1xuICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxcbiAgICBzdHJpbmcsXG4gICAge1xuICAgICAgc2VjdG9yOiBzdHJpbmc7XG4gICAgICBtYXJrZXRDYXBCOiBudW1iZXI7XG4gICAgICBjb3VudDogbnVtYmVyO1xuICAgICAgd2VpZ2h0ZWRTdW1zOiBSZWNvcmQ8SGVhdG1hcFBlcmlvZCwgbnVtYmVyPjtcbiAgICAgIHdlaWdodGVkQ2FwczogUmVjb3JkPEhlYXRtYXBQZXJpb2QsIG51bWJlcj47XG4gICAgfVxuICA+KCk7XG5cbiAgdGlja2Vycy5mb3JFYWNoKCh0aWNrZXIpID0+IHtcbiAgICBjb25zdCBjdXJyZW50ID1cbiAgICAgIGdyb3VwZWQuZ2V0KHRpY2tlci5zZWN0b3IpIHx8XG4gICAgICB7XG4gICAgICAgIHNlY3RvcjogdGlja2VyLnNlY3RvcixcbiAgICAgICAgbWFya2V0Q2FwQjogMCxcbiAgICAgICAgY291bnQ6IDAsXG4gICAgICAgIHdlaWdodGVkU3VtczogeyBkYXk6IDAsIHdlZWs6IDAsIG1vbnRoOiAwLCB5ZWFyOiAwIH0sXG4gICAgICAgIHdlaWdodGVkQ2FwczogeyBkYXk6IDAsIHdlZWs6IDAsIG1vbnRoOiAwLCB5ZWFyOiAwIH1cbiAgICAgIH07XG5cbiAgICBjdXJyZW50Lm1hcmtldENhcEIgKz0gdGlja2VyLm1hcmtldENhcEI7XG4gICAgY3VycmVudC5jb3VudCArPSAxO1xuICAgIHBlcmlvZHMuZm9yRWFjaCgocGVyaW9kKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRpY2tlci5jaGFuZ2VzW3BlcmlvZF07XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybjtcbiAgICAgIGN1cnJlbnQud2VpZ2h0ZWRTdW1zW3BlcmlvZF0gKz0gdmFsdWUgKiB0aWNrZXIubWFya2V0Q2FwQjtcbiAgICAgIGN1cnJlbnQud2VpZ2h0ZWRDYXBzW3BlcmlvZF0gKz0gdGlja2VyLm1hcmtldENhcEI7XG4gICAgfSk7XG4gICAgZ3JvdXBlZC5zZXQodGlja2VyLnNlY3RvciwgY3VycmVudCk7XG4gIH0pO1xuXG4gIHJldHVybiBBcnJheS5mcm9tKGdyb3VwZWQudmFsdWVzKCkpXG4gICAgLm1hcCgoZW50cnkpID0+ICh7XG4gICAgICBzZWN0b3I6IGVudHJ5LnNlY3RvcixcbiAgICAgIG1hcmtldENhcEI6IGVudHJ5Lm1hcmtldENhcEIsXG4gICAgICBjb3VudDogZW50cnkuY291bnQsXG4gICAgICBjaGFuZ2VzOiB7XG4gICAgICAgIGRheTpcbiAgICAgICAgICBlbnRyeS53ZWlnaHRlZENhcHMuZGF5ID4gMFxuICAgICAgICAgICAgPyBlbnRyeS53ZWlnaHRlZFN1bXMuZGF5IC8gZW50cnkud2VpZ2h0ZWRDYXBzLmRheVxuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB3ZWVrOlxuICAgICAgICAgIGVudHJ5LndlaWdodGVkQ2Fwcy53ZWVrID4gMFxuICAgICAgICAgICAgPyBlbnRyeS53ZWlnaHRlZFN1bXMud2VlayAvIGVudHJ5LndlaWdodGVkQ2Fwcy53ZWVrXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIG1vbnRoOlxuICAgICAgICAgIGVudHJ5LndlaWdodGVkQ2Fwcy5tb250aCA+IDBcbiAgICAgICAgICAgID8gZW50cnkud2VpZ2h0ZWRTdW1zLm1vbnRoIC8gZW50cnkud2VpZ2h0ZWRDYXBzLm1vbnRoXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIHllYXI6XG4gICAgICAgICAgZW50cnkud2VpZ2h0ZWRDYXBzLnllYXIgPiAwXG4gICAgICAgICAgICA/IGVudHJ5LndlaWdodGVkU3Vtcy55ZWFyIC8gZW50cnkud2VpZ2h0ZWRDYXBzLnllYXJcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgfVxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLm1hcmtldENhcEIgLSBhLm1hcmtldENhcEIpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGRIZWF0bWFwUGF5bG9hZCgpOiBQcm9taXNlPEhlYXRtYXBQYXlsb2FkPiB7XG4gIGNvbnN0IHN5bWJvbHMgPSBIRUFUTUFQX1VOSVZFUlNFLm1hcCgoaXRlbSkgPT4gaXRlbS5zeW1ib2wpO1xuXG4gIGNvbnN0IGNsb3NlUGFpcnMgPSBhd2FpdCBtYXBXaXRoQ29uY3VycmVuY3koSEVBVE1BUF9VTklWRVJTRSwgQ09OQ1VSUkVOQ1ksIGFzeW5jIChpdGVtKSA9PiB7XG4gICAgY29uc3Qgc2VyaWVzID0gYXdhaXQgZmV0Y2hDbG9zZXMoaXRlbS5zeW1ib2wpO1xuICAgIHJldHVybiBbaXRlbS5zeW1ib2wsIGJ1aWxkUmVmcyhzZXJpZXMpXSBhcyBjb25zdDtcbiAgfSk7XG4gIGNvbnN0IGNsb3NlTWFwID0gbmV3IE1hcDxzdHJpbmcsIENsb3NlUmVmcz4oY2xvc2VQYWlycyk7XG5cbiAgbGV0IHF1b3RlczogUXVvdGVbXSA9IFtdO1xuICB0cnkge1xuICAgIHF1b3RlcyA9IGF3YWl0IGdldFF1b3RlcyhzeW1ib2xzKTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gS2VlcCBzdGFsZSBoaXN0b3JpY2FsLW9ubHkgaGVhdG1hcCBpZiBxdW90ZSBBUEkgaXMgbGltaXRlZC5cbiAgfVxuICBjb25zdCBxdW90ZU1hcCA9IG5ldyBNYXAocXVvdGVzLm1hcCgocXVvdGUpID0+IFtxdW90ZS5zeW1ib2wsIHF1b3RlXSkpO1xuXG4gIGNvbnN0IHRpY2tlcnMgPSBIRUFUTUFQX1VOSVZFUlNFLm1hcCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBjbG9zZU1hcC5nZXQoaXRlbS5zeW1ib2wpIHx8IHtcbiAgICAgIGxhdGVzdDogbnVsbCxcbiAgICAgIGRheTogbnVsbCxcbiAgICAgIHdlZWs6IG51bGwsXG4gICAgICBtb250aDogbnVsbCxcbiAgICAgIHllYXI6IG51bGxcbiAgICB9O1xuICAgIGNvbnN0IHF1b3RlID0gcXVvdGVNYXAuZ2V0KGl0ZW0uc3ltYm9sKTtcbiAgICBjb25zdCBsaXZlUHJpY2UgPSBwaWNrTGl2ZVByaWNlKHF1b3RlLCByZWZzKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzeW1ib2w6IGl0ZW0uc3ltYm9sLFxuICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgc2VjdG9yOiBpdGVtLnNlY3RvcixcbiAgICAgIG1hcmtldENhcEI6IGl0ZW0ubWFya2V0Q2FwQixcbiAgICAgIGN1cnJlbmN5OiBxdW90ZT8uY3VycmVuY3kgfHwgXCJVU0RcIixcbiAgICAgIHByaWNlOiBsaXZlUHJpY2UsXG4gICAgICBjaGFuZ2VzOiBjb21wdXRlQ2hhbmdlc0Zyb21RdW90ZShxdW90ZSwgbGl2ZVByaWNlLCByZWZzKVxuICAgIH0gc2F0aXNmaWVzIEhlYXRtYXBUaWNrZXI7XG4gIH0pO1xuXG4gIGNvbnN0IHNlY3RvcnMgPSBidWlsZFNlY3RvclN0YXRzKHRpY2tlcnMpO1xuXG4gIHJldHVybiB7XG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgc291cmNlOiBcIlR3ZWx2ZSBEYXRhIHF1b3RlcyArIFN0b29xIGhpc3RvcnlcIixcbiAgICB0aWNrZXJzLFxuICAgIHNlY3RvcnNcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJIRUFUTUFQX1VOSVZFUlNFIiwiZ2V0UXVvdGVzIiwiU1RPT1FfQkFTRSIsIlJFUVVFU1RfVElNRU9VVF9NUyIsIkNPTkNVUlJFTkNZIiwiQ0xPU0VfQ0FDSEVfVFRMX01TIiwiQ0xPU0VfQ0FDSEUiLCJNYXAiLCJzdG9vcVN5bWJvbHMiLCJzeW1ib2wiLCJub3JtYWxpemVkIiwidHJpbSIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImNhbmRpZGF0ZXMiLCJBcnJheSIsImZyb20iLCJTZXQiLCJwYXJzZUNzdiIsImNzdiIsImxpbmVzIiwic3BsaXQiLCJsZW5ndGgiLCJyb3dzIiwic2xpY2UiLCJtYXAiLCJsaW5lIiwiZmlsdGVyIiwiY29scyIsImRhdGUiLCJjbG9zZSIsInZhbHVlIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ0aW1lIiwicG9pbnQiLCJCb29sZWFuIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImZldGNoQ2xvc2VzIiwiY2FjaGVkIiwiZ2V0IiwiRGF0ZSIsIm5vdyIsImF0IiwiZGF0YSIsImNhbmRpZGF0ZSIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwiZmV0Y2giLCJ0b1N0cmluZyIsInNpZ25hbCIsIm9rIiwidGV4dCIsInBhcnNlZCIsImNhcHBlZCIsImNsZWFyVGltZW91dCIsIm1hcFdpdGhDb25jdXJyZW5jeSIsIml0ZW1zIiwibGltaXQiLCJtYXBwZXIiLCJyZXN1bHRzIiwiY3Vyc29yIiwid29ya2VycyIsIk1hdGgiLCJtaW4iLCJpbmRleCIsIlByb21pc2UiLCJhbGwiLCJyZWZBdCIsInNlcmllcyIsImxvb2tiYWNrIiwiYnVpbGRSZWZzIiwibGF0ZXN0IiwiZGF5Iiwid2VlayIsIm1vbnRoIiwieWVhciIsImNoYW5nZUZyb20iLCJjdXJyZW50IiwicmVmZXJlbmNlIiwicGlja0xpdmVQcmljZSIsInF1b3RlIiwicmVmcyIsInF1b3RlUHJpY2UiLCJwcmljZSIsImNvbXB1dGVDaGFuZ2VzRnJvbVF1b3RlIiwicXVvdGVEYXkiLCJwZXJjZW50Q2hhbmdlIiwiYnVpbGRTZWN0b3JTdGF0cyIsInRpY2tlcnMiLCJwZXJpb2RzIiwiZ3JvdXBlZCIsImZvckVhY2giLCJ0aWNrZXIiLCJzZWN0b3IiLCJtYXJrZXRDYXBCIiwiY291bnQiLCJ3ZWlnaHRlZFN1bXMiLCJ3ZWlnaHRlZENhcHMiLCJwZXJpb2QiLCJjaGFuZ2VzIiwidmFsdWVzIiwiZW50cnkiLCJidWlsZEhlYXRtYXBQYXlsb2FkIiwic3ltYm9scyIsIml0ZW0iLCJjbG9zZVBhaXJzIiwiY2xvc2VNYXAiLCJxdW90ZXMiLCJxdW90ZU1hcCIsImxpdmVQcmljZSIsIm5hbWUiLCJjdXJyZW5jeSIsInNlY3RvcnMiLCJ1cGRhdGVkQXQiLCJ0b0lTT1N0cmluZyIsInNvdXJjZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/heatmap.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/heatmapData.ts":
/*!********************************!*\
  !*** ./src/lib/heatmapData.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCachedHeatmapPayload: () => (/* binding */ getCachedHeatmapPayload)\n/* harmony export */ });\n/* harmony import */ var _lib_heatmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/heatmap */ \"(api-node)/./src/lib/heatmap.ts\");\n/* harmony import */ var _lib_serverStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/serverStore */ \"(api-node)/./src/lib/serverStore.ts\");\n\n\nconst REFRESH_MS = (()=>{\n    const raw = Number(process.env.HEATMAP_REFRESH_MS || 120000);\n    if (!Number.isFinite(raw)) return 120000;\n    return Math.max(30000, raw);\n})();\nconst STALE_MS = (()=>{\n    const raw = Number(process.env.HEATMAP_STALE_MS || 6 * 60 * 60 * 1000);\n    if (!Number.isFinite(raw)) return 6 * 60 * 60 * 1000;\n    return Math.max(REFRESH_MS, raw);\n})();\nconst EXPIRES_IN = Math.max(20, Math.min(120, Math.floor(REFRESH_MS / 1000)));\nasync function getCachedHeatmapPayload(options = {}) {\n    const data = await (0,_lib_serverStore__WEBPACK_IMPORTED_MODULE_1__.cached)(\"heatmap:global\", async ()=>(0,_lib_heatmap__WEBPACK_IMPORTED_MODULE_0__.buildHeatmapPayload)(), {\n        ttlMs: REFRESH_MS,\n        staleTtlMs: STALE_MS,\n        staleIfError: true,\n        forceRefresh: options.forceRefresh,\n        backgroundRevalidate: true,\n        l2: true\n    });\n    return {\n        ...data,\n        expiresIn: EXPIRES_IN\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvaGVhdG1hcERhdGEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9EO0FBQ1Q7QUFHM0MsTUFBTUUsYUFBYSxDQUFDO0lBQ2xCLE1BQU1DLE1BQU1DLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCLElBQUk7SUFDckQsSUFBSSxDQUFDSCxPQUFPSSxRQUFRLENBQUNMLE1BQU0sT0FBTztJQUNsQyxPQUFPTSxLQUFLQyxHQUFHLENBQUMsT0FBUVA7QUFDMUI7QUFFQSxNQUFNUSxXQUFXLENBQUM7SUFDaEIsTUFBTVIsTUFBTUMsT0FBT0MsUUFBUUMsR0FBRyxDQUFDTSxnQkFBZ0IsSUFBSSxJQUFJLEtBQUssS0FBSztJQUNqRSxJQUFJLENBQUNSLE9BQU9JLFFBQVEsQ0FBQ0wsTUFBTSxPQUFPLElBQUksS0FBSyxLQUFLO0lBQ2hELE9BQU9NLEtBQUtDLEdBQUcsQ0FBQ1IsWUFBWUM7QUFDOUI7QUFFQSxNQUFNVSxhQUFhSixLQUFLQyxHQUFHLENBQUMsSUFBSUQsS0FBS0ssR0FBRyxDQUFDLEtBQUtMLEtBQUtNLEtBQUssQ0FBQ2IsYUFBYTtBQUUvRCxlQUFlYyx3QkFBd0JDLFVBQXNDLENBQUMsQ0FBQztJQUNwRixNQUFNQyxPQUFPLE1BQU1qQix3REFBTUEsQ0FDdkIsa0JBQ0EsVUFBWUQsaUVBQW1CQSxJQUMvQjtRQUNFbUIsT0FBT2pCO1FBQ1BrQixZQUFZVDtRQUNaVSxjQUFjO1FBQ2RDLGNBQWNMLFFBQVFLLFlBQVk7UUFDbENDLHNCQUFzQjtRQUN0QkMsSUFBSTtJQUNOO0lBR0YsT0FBTztRQUNMLEdBQUlOLElBQUk7UUFDUk8sV0FBV1o7SUFDYjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdHV1bGFpL0RvY3VtZW50cy90bXAvc3JjL2xpYi9oZWF0bWFwRGF0YS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZEhlYXRtYXBQYXlsb2FkIH0gZnJvbSBcIkAvbGliL2hlYXRtYXBcIjtcbmltcG9ydCB7IGNhY2hlZCB9IGZyb20gXCJAL2xpYi9zZXJ2ZXJTdG9yZVwiO1xuaW1wb3J0IHR5cGUgeyBIZWF0bWFwUGF5bG9hZCB9IGZyb20gXCJAL3R5cGVzL2hlYXRtYXBcIjtcblxuY29uc3QgUkVGUkVTSF9NUyA9ICgoKSA9PiB7XG4gIGNvbnN0IHJhdyA9IE51bWJlcihwcm9jZXNzLmVudi5IRUFUTUFQX1JFRlJFU0hfTVMgfHwgMTIwMDAwKTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocmF3KSkgcmV0dXJuIDEyMDAwMDtcbiAgcmV0dXJuIE1hdGgubWF4KDMwXzAwMCwgcmF3KTtcbn0pKCk7XG5cbmNvbnN0IFNUQUxFX01TID0gKCgpID0+IHtcbiAgY29uc3QgcmF3ID0gTnVtYmVyKHByb2Nlc3MuZW52LkhFQVRNQVBfU1RBTEVfTVMgfHwgNiAqIDYwICogNjAgKiAxMDAwKTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocmF3KSkgcmV0dXJuIDYgKiA2MCAqIDYwICogMTAwMDtcbiAgcmV0dXJuIE1hdGgubWF4KFJFRlJFU0hfTVMsIHJhdyk7XG59KSgpO1xuXG5jb25zdCBFWFBJUkVTX0lOID0gTWF0aC5tYXgoMjAsIE1hdGgubWluKDEyMCwgTWF0aC5mbG9vcihSRUZSRVNIX01TIC8gMTAwMCkpKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZEhlYXRtYXBQYXlsb2FkKG9wdGlvbnM6IHsgZm9yY2VSZWZyZXNoPzogYm9vbGVhbiB9ID0ge30pIHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGNhY2hlZChcbiAgICBcImhlYXRtYXA6Z2xvYmFsXCIsXG4gICAgYXN5bmMgKCkgPT4gYnVpbGRIZWF0bWFwUGF5bG9hZCgpLFxuICAgIHtcbiAgICAgIHR0bE1zOiBSRUZSRVNIX01TLFxuICAgICAgc3RhbGVUdGxNczogU1RBTEVfTVMsXG4gICAgICBzdGFsZUlmRXJyb3I6IHRydWUsXG4gICAgICBmb3JjZVJlZnJlc2g6IG9wdGlvbnMuZm9yY2VSZWZyZXNoLFxuICAgICAgYmFja2dyb3VuZFJldmFsaWRhdGU6IHRydWUsXG4gICAgICBsMjogdHJ1ZVxuICAgIH1cbiAgKTtcblxuICByZXR1cm4ge1xuICAgIC4uLihkYXRhIGFzIEhlYXRtYXBQYXlsb2FkKSxcbiAgICBleHBpcmVzSW46IEVYUElSRVNfSU5cbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJidWlsZEhlYXRtYXBQYXlsb2FkIiwiY2FjaGVkIiwiUkVGUkVTSF9NUyIsInJhdyIsIk51bWJlciIsInByb2Nlc3MiLCJlbnYiLCJIRUFUTUFQX1JFRlJFU0hfTVMiLCJpc0Zpbml0ZSIsIk1hdGgiLCJtYXgiLCJTVEFMRV9NUyIsIkhFQVRNQVBfU1RBTEVfTVMiLCJFWFBJUkVTX0lOIiwibWluIiwiZmxvb3IiLCJnZXRDYWNoZWRIZWF0bWFwUGF5bG9hZCIsIm9wdGlvbnMiLCJkYXRhIiwidHRsTXMiLCJzdGFsZVR0bE1zIiwic3RhbGVJZkVycm9yIiwiZm9yY2VSZWZyZXNoIiwiYmFja2dyb3VuZFJldmFsaWRhdGUiLCJsMiIsImV4cGlyZXNJbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/heatmapData.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/heatmapUniverse.ts":
/*!************************************!*\
  !*** ./src/lib/heatmapUniverse.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HEATMAP_UNIVERSE: () => (/* binding */ HEATMAP_UNIVERSE)\n/* harmony export */ });\n// Approximate market caps (USD billions) to size tiles without extra API calls.\nconst HEATMAP_UNIVERSE = [\n    {\n        symbol: \"MSFT\",\n        name: \"Microsoft\",\n        sector: \"Technology\",\n        marketCapB: 3150\n    },\n    {\n        symbol: \"AAPL\",\n        name: \"Apple\",\n        sector: \"Technology\",\n        marketCapB: 2900\n    },\n    {\n        symbol: \"NVDA\",\n        name: \"NVIDIA\",\n        sector: \"Technology\",\n        marketCapB: 2400\n    },\n    {\n        symbol: \"GOOGL\",\n        name: \"Alphabet\",\n        sector: \"Communication Services\",\n        marketCapB: 2100\n    },\n    {\n        symbol: \"AMZN\",\n        name: \"Amazon\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 1900\n    },\n    {\n        symbol: \"META\",\n        name: \"Meta Platforms\",\n        sector: \"Communication Services\",\n        marketCapB: 1300\n    },\n    {\n        symbol: \"BRK.B\",\n        name: \"Berkshire Hathaway\",\n        sector: \"Financials\",\n        marketCapB: 920\n    },\n    {\n        symbol: \"LLY\",\n        name: \"Eli Lilly\",\n        sector: \"Healthcare\",\n        marketCapB: 780\n    },\n    {\n        symbol: \"AVGO\",\n        name: \"Broadcom\",\n        sector: \"Technology\",\n        marketCapB: 700\n    },\n    {\n        symbol: \"TSLA\",\n        name: \"Tesla\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 710\n    },\n    {\n        symbol: \"V\",\n        name: \"Visa\",\n        sector: \"Financials\",\n        marketCapB: 560\n    },\n    {\n        symbol: \"JPM\",\n        name: \"JPMorgan Chase\",\n        sector: \"Financials\",\n        marketCapB: 550\n    },\n    {\n        symbol: \"WMT\",\n        name: \"Walmart\",\n        sector: \"Consumer Staples\",\n        marketCapB: 500\n    },\n    {\n        symbol: \"MA\",\n        name: \"Mastercard\",\n        sector: \"Financials\",\n        marketCapB: 470\n    },\n    {\n        symbol: \"UNH\",\n        name: \"UnitedHealth\",\n        sector: \"Healthcare\",\n        marketCapB: 470\n    },\n    {\n        symbol: \"XOM\",\n        name: \"Exxon Mobil\",\n        sector: \"Energy\",\n        marketCapB: 430\n    },\n    {\n        symbol: \"ORCL\",\n        name: \"Oracle\",\n        sector: \"Technology\",\n        marketCapB: 430\n    },\n    {\n        symbol: \"COST\",\n        name: \"Costco\",\n        sector: \"Consumer Staples\",\n        marketCapB: 390\n    },\n    {\n        symbol: \"JNJ\",\n        name: \"Johnson & Johnson\",\n        sector: \"Healthcare\",\n        marketCapB: 380\n    },\n    {\n        symbol: \"HD\",\n        name: \"Home Depot\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 370\n    },\n    {\n        symbol: \"PG\",\n        name: \"Procter & Gamble\",\n        sector: \"Consumer Staples\",\n        marketCapB: 370\n    },\n    {\n        symbol: \"TCEHY\",\n        name: \"Tencent\",\n        sector: \"Communication Services\",\n        marketCapB: 350\n    },\n    {\n        symbol: \"MRK\",\n        name: \"Merck\",\n        sector: \"Healthcare\",\n        marketCapB: 320\n    },\n    {\n        symbol: \"AMD\",\n        name: \"Advanced Micro Devices\",\n        sector: \"Technology\",\n        marketCapB: 320\n    },\n    {\n        symbol: \"ABBV\",\n        name: \"AbbVie\",\n        sector: \"Healthcare\",\n        marketCapB: 300\n    },\n    {\n        symbol: \"CRM\",\n        name: \"Salesforce\",\n        sector: \"Technology\",\n        marketCapB: 300\n    },\n    {\n        symbol: \"BAC\",\n        name: \"Bank of America\",\n        sector: \"Financials\",\n        marketCapB: 280\n    },\n    {\n        symbol: \"CVX\",\n        name: \"Chevron\",\n        sector: \"Energy\",\n        marketCapB: 280\n    },\n    {\n        symbol: \"ADBE\",\n        name: \"Adobe\",\n        sector: \"Technology\",\n        marketCapB: 260\n    },\n    {\n        symbol: \"NFLX\",\n        name: \"Netflix\",\n        sector: \"Communication Services\",\n        marketCapB: 250\n    },\n    {\n        symbol: \"PEP\",\n        name: \"PepsiCo\",\n        sector: \"Consumer Staples\",\n        marketCapB: 250\n    },\n    {\n        symbol: \"TMUS\",\n        name: \"T-Mobile\",\n        sector: \"Communication Services\",\n        marketCapB: 220\n    },\n    {\n        symbol: \"MCD\",\n        name: \"McDonald's\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 220\n    },\n    {\n        symbol: \"TMO\",\n        name: \"Thermo Fisher\",\n        sector: \"Healthcare\",\n        marketCapB: 220\n    },\n    {\n        symbol: \"CSCO\",\n        name: \"Cisco\",\n        sector: \"Technology\",\n        marketCapB: 220\n    },\n    {\n        symbol: \"BABA\",\n        name: \"Alibaba\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 200\n    },\n    {\n        symbol: \"QCOM\",\n        name: \"Qualcomm\",\n        sector: \"Technology\",\n        marketCapB: 200\n    },\n    {\n        symbol: \"PDD\",\n        name: \"PDD Holdings\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 190\n    },\n    {\n        symbol: \"IBM\",\n        name: \"IBM\",\n        sector: \"Technology\",\n        marketCapB: 180\n    },\n    {\n        symbol: \"NOW\",\n        name: \"ServiceNow\",\n        sector: \"Technology\",\n        marketCapB: 180\n    },\n    {\n        symbol: \"DIS\",\n        name: \"Walt Disney\",\n        sector: \"Communication Services\",\n        marketCapB: 180\n    },\n    {\n        symbol: \"GE\",\n        name: \"GE Aerospace\",\n        sector: \"Industrials\",\n        marketCapB: 170\n    },\n    {\n        symbol: \"UBER\",\n        name: \"Uber\",\n        sector: \"Industrials\",\n        marketCapB: 170\n    },\n    {\n        symbol: \"VZ\",\n        name: \"Verizon\",\n        sector: \"Communication Services\",\n        marketCapB: 170\n    },\n    {\n        symbol: \"CAT\",\n        name: \"Caterpillar\",\n        sector: \"Industrials\",\n        marketCapB: 170\n    },\n    {\n        symbol: \"PFE\",\n        name: \"Pfizer\",\n        sector: \"Healthcare\",\n        marketCapB: 160\n    },\n    {\n        symbol: \"NKE\",\n        name: \"Nike\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 150\n    },\n    {\n        symbol: \"PANW\",\n        name: \"Palo Alto Networks\",\n        sector: \"Technology\",\n        marketCapB: 130\n    },\n    {\n        symbol: \"COP\",\n        name: \"ConocoPhillips\",\n        sector: \"Energy\",\n        marketCapB: 130\n    },\n    {\n        symbol: \"T\",\n        name: \"AT&T\",\n        sector: \"Communication Services\",\n        marketCapB: 130\n    },\n    {\n        symbol: \"SHOP\",\n        name: \"Shopify\",\n        sector: \"Technology\",\n        marketCapB: 120\n    },\n    {\n        symbol: \"BA\",\n        name: \"Boeing\",\n        sector: \"Industrials\",\n        marketCapB: 120\n    },\n    {\n        symbol: \"VRTX\",\n        name: \"Vertex\",\n        sector: \"Healthcare\",\n        marketCapB: 120\n    },\n    {\n        symbol: \"REGN\",\n        name: \"Regeneron\",\n        sector: \"Healthcare\",\n        marketCapB: 110\n    },\n    {\n        symbol: \"DE\",\n        name: \"Deere\",\n        sector: \"Industrials\",\n        marketCapB: 110\n    },\n    {\n        symbol: \"GILD\",\n        name: \"Gilead\",\n        sector: \"Healthcare\",\n        marketCapB: 100\n    },\n    {\n        symbol: \"PBR\",\n        name: \"Petrobras\",\n        sector: \"Energy\",\n        marketCapB: 95\n    },\n    {\n        symbol: \"PLTR\",\n        name: \"Palantir\",\n        sector: \"Technology\",\n        marketCapB: 75\n    },\n    {\n        symbol: \"SNOW\",\n        name: \"Snowflake\",\n        sector: \"Technology\",\n        marketCapB: 75\n    },\n    {\n        symbol: \"PYPL\",\n        name: \"PayPal\",\n        sector: \"Financials\",\n        marketCapB: 70\n    },\n    {\n        symbol: \"IWM\",\n        name: \"iShares Russell 2000 ETF\",\n        sector: \"ETF\",\n        marketCapB: 70\n    },\n    {\n        symbol: \"SLB\",\n        name: \"Schlumberger\",\n        sector: \"Energy\",\n        marketCapB: 65\n    },\n    {\n        symbol: \"XLK\",\n        name: \"Technology Select Sector ETF\",\n        sector: \"ETF\",\n        marketCapB: 60\n    },\n    {\n        symbol: \"COIN\",\n        name: \"Coinbase\",\n        sector: \"Financials\",\n        marketCapB: 60\n    },\n    {\n        symbol: \"GM\",\n        name: \"General Motors\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 55\n    },\n    {\n        symbol: \"OXY\",\n        name: \"Occidental Petroleum\",\n        sector: \"Energy\",\n        marketCapB: 55\n    },\n    {\n        symbol: \"F\",\n        name: \"Ford\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 50\n    },\n    {\n        symbol: \"XLV\",\n        name: \"Healthcare Select Sector ETF\",\n        sector: \"ETF\",\n        marketCapB: 45\n    },\n    {\n        symbol: \"MSTR\",\n        name: \"MicroStrategy\",\n        sector: \"Technology\",\n        marketCapB: 45\n    },\n    {\n        symbol: \"XLF\",\n        name: \"Financial Select Sector ETF\",\n        sector: \"ETF\",\n        marketCapB: 40\n    },\n    {\n        symbol: \"XLE\",\n        name: \"Energy Select Sector ETF\",\n        sector: \"ETF\",\n        marketCapB: 35\n    },\n    {\n        symbol: \"DIA\",\n        name: \"SPDR Dow Jones ETF\",\n        sector: \"ETF\",\n        marketCapB: 35\n    },\n    {\n        symbol: \"RBLX\",\n        name: \"Roblox\",\n        sector: \"Communication Services\",\n        marketCapB: 30\n    },\n    {\n        symbol: \"QQQ\",\n        name: \"Invesco QQQ ETF\",\n        sector: \"ETF\",\n        marketCapB: 280\n    },\n    {\n        symbol: \"SPY\",\n        name: \"SPDR S&P 500 ETF\",\n        sector: \"ETF\",\n        marketCapB: 500\n    },\n    {\n        symbol: \"NIO\",\n        name: \"NIO\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 20\n    },\n    {\n        symbol: \"HOOD\",\n        name: \"Robinhood\",\n        sector: \"Financials\",\n        marketCapB: 20\n    },\n    {\n        symbol: \"SOFI\",\n        name: \"SoFi\",\n        sector: \"Financials\",\n        marketCapB: 12\n    },\n    {\n        symbol: \"RIVN\",\n        name: \"Rivian\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 12\n    },\n    {\n        symbol: \"LCID\",\n        name: \"Lucid\",\n        sector: \"Consumer Discretionary\",\n        marketCapB: 8\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUc7SUFDbkY7UUFBRUgsUUFBUTtRQUFRQyxNQUFNO1FBQVNDLFFBQVE7UUFBMEJDLFlBQVk7SUFBRTtDQUNsRixDQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdHV1bGFpL0RvY3VtZW50cy90bXAvc3JjL2xpYi9oZWF0bWFwVW5pdmVyc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBVbml2ZXJzZUl0ZW0gPSB7XG4gIHN5bWJvbDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHNlY3Rvcjogc3RyaW5nO1xuICBtYXJrZXRDYXBCOiBudW1iZXI7XG59O1xuXG4vLyBBcHByb3hpbWF0ZSBtYXJrZXQgY2FwcyAoVVNEIGJpbGxpb25zKSB0byBzaXplIHRpbGVzIHdpdGhvdXQgZXh0cmEgQVBJIGNhbGxzLlxuZXhwb3J0IGNvbnN0IEhFQVRNQVBfVU5JVkVSU0U6IFVuaXZlcnNlSXRlbVtdID0gW1xuICB7IHN5bWJvbDogXCJNU0ZUXCIsIG5hbWU6IFwiTWljcm9zb2Z0XCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDMxNTAgfSxcbiAgeyBzeW1ib2w6IFwiQUFQTFwiLCBuYW1lOiBcIkFwcGxlXCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDI5MDAgfSxcbiAgeyBzeW1ib2w6IFwiTlZEQVwiLCBuYW1lOiBcIk5WSURJQVwiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiAyNDAwIH0sXG4gIHsgc3ltYm9sOiBcIkdPT0dMXCIsIG5hbWU6IFwiQWxwaGFiZXRcIiwgc2VjdG9yOiBcIkNvbW11bmljYXRpb24gU2VydmljZXNcIiwgbWFya2V0Q2FwQjogMjEwMCB9LFxuICB7IHN5bWJvbDogXCJBTVpOXCIsIG5hbWU6IFwiQW1hem9uXCIsIHNlY3RvcjogXCJDb25zdW1lciBEaXNjcmV0aW9uYXJ5XCIsIG1hcmtldENhcEI6IDE5MDAgfSxcbiAgeyBzeW1ib2w6IFwiTUVUQVwiLCBuYW1lOiBcIk1ldGEgUGxhdGZvcm1zXCIsIHNlY3RvcjogXCJDb21tdW5pY2F0aW9uIFNlcnZpY2VzXCIsIG1hcmtldENhcEI6IDEzMDAgfSxcbiAgeyBzeW1ib2w6IFwiQlJLLkJcIiwgbmFtZTogXCJCZXJrc2hpcmUgSGF0aGF3YXlcIiwgc2VjdG9yOiBcIkZpbmFuY2lhbHNcIiwgbWFya2V0Q2FwQjogOTIwIH0sXG4gIHsgc3ltYm9sOiBcIkxMWVwiLCBuYW1lOiBcIkVsaSBMaWxseVwiLCBzZWN0b3I6IFwiSGVhbHRoY2FyZVwiLCBtYXJrZXRDYXBCOiA3ODAgfSxcbiAgeyBzeW1ib2w6IFwiQVZHT1wiLCBuYW1lOiBcIkJyb2FkY29tXCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDcwMCB9LFxuICB7IHN5bWJvbDogXCJUU0xBXCIsIG5hbWU6IFwiVGVzbGFcIiwgc2VjdG9yOiBcIkNvbnN1bWVyIERpc2NyZXRpb25hcnlcIiwgbWFya2V0Q2FwQjogNzEwIH0sXG4gIHsgc3ltYm9sOiBcIlZcIiwgbmFtZTogXCJWaXNhXCIsIHNlY3RvcjogXCJGaW5hbmNpYWxzXCIsIG1hcmtldENhcEI6IDU2MCB9LFxuICB7IHN5bWJvbDogXCJKUE1cIiwgbmFtZTogXCJKUE1vcmdhbiBDaGFzZVwiLCBzZWN0b3I6IFwiRmluYW5jaWFsc1wiLCBtYXJrZXRDYXBCOiA1NTAgfSxcbiAgeyBzeW1ib2w6IFwiV01UXCIsIG5hbWU6IFwiV2FsbWFydFwiLCBzZWN0b3I6IFwiQ29uc3VtZXIgU3RhcGxlc1wiLCBtYXJrZXRDYXBCOiA1MDAgfSxcbiAgeyBzeW1ib2w6IFwiTUFcIiwgbmFtZTogXCJNYXN0ZXJjYXJkXCIsIHNlY3RvcjogXCJGaW5hbmNpYWxzXCIsIG1hcmtldENhcEI6IDQ3MCB9LFxuICB7IHN5bWJvbDogXCJVTkhcIiwgbmFtZTogXCJVbml0ZWRIZWFsdGhcIiwgc2VjdG9yOiBcIkhlYWx0aGNhcmVcIiwgbWFya2V0Q2FwQjogNDcwIH0sXG4gIHsgc3ltYm9sOiBcIlhPTVwiLCBuYW1lOiBcIkV4eG9uIE1vYmlsXCIsIHNlY3RvcjogXCJFbmVyZ3lcIiwgbWFya2V0Q2FwQjogNDMwIH0sXG4gIHsgc3ltYm9sOiBcIk9SQ0xcIiwgbmFtZTogXCJPcmFjbGVcIiwgc2VjdG9yOiBcIlRlY2hub2xvZ3lcIiwgbWFya2V0Q2FwQjogNDMwIH0sXG4gIHsgc3ltYm9sOiBcIkNPU1RcIiwgbmFtZTogXCJDb3N0Y29cIiwgc2VjdG9yOiBcIkNvbnN1bWVyIFN0YXBsZXNcIiwgbWFya2V0Q2FwQjogMzkwIH0sXG4gIHsgc3ltYm9sOiBcIkpOSlwiLCBuYW1lOiBcIkpvaG5zb24gJiBKb2huc29uXCIsIHNlY3RvcjogXCJIZWFsdGhjYXJlXCIsIG1hcmtldENhcEI6IDM4MCB9LFxuICB7IHN5bWJvbDogXCJIRFwiLCBuYW1lOiBcIkhvbWUgRGVwb3RcIiwgc2VjdG9yOiBcIkNvbnN1bWVyIERpc2NyZXRpb25hcnlcIiwgbWFya2V0Q2FwQjogMzcwIH0sXG4gIHsgc3ltYm9sOiBcIlBHXCIsIG5hbWU6IFwiUHJvY3RlciAmIEdhbWJsZVwiLCBzZWN0b3I6IFwiQ29uc3VtZXIgU3RhcGxlc1wiLCBtYXJrZXRDYXBCOiAzNzAgfSxcbiAgeyBzeW1ib2w6IFwiVENFSFlcIiwgbmFtZTogXCJUZW5jZW50XCIsIHNlY3RvcjogXCJDb21tdW5pY2F0aW9uIFNlcnZpY2VzXCIsIG1hcmtldENhcEI6IDM1MCB9LFxuICB7IHN5bWJvbDogXCJNUktcIiwgbmFtZTogXCJNZXJja1wiLCBzZWN0b3I6IFwiSGVhbHRoY2FyZVwiLCBtYXJrZXRDYXBCOiAzMjAgfSxcbiAgeyBzeW1ib2w6IFwiQU1EXCIsIG5hbWU6IFwiQWR2YW5jZWQgTWljcm8gRGV2aWNlc1wiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiAzMjAgfSxcbiAgeyBzeW1ib2w6IFwiQUJCVlwiLCBuYW1lOiBcIkFiYlZpZVwiLCBzZWN0b3I6IFwiSGVhbHRoY2FyZVwiLCBtYXJrZXRDYXBCOiAzMDAgfSxcbiAgeyBzeW1ib2w6IFwiQ1JNXCIsIG5hbWU6IFwiU2FsZXNmb3JjZVwiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiAzMDAgfSxcbiAgeyBzeW1ib2w6IFwiQkFDXCIsIG5hbWU6IFwiQmFuayBvZiBBbWVyaWNhXCIsIHNlY3RvcjogXCJGaW5hbmNpYWxzXCIsIG1hcmtldENhcEI6IDI4MCB9LFxuICB7IHN5bWJvbDogXCJDVlhcIiwgbmFtZTogXCJDaGV2cm9uXCIsIHNlY3RvcjogXCJFbmVyZ3lcIiwgbWFya2V0Q2FwQjogMjgwIH0sXG4gIHsgc3ltYm9sOiBcIkFEQkVcIiwgbmFtZTogXCJBZG9iZVwiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiAyNjAgfSxcbiAgeyBzeW1ib2w6IFwiTkZMWFwiLCBuYW1lOiBcIk5ldGZsaXhcIiwgc2VjdG9yOiBcIkNvbW11bmljYXRpb24gU2VydmljZXNcIiwgbWFya2V0Q2FwQjogMjUwIH0sXG4gIHsgc3ltYm9sOiBcIlBFUFwiLCBuYW1lOiBcIlBlcHNpQ29cIiwgc2VjdG9yOiBcIkNvbnN1bWVyIFN0YXBsZXNcIiwgbWFya2V0Q2FwQjogMjUwIH0sXG4gIHsgc3ltYm9sOiBcIlRNVVNcIiwgbmFtZTogXCJULU1vYmlsZVwiLCBzZWN0b3I6IFwiQ29tbXVuaWNhdGlvbiBTZXJ2aWNlc1wiLCBtYXJrZXRDYXBCOiAyMjAgfSxcbiAgeyBzeW1ib2w6IFwiTUNEXCIsIG5hbWU6IFwiTWNEb25hbGQnc1wiLCBzZWN0b3I6IFwiQ29uc3VtZXIgRGlzY3JldGlvbmFyeVwiLCBtYXJrZXRDYXBCOiAyMjAgfSxcbiAgeyBzeW1ib2w6IFwiVE1PXCIsIG5hbWU6IFwiVGhlcm1vIEZpc2hlclwiLCBzZWN0b3I6IFwiSGVhbHRoY2FyZVwiLCBtYXJrZXRDYXBCOiAyMjAgfSxcbiAgeyBzeW1ib2w6IFwiQ1NDT1wiLCBuYW1lOiBcIkNpc2NvXCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDIyMCB9LFxuICB7IHN5bWJvbDogXCJCQUJBXCIsIG5hbWU6IFwiQWxpYmFiYVwiLCBzZWN0b3I6IFwiQ29uc3VtZXIgRGlzY3JldGlvbmFyeVwiLCBtYXJrZXRDYXBCOiAyMDAgfSxcbiAgeyBzeW1ib2w6IFwiUUNPTVwiLCBuYW1lOiBcIlF1YWxjb21tXCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDIwMCB9LFxuICB7IHN5bWJvbDogXCJQRERcIiwgbmFtZTogXCJQREQgSG9sZGluZ3NcIiwgc2VjdG9yOiBcIkNvbnN1bWVyIERpc2NyZXRpb25hcnlcIiwgbWFya2V0Q2FwQjogMTkwIH0sXG4gIHsgc3ltYm9sOiBcIklCTVwiLCBuYW1lOiBcIklCTVwiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiAxODAgfSxcbiAgeyBzeW1ib2w6IFwiTk9XXCIsIG5hbWU6IFwiU2VydmljZU5vd1wiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiAxODAgfSxcbiAgeyBzeW1ib2w6IFwiRElTXCIsIG5hbWU6IFwiV2FsdCBEaXNuZXlcIiwgc2VjdG9yOiBcIkNvbW11bmljYXRpb24gU2VydmljZXNcIiwgbWFya2V0Q2FwQjogMTgwIH0sXG4gIHsgc3ltYm9sOiBcIkdFXCIsIG5hbWU6IFwiR0UgQWVyb3NwYWNlXCIsIHNlY3RvcjogXCJJbmR1c3RyaWFsc1wiLCBtYXJrZXRDYXBCOiAxNzAgfSxcbiAgeyBzeW1ib2w6IFwiVUJFUlwiLCBuYW1lOiBcIlViZXJcIiwgc2VjdG9yOiBcIkluZHVzdHJpYWxzXCIsIG1hcmtldENhcEI6IDE3MCB9LFxuICB7IHN5bWJvbDogXCJWWlwiLCBuYW1lOiBcIlZlcml6b25cIiwgc2VjdG9yOiBcIkNvbW11bmljYXRpb24gU2VydmljZXNcIiwgbWFya2V0Q2FwQjogMTcwIH0sXG4gIHsgc3ltYm9sOiBcIkNBVFwiLCBuYW1lOiBcIkNhdGVycGlsbGFyXCIsIHNlY3RvcjogXCJJbmR1c3RyaWFsc1wiLCBtYXJrZXRDYXBCOiAxNzAgfSxcbiAgeyBzeW1ib2w6IFwiUEZFXCIsIG5hbWU6IFwiUGZpemVyXCIsIHNlY3RvcjogXCJIZWFsdGhjYXJlXCIsIG1hcmtldENhcEI6IDE2MCB9LFxuICB7IHN5bWJvbDogXCJOS0VcIiwgbmFtZTogXCJOaWtlXCIsIHNlY3RvcjogXCJDb25zdW1lciBEaXNjcmV0aW9uYXJ5XCIsIG1hcmtldENhcEI6IDE1MCB9LFxuICB7IHN5bWJvbDogXCJQQU5XXCIsIG5hbWU6IFwiUGFsbyBBbHRvIE5ldHdvcmtzXCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDEzMCB9LFxuICB7IHN5bWJvbDogXCJDT1BcIiwgbmFtZTogXCJDb25vY29QaGlsbGlwc1wiLCBzZWN0b3I6IFwiRW5lcmd5XCIsIG1hcmtldENhcEI6IDEzMCB9LFxuICB7IHN5bWJvbDogXCJUXCIsIG5hbWU6IFwiQVQmVFwiLCBzZWN0b3I6IFwiQ29tbXVuaWNhdGlvbiBTZXJ2aWNlc1wiLCBtYXJrZXRDYXBCOiAxMzAgfSxcbiAgeyBzeW1ib2w6IFwiU0hPUFwiLCBuYW1lOiBcIlNob3BpZnlcIiwgc2VjdG9yOiBcIlRlY2hub2xvZ3lcIiwgbWFya2V0Q2FwQjogMTIwIH0sXG4gIHsgc3ltYm9sOiBcIkJBXCIsIG5hbWU6IFwiQm9laW5nXCIsIHNlY3RvcjogXCJJbmR1c3RyaWFsc1wiLCBtYXJrZXRDYXBCOiAxMjAgfSxcbiAgeyBzeW1ib2w6IFwiVlJUWFwiLCBuYW1lOiBcIlZlcnRleFwiLCBzZWN0b3I6IFwiSGVhbHRoY2FyZVwiLCBtYXJrZXRDYXBCOiAxMjAgfSxcbiAgeyBzeW1ib2w6IFwiUkVHTlwiLCBuYW1lOiBcIlJlZ2VuZXJvblwiLCBzZWN0b3I6IFwiSGVhbHRoY2FyZVwiLCBtYXJrZXRDYXBCOiAxMTAgfSxcbiAgeyBzeW1ib2w6IFwiREVcIiwgbmFtZTogXCJEZWVyZVwiLCBzZWN0b3I6IFwiSW5kdXN0cmlhbHNcIiwgbWFya2V0Q2FwQjogMTEwIH0sXG4gIHsgc3ltYm9sOiBcIkdJTERcIiwgbmFtZTogXCJHaWxlYWRcIiwgc2VjdG9yOiBcIkhlYWx0aGNhcmVcIiwgbWFya2V0Q2FwQjogMTAwIH0sXG4gIHsgc3ltYm9sOiBcIlBCUlwiLCBuYW1lOiBcIlBldHJvYnJhc1wiLCBzZWN0b3I6IFwiRW5lcmd5XCIsIG1hcmtldENhcEI6IDk1IH0sXG4gIHsgc3ltYm9sOiBcIlBMVFJcIiwgbmFtZTogXCJQYWxhbnRpclwiLCBzZWN0b3I6IFwiVGVjaG5vbG9neVwiLCBtYXJrZXRDYXBCOiA3NSB9LFxuICB7IHN5bWJvbDogXCJTTk9XXCIsIG5hbWU6IFwiU25vd2ZsYWtlXCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDc1IH0sXG4gIHsgc3ltYm9sOiBcIlBZUExcIiwgbmFtZTogXCJQYXlQYWxcIiwgc2VjdG9yOiBcIkZpbmFuY2lhbHNcIiwgbWFya2V0Q2FwQjogNzAgfSxcbiAgeyBzeW1ib2w6IFwiSVdNXCIsIG5hbWU6IFwiaVNoYXJlcyBSdXNzZWxsIDIwMDAgRVRGXCIsIHNlY3RvcjogXCJFVEZcIiwgbWFya2V0Q2FwQjogNzAgfSxcbiAgeyBzeW1ib2w6IFwiU0xCXCIsIG5hbWU6IFwiU2NobHVtYmVyZ2VyXCIsIHNlY3RvcjogXCJFbmVyZ3lcIiwgbWFya2V0Q2FwQjogNjUgfSxcbiAgeyBzeW1ib2w6IFwiWExLXCIsIG5hbWU6IFwiVGVjaG5vbG9neSBTZWxlY3QgU2VjdG9yIEVURlwiLCBzZWN0b3I6IFwiRVRGXCIsIG1hcmtldENhcEI6IDYwIH0sXG4gIHsgc3ltYm9sOiBcIkNPSU5cIiwgbmFtZTogXCJDb2luYmFzZVwiLCBzZWN0b3I6IFwiRmluYW5jaWFsc1wiLCBtYXJrZXRDYXBCOiA2MCB9LFxuICB7IHN5bWJvbDogXCJHTVwiLCBuYW1lOiBcIkdlbmVyYWwgTW90b3JzXCIsIHNlY3RvcjogXCJDb25zdW1lciBEaXNjcmV0aW9uYXJ5XCIsIG1hcmtldENhcEI6IDU1IH0sXG4gIHsgc3ltYm9sOiBcIk9YWVwiLCBuYW1lOiBcIk9jY2lkZW50YWwgUGV0cm9sZXVtXCIsIHNlY3RvcjogXCJFbmVyZ3lcIiwgbWFya2V0Q2FwQjogNTUgfSxcbiAgeyBzeW1ib2w6IFwiRlwiLCBuYW1lOiBcIkZvcmRcIiwgc2VjdG9yOiBcIkNvbnN1bWVyIERpc2NyZXRpb25hcnlcIiwgbWFya2V0Q2FwQjogNTAgfSxcbiAgeyBzeW1ib2w6IFwiWExWXCIsIG5hbWU6IFwiSGVhbHRoY2FyZSBTZWxlY3QgU2VjdG9yIEVURlwiLCBzZWN0b3I6IFwiRVRGXCIsIG1hcmtldENhcEI6IDQ1IH0sXG4gIHsgc3ltYm9sOiBcIk1TVFJcIiwgbmFtZTogXCJNaWNyb1N0cmF0ZWd5XCIsIHNlY3RvcjogXCJUZWNobm9sb2d5XCIsIG1hcmtldENhcEI6IDQ1IH0sXG4gIHsgc3ltYm9sOiBcIlhMRlwiLCBuYW1lOiBcIkZpbmFuY2lhbCBTZWxlY3QgU2VjdG9yIEVURlwiLCBzZWN0b3I6IFwiRVRGXCIsIG1hcmtldENhcEI6IDQwIH0sXG4gIHsgc3ltYm9sOiBcIlhMRVwiLCBuYW1lOiBcIkVuZXJneSBTZWxlY3QgU2VjdG9yIEVURlwiLCBzZWN0b3I6IFwiRVRGXCIsIG1hcmtldENhcEI6IDM1IH0sXG4gIHsgc3ltYm9sOiBcIkRJQVwiLCBuYW1lOiBcIlNQRFIgRG93IEpvbmVzIEVURlwiLCBzZWN0b3I6IFwiRVRGXCIsIG1hcmtldENhcEI6IDM1IH0sXG4gIHsgc3ltYm9sOiBcIlJCTFhcIiwgbmFtZTogXCJSb2Jsb3hcIiwgc2VjdG9yOiBcIkNvbW11bmljYXRpb24gU2VydmljZXNcIiwgbWFya2V0Q2FwQjogMzAgfSxcbiAgeyBzeW1ib2w6IFwiUVFRXCIsIG5hbWU6IFwiSW52ZXNjbyBRUVEgRVRGXCIsIHNlY3RvcjogXCJFVEZcIiwgbWFya2V0Q2FwQjogMjgwIH0sXG4gIHsgc3ltYm9sOiBcIlNQWVwiLCBuYW1lOiBcIlNQRFIgUyZQIDUwMCBFVEZcIiwgc2VjdG9yOiBcIkVURlwiLCBtYXJrZXRDYXBCOiA1MDAgfSxcbiAgeyBzeW1ib2w6IFwiTklPXCIsIG5hbWU6IFwiTklPXCIsIHNlY3RvcjogXCJDb25zdW1lciBEaXNjcmV0aW9uYXJ5XCIsIG1hcmtldENhcEI6IDIwIH0sXG4gIHsgc3ltYm9sOiBcIkhPT0RcIiwgbmFtZTogXCJSb2Jpbmhvb2RcIiwgc2VjdG9yOiBcIkZpbmFuY2lhbHNcIiwgbWFya2V0Q2FwQjogMjAgfSxcbiAgeyBzeW1ib2w6IFwiU09GSVwiLCBuYW1lOiBcIlNvRmlcIiwgc2VjdG9yOiBcIkZpbmFuY2lhbHNcIiwgbWFya2V0Q2FwQjogMTIgfSxcbiAgeyBzeW1ib2w6IFwiUklWTlwiLCBuYW1lOiBcIlJpdmlhblwiLCBzZWN0b3I6IFwiQ29uc3VtZXIgRGlzY3JldGlvbmFyeVwiLCBtYXJrZXRDYXBCOiAxMiB9LFxuICB7IHN5bWJvbDogXCJMQ0lEXCIsIG5hbWU6IFwiTHVjaWRcIiwgc2VjdG9yOiBcIkNvbnN1bWVyIERpc2NyZXRpb25hcnlcIiwgbWFya2V0Q2FwQjogOCB9XG5dO1xuIl0sIm5hbWVzIjpbIkhFQVRNQVBfVU5JVkVSU0UiLCJzeW1ib2wiLCJuYW1lIiwic2VjdG9yIiwibWFya2V0Q2FwQiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/heatmapUniverse.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/newsData.ts":
/*!*****************************!*\
  !*** ./src/lib/newsData.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCachedNewsPayload: () => (/* binding */ getCachedNewsPayload)\n/* harmony export */ });\n/* harmony import */ var _lib_twelveData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/twelveData */ \"(api-node)/./src/lib/twelveData.ts\");\n/* harmony import */ var _lib_sentiment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/sentiment */ \"(api-node)/./src/lib/sentiment.ts\");\n/* harmony import */ var _lib_serverStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/serverStore */ \"(api-node)/./src/lib/serverStore.ts\");\n\n\n\nconst REFRESH_MS = (()=>{\n    const raw = Number(process.env.NEWS_REFRESH_MS || 5 * 60 * 1000);\n    if (!Number.isFinite(raw)) return 5 * 60 * 1000;\n    return Math.max(60000, raw);\n})();\nconst STALE_MS = (()=>{\n    const raw = Number(process.env.NEWS_STALE_MS || 30 * 60 * 1000);\n    if (!Number.isFinite(raw)) return 30 * 60 * 1000;\n    return Math.max(REFRESH_MS, raw);\n})();\nconst EXPIRES_IN = Math.max(30, Math.floor(REFRESH_MS / 1000));\nfunction queryKey(symbol, from, to) {\n    return `news:${symbol || \"market\"}:${from || \"\"}:${to || \"\"}`;\n}\nasync function getCachedNewsPayload(symbol, options = {}) {\n    const upper = String(symbol || \"\").toUpperCase();\n    const key = queryKey(upper, options.from, options.to);\n    const baseWarning = process.env.NEWS_API_KEY ? null : \"NEWS_API_KEY not set\";\n    try {\n        return await (0,_lib_serverStore__WEBPACK_IMPORTED_MODULE_2__.cached)(key, async ()=>{\n            const articles = await (0,_lib_twelveData__WEBPACK_IMPORTED_MODULE_0__.getNews)(upper, {\n                from: options.from,\n                to: options.to\n            });\n            const enriched = articles.map((article)=>{\n                const text = `${article.title}. ${article.description}`;\n                const sentiment = (0,_lib_sentiment__WEBPACK_IMPORTED_MODULE_1__.analyzeSentiment)(text);\n                return {\n                    ...article,\n                    sentiment: sentiment.normalized\n                };\n            });\n            const summary = (0,_lib_sentiment__WEBPACK_IMPORTED_MODULE_1__.summarizeSentiment)(enriched.map((article)=>article.sentiment));\n            return {\n                symbol: upper || \"market\",\n                articles: enriched,\n                sentiment: summary,\n                warning: baseWarning,\n                expiresIn: EXPIRES_IN\n            };\n        }, {\n            ttlMs: REFRESH_MS,\n            staleTtlMs: STALE_MS,\n            staleIfError: true,\n            forceRefresh: options.forceRefresh,\n            backgroundRevalidate: true,\n            l2: true\n        });\n    } catch (error) {\n        return {\n            symbol: upper || \"market\",\n            articles: [],\n            sentiment: {\n                score: 0,\n                label: \"neutral\",\n                confidence: 0\n            },\n            warning: baseWarning || error?.message || \"News data temporarily unavailable\",\n            expiresIn: EXPIRES_IN\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvbmV3c0RhdGEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUM0QjtBQUM1QjtBQXVCM0MsTUFBTUksYUFBYSxDQUFDO0lBQ2xCLE1BQU1DLE1BQU1DLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJLElBQUksS0FBSztJQUMzRCxJQUFJLENBQUNILE9BQU9JLFFBQVEsQ0FBQ0wsTUFBTSxPQUFPLElBQUksS0FBSztJQUMzQyxPQUFPTSxLQUFLQyxHQUFHLENBQUMsT0FBUVA7QUFDMUI7QUFFQSxNQUFNUSxXQUFXLENBQUM7SUFDaEIsTUFBTVIsTUFBTUMsT0FBT0MsUUFBUUMsR0FBRyxDQUFDTSxhQUFhLElBQUksS0FBSyxLQUFLO0lBQzFELElBQUksQ0FBQ1IsT0FBT0ksUUFBUSxDQUFDTCxNQUFNLE9BQU8sS0FBSyxLQUFLO0lBQzVDLE9BQU9NLEtBQUtDLEdBQUcsQ0FBQ1IsWUFBWUM7QUFDOUI7QUFFQSxNQUFNVSxhQUFhSixLQUFLQyxHQUFHLENBQUMsSUFBSUQsS0FBS0ssS0FBSyxDQUFDWixhQUFhO0FBRXhELFNBQVNhLFNBQVNDLE1BQWMsRUFBRUMsSUFBYSxFQUFFQyxFQUFXO0lBQzFELE9BQU8sQ0FBQyxLQUFLLEVBQUVGLFVBQVUsU0FBUyxDQUFDLEVBQUVDLFFBQVEsR0FBRyxDQUFDLEVBQUVDLE1BQU0sSUFBSTtBQUMvRDtBQUVPLGVBQWVDLHFCQUNwQkgsTUFBYyxFQUNkSSxVQUFrRSxDQUFDLENBQUM7SUFFcEUsTUFBTUMsUUFBUUMsT0FBT04sVUFBVSxJQUFJTyxXQUFXO0lBQzlDLE1BQU1DLE1BQU1ULFNBQVNNLE9BQU9ELFFBQVFILElBQUksRUFBRUcsUUFBUUYsRUFBRTtJQUNwRCxNQUFNTyxjQUFjcEIsUUFBUUMsR0FBRyxDQUFDb0IsWUFBWSxHQUFHLE9BQU87SUFFdEQsSUFBSTtRQUNGLE9BQU8sTUFBTXpCLHdEQUFNQSxDQUNqQnVCLEtBQ0E7WUFDRSxNQUFNRyxXQUFXLE1BQU03Qix3REFBT0EsQ0FBQ3VCLE9BQU87Z0JBQUVKLE1BQU1HLFFBQVFILElBQUk7Z0JBQUVDLElBQUlFLFFBQVFGLEVBQUU7WUFBQztZQUMzRSxNQUFNVSxXQUFXRCxTQUFTRSxHQUFHLENBQUMsQ0FBQ0M7Z0JBQzdCLE1BQU1DLE9BQU8sR0FBR0QsUUFBUUUsS0FBSyxDQUFDLEVBQUUsRUFBRUYsUUFBUUcsV0FBVyxFQUFFO2dCQUN2RCxNQUFNQyxZQUFZbkMsZ0VBQWdCQSxDQUFDZ0M7Z0JBQ25DLE9BQU87b0JBQ0wsR0FBR0QsT0FBTztvQkFDVkksV0FBV0EsVUFBVUMsVUFBVTtnQkFDakM7WUFDRjtZQUNBLE1BQU1DLFVBQVVwQyxrRUFBa0JBLENBQ2hDNEIsU0FBU0MsR0FBRyxDQUFDLENBQUNDLFVBQVlBLFFBQVFJLFNBQVM7WUFHN0MsT0FBTztnQkFDTGxCLFFBQVFLLFNBQVM7Z0JBQ2pCTSxVQUFVQztnQkFDVk0sV0FBV0U7Z0JBQ1hDLFNBQVNaO2dCQUNUYSxXQUFXekI7WUFDYjtRQUNGLEdBQ0E7WUFDRTBCLE9BQU9yQztZQUNQc0MsWUFBWTdCO1lBQ1o4QixjQUFjO1lBQ2RDLGNBQWN0QixRQUFRc0IsWUFBWTtZQUNsQ0Msc0JBQXNCO1lBQ3RCQyxJQUFJO1FBQ047SUFFSixFQUFFLE9BQU9DLE9BQVk7UUFDbkIsT0FBTztZQUNMN0IsUUFBUUssU0FBUztZQUNqQk0sVUFBVSxFQUFFO1lBQ1pPLFdBQVc7Z0JBQ1RZLE9BQU87Z0JBQ1BDLE9BQU87Z0JBQ1BDLFlBQVk7WUFDZDtZQUNBWCxTQUNFWixlQUNBb0IsT0FBT0ksV0FDUDtZQUNGWCxXQUFXekI7UUFDYjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL25ld3NEYXRhLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE5ld3MgfSBmcm9tIFwiQC9saWIvdHdlbHZlRGF0YVwiO1xuaW1wb3J0IHsgYW5hbHl6ZVNlbnRpbWVudCwgc3VtbWFyaXplU2VudGltZW50IH0gZnJvbSBcIkAvbGliL3NlbnRpbWVudFwiO1xuaW1wb3J0IHsgY2FjaGVkIH0gZnJvbSBcIkAvbGliL3NlcnZlclN0b3JlXCI7XG5cbmV4cG9ydCB0eXBlIE5ld3NQYXlsb2FkID0ge1xuICBzeW1ib2w6IHN0cmluZztcbiAgYXJ0aWNsZXM6IEFycmF5PHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgc291cmNlOiBzdHJpbmc7XG4gICAgcHVibGlzaGVkQXQ6IHN0cmluZztcbiAgICBzZW50aW1lbnQ6IG51bWJlcjtcbiAgICBpbWFnZVVybD86IHN0cmluZztcbiAgICBjb250ZW50Pzogc3RyaW5nO1xuICB9PjtcbiAgc2VudGltZW50OiB7XG4gICAgc2NvcmU6IG51bWJlcjtcbiAgICBsYWJlbDogXCJidWxsaXNoXCIgfCBcImJlYXJpc2hcIiB8IFwibmV1dHJhbFwiO1xuICAgIGNvbmZpZGVuY2U6IG51bWJlcjtcbiAgfTtcbiAgd2FybmluZzogc3RyaW5nIHwgbnVsbDtcbiAgZXhwaXJlc0luOiBudW1iZXI7XG59O1xuXG5jb25zdCBSRUZSRVNIX01TID0gKCgpID0+IHtcbiAgY29uc3QgcmF3ID0gTnVtYmVyKHByb2Nlc3MuZW52Lk5FV1NfUkVGUkVTSF9NUyB8fCA1ICogNjAgKiAxMDAwKTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocmF3KSkgcmV0dXJuIDUgKiA2MCAqIDEwMDA7XG4gIHJldHVybiBNYXRoLm1heCg2MF8wMDAsIHJhdyk7XG59KSgpO1xuXG5jb25zdCBTVEFMRV9NUyA9ICgoKSA9PiB7XG4gIGNvbnN0IHJhdyA9IE51bWJlcihwcm9jZXNzLmVudi5ORVdTX1NUQUxFX01TIHx8IDMwICogNjAgKiAxMDAwKTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocmF3KSkgcmV0dXJuIDMwICogNjAgKiAxMDAwO1xuICByZXR1cm4gTWF0aC5tYXgoUkVGUkVTSF9NUywgcmF3KTtcbn0pKCk7XG5cbmNvbnN0IEVYUElSRVNfSU4gPSBNYXRoLm1heCgzMCwgTWF0aC5mbG9vcihSRUZSRVNIX01TIC8gMTAwMCkpO1xuXG5mdW5jdGlvbiBxdWVyeUtleShzeW1ib2w6IHN0cmluZywgZnJvbT86IHN0cmluZywgdG8/OiBzdHJpbmcpIHtcbiAgcmV0dXJuIGBuZXdzOiR7c3ltYm9sIHx8IFwibWFya2V0XCJ9OiR7ZnJvbSB8fCBcIlwifToke3RvIHx8IFwiXCJ9YDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZE5ld3NQYXlsb2FkKFxuICBzeW1ib2w6IHN0cmluZyxcbiAgb3B0aW9uczogeyBmcm9tPzogc3RyaW5nOyB0bz86IHN0cmluZzsgZm9yY2VSZWZyZXNoPzogYm9vbGVhbiB9ID0ge31cbikge1xuICBjb25zdCB1cHBlciA9IFN0cmluZyhzeW1ib2wgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcbiAgY29uc3Qga2V5ID0gcXVlcnlLZXkodXBwZXIsIG9wdGlvbnMuZnJvbSwgb3B0aW9ucy50byk7XG4gIGNvbnN0IGJhc2VXYXJuaW5nID0gcHJvY2Vzcy5lbnYuTkVXU19BUElfS0VZID8gbnVsbCA6IFwiTkVXU19BUElfS0VZIG5vdCBzZXRcIjtcblxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBjYWNoZWQoXG4gICAgICBrZXksXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFydGljbGVzID0gYXdhaXQgZ2V0TmV3cyh1cHBlciwgeyBmcm9tOiBvcHRpb25zLmZyb20sIHRvOiBvcHRpb25zLnRvIH0pO1xuICAgICAgICBjb25zdCBlbnJpY2hlZCA9IGFydGljbGVzLm1hcCgoYXJ0aWNsZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHRleHQgPSBgJHthcnRpY2xlLnRpdGxlfS4gJHthcnRpY2xlLmRlc2NyaXB0aW9ufWA7XG4gICAgICAgICAgY29uc3Qgc2VudGltZW50ID0gYW5hbHl6ZVNlbnRpbWVudCh0ZXh0KTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYXJ0aWNsZSxcbiAgICAgICAgICAgIHNlbnRpbWVudDogc2VudGltZW50Lm5vcm1hbGl6ZWRcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3VtbWFyeSA9IHN1bW1hcml6ZVNlbnRpbWVudChcbiAgICAgICAgICBlbnJpY2hlZC5tYXAoKGFydGljbGUpID0+IGFydGljbGUuc2VudGltZW50KVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3ltYm9sOiB1cHBlciB8fCBcIm1hcmtldFwiLFxuICAgICAgICAgIGFydGljbGVzOiBlbnJpY2hlZCxcbiAgICAgICAgICBzZW50aW1lbnQ6IHN1bW1hcnksXG4gICAgICAgICAgd2FybmluZzogYmFzZVdhcm5pbmcsXG4gICAgICAgICAgZXhwaXJlc0luOiBFWFBJUkVTX0lOXG4gICAgICAgIH0gc2F0aXNmaWVzIE5ld3NQYXlsb2FkO1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdHRsTXM6IFJFRlJFU0hfTVMsXG4gICAgICAgIHN0YWxlVHRsTXM6IFNUQUxFX01TLFxuICAgICAgICBzdGFsZUlmRXJyb3I6IHRydWUsXG4gICAgICAgIGZvcmNlUmVmcmVzaDogb3B0aW9ucy5mb3JjZVJlZnJlc2gsXG4gICAgICAgIGJhY2tncm91bmRSZXZhbGlkYXRlOiB0cnVlLFxuICAgICAgICBsMjogdHJ1ZVxuICAgICAgfVxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3ltYm9sOiB1cHBlciB8fCBcIm1hcmtldFwiLFxuICAgICAgYXJ0aWNsZXM6IFtdLFxuICAgICAgc2VudGltZW50OiB7XG4gICAgICAgIHNjb3JlOiAwLFxuICAgICAgICBsYWJlbDogXCJuZXV0cmFsXCIsXG4gICAgICAgIGNvbmZpZGVuY2U6IDBcbiAgICAgIH0sXG4gICAgICB3YXJuaW5nOlxuICAgICAgICBiYXNlV2FybmluZyB8fFxuICAgICAgICBlcnJvcj8ubWVzc2FnZSB8fFxuICAgICAgICBcIk5ld3MgZGF0YSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZVwiLFxuICAgICAgZXhwaXJlc0luOiBFWFBJUkVTX0lOXG4gICAgfSBzYXRpc2ZpZXMgTmV3c1BheWxvYWQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXROZXdzIiwiYW5hbHl6ZVNlbnRpbWVudCIsInN1bW1hcml6ZVNlbnRpbWVudCIsImNhY2hlZCIsIlJFRlJFU0hfTVMiLCJyYXciLCJOdW1iZXIiLCJwcm9jZXNzIiwiZW52IiwiTkVXU19SRUZSRVNIX01TIiwiaXNGaW5pdGUiLCJNYXRoIiwibWF4IiwiU1RBTEVfTVMiLCJORVdTX1NUQUxFX01TIiwiRVhQSVJFU19JTiIsImZsb29yIiwicXVlcnlLZXkiLCJzeW1ib2wiLCJmcm9tIiwidG8iLCJnZXRDYWNoZWROZXdzUGF5bG9hZCIsIm9wdGlvbnMiLCJ1cHBlciIsIlN0cmluZyIsInRvVXBwZXJDYXNlIiwia2V5IiwiYmFzZVdhcm5pbmciLCJORVdTX0FQSV9LRVkiLCJhcnRpY2xlcyIsImVucmljaGVkIiwibWFwIiwiYXJ0aWNsZSIsInRleHQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2VudGltZW50Iiwibm9ybWFsaXplZCIsInN1bW1hcnkiLCJ3YXJuaW5nIiwiZXhwaXJlc0luIiwidHRsTXMiLCJzdGFsZVR0bE1zIiwic3RhbGVJZkVycm9yIiwiZm9yY2VSZWZyZXNoIiwiYmFja2dyb3VuZFJldmFsaWRhdGUiLCJsMiIsImVycm9yIiwic2NvcmUiLCJsYWJlbCIsImNvbmZpZGVuY2UiLCJtZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/newsData.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/quotesData.ts":
/*!*******************************!*\
  !*** ./src/lib/quotesData.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCachedQuotesPayload: () => (/* binding */ getCachedQuotesPayload)\n/* harmony export */ });\n/* harmony import */ var _lib_twelveData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/twelveData */ \"(api-node)/./src/lib/twelveData.ts\");\n/* harmony import */ var _lib_serverStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/serverStore */ \"(api-node)/./src/lib/serverStore.ts\");\n\n\nconst REFRESH_MS = (()=>{\n    const raw = Number(process.env.QUOTES_REFRESH_MS || 75000);\n    if (!Number.isFinite(raw)) return 75000;\n    return Math.max(25000, raw);\n})();\nconst STALE_MS = (()=>{\n    const raw = Number(process.env.QUOTES_STALE_MS || 10 * 60 * 1000);\n    if (!Number.isFinite(raw)) return 10 * 60 * 1000;\n    return Math.max(REFRESH_MS, raw);\n})();\nconst EXPIRES_IN = Math.max(20, Math.min(90, Math.floor(REFRESH_MS / 1000)));\nfunction normalizeSymbols(symbols) {\n    return Array.from(new Set(symbols.map((symbol)=>symbol.trim().toUpperCase()).filter(Boolean))).sort();\n}\nfunction placeholderQuotes(symbols) {\n    return symbols.map((symbol)=>({\n            symbol,\n            name: symbol,\n            currency: \"USD\",\n            price: null,\n            change: null,\n            percentChange: null,\n            open: null,\n            high: null,\n            low: null,\n            volume: null,\n            previousClose: null,\n            timestamp: null\n        }));\n}\nasync function getCachedQuotesPayload(symbolsInput, options = {}) {\n    const symbols = normalizeSymbols(symbolsInput);\n    if (!symbols.length) {\n        return {\n            quotes: [],\n            expiresIn: EXPIRES_IN\n        };\n    }\n    const key = `quotes:${symbols.join(\",\")}`;\n    try {\n        const quotes = await (0,_lib_serverStore__WEBPACK_IMPORTED_MODULE_1__.cached)(key, async ()=>{\n            return (0,_lib_twelveData__WEBPACK_IMPORTED_MODULE_0__.getQuotes)(symbols);\n        }, {\n            ttlMs: REFRESH_MS,\n            staleTtlMs: STALE_MS,\n            staleIfError: true,\n            forceRefresh: options.forceRefresh,\n            backgroundRevalidate: true,\n            l2: true\n        });\n        return {\n            quotes,\n            expiresIn: EXPIRES_IN\n        };\n    } catch (error) {\n        return {\n            quotes: placeholderQuotes(symbols),\n            warning: error?.message || \"Failed to load quotes\",\n            stale: true,\n            expiresIn: EXPIRES_IN\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvcXVvdGVzRGF0YS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBeUQ7QUFDZDtBQVMzQyxNQUFNRSxhQUFhLENBQUM7SUFDbEIsTUFBTUMsTUFBTUMsT0FBT0MsUUFBUUMsR0FBRyxDQUFDQyxpQkFBaUIsSUFBSTtJQUNwRCxJQUFJLENBQUNILE9BQU9JLFFBQVEsQ0FBQ0wsTUFBTSxPQUFPO0lBQ2xDLE9BQU9NLEtBQUtDLEdBQUcsQ0FBQyxPQUFRUDtBQUMxQjtBQUVBLE1BQU1RLFdBQVcsQ0FBQztJQUNoQixNQUFNUixNQUFNQyxPQUFPQyxRQUFRQyxHQUFHLENBQUNNLGVBQWUsSUFBSSxLQUFLLEtBQUs7SUFDNUQsSUFBSSxDQUFDUixPQUFPSSxRQUFRLENBQUNMLE1BQU0sT0FBTyxLQUFLLEtBQUs7SUFDNUMsT0FBT00sS0FBS0MsR0FBRyxDQUFDUixZQUFZQztBQUM5QjtBQUVBLE1BQU1VLGFBQWFKLEtBQUtDLEdBQUcsQ0FBQyxJQUFJRCxLQUFLSyxHQUFHLENBQUMsSUFBSUwsS0FBS00sS0FBSyxDQUFDYixhQUFhO0FBRXJFLFNBQVNjLGlCQUFpQkMsT0FBaUI7SUFDekMsT0FBT0MsTUFBTUMsSUFBSSxDQUNmLElBQUlDLElBQUlILFFBQVFJLEdBQUcsQ0FBQyxDQUFDQyxTQUFXQSxPQUFPQyxJQUFJLEdBQUdDLFdBQVcsSUFBSUMsTUFBTSxDQUFDQyxXQUNwRUMsSUFBSTtBQUNSO0FBRUEsU0FBU0Msa0JBQWtCWCxPQUFpQjtJQUMxQyxPQUFPQSxRQUFRSSxHQUFHLENBQUMsQ0FBQ0MsU0FBWTtZQUM5QkE7WUFDQU8sTUFBTVA7WUFDTlEsVUFBVTtZQUNWQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsZUFBZTtZQUNmQyxNQUFNO1lBQ05DLE1BQU07WUFDTkMsS0FBSztZQUNMQyxRQUFRO1lBQ1JDLGVBQWU7WUFDZkMsV0FBVztRQUNiO0FBQ0Y7QUFFTyxlQUFlQyx1QkFDcEJDLFlBQXNCLEVBQ3RCQyxVQUFzQyxDQUFDLENBQUM7SUFFeEMsTUFBTXpCLFVBQVVELGlCQUFpQnlCO0lBQ2pDLElBQUksQ0FBQ3hCLFFBQVEwQixNQUFNLEVBQUU7UUFDbkIsT0FBTztZQUNMQyxRQUFRLEVBQUU7WUFDVkMsV0FBV2hDO1FBQ2I7SUFDRjtJQUVBLE1BQU1pQyxNQUFNLENBQUMsT0FBTyxFQUFFN0IsUUFBUThCLElBQUksQ0FBQyxNQUFNO0lBRXpDLElBQUk7UUFDRixNQUFNSCxTQUFTLE1BQU0zQyx3REFBTUEsQ0FDekI2QyxLQUNBO1lBQ0UsT0FBTzlDLDBEQUFTQSxDQUFDaUI7UUFDbkIsR0FDQTtZQUNFK0IsT0FBTzlDO1lBQ1ArQyxZQUFZdEM7WUFDWnVDLGNBQWM7WUFDZEMsY0FBY1QsUUFBUVMsWUFBWTtZQUNsQ0Msc0JBQXNCO1lBQ3RCQyxJQUFJO1FBQ047UUFHRixPQUFPO1lBQ0xUO1lBQ0FDLFdBQVdoQztRQUNiO0lBQ0YsRUFBRSxPQUFPeUMsT0FBWTtRQUNuQixPQUFPO1lBQ0xWLFFBQVFoQixrQkFBa0JYO1lBQzFCc0MsU0FBU0QsT0FBT0UsV0FBVztZQUMzQkMsT0FBTztZQUNQWixXQUFXaEM7UUFDYjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL3F1b3Rlc0RhdGEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0UXVvdGVzLCB0eXBlIFF1b3RlIH0gZnJvbSBcIkAvbGliL3R3ZWx2ZURhdGFcIjtcbmltcG9ydCB7IGNhY2hlZCB9IGZyb20gXCJAL2xpYi9zZXJ2ZXJTdG9yZVwiO1xuXG50eXBlIFF1b3Rlc1BheWxvYWQgPSB7XG4gIHF1b3RlczogUXVvdGVbXTtcbiAgd2FybmluZz86IHN0cmluZztcbiAgc3RhbGU/OiBib29sZWFuO1xuICBleHBpcmVzSW46IG51bWJlcjtcbn07XG5cbmNvbnN0IFJFRlJFU0hfTVMgPSAoKCkgPT4ge1xuICBjb25zdCByYXcgPSBOdW1iZXIocHJvY2Vzcy5lbnYuUVVPVEVTX1JFRlJFU0hfTVMgfHwgNzVfMDAwKTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUocmF3KSkgcmV0dXJuIDc1XzAwMDtcbiAgcmV0dXJuIE1hdGgubWF4KDI1XzAwMCwgcmF3KTtcbn0pKCk7XG5cbmNvbnN0IFNUQUxFX01TID0gKCgpID0+IHtcbiAgY29uc3QgcmF3ID0gTnVtYmVyKHByb2Nlc3MuZW52LlFVT1RFU19TVEFMRV9NUyB8fCAxMCAqIDYwICogMTAwMCk7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHJhdykpIHJldHVybiAxMCAqIDYwICogMTAwMDtcbiAgcmV0dXJuIE1hdGgubWF4KFJFRlJFU0hfTVMsIHJhdyk7XG59KSgpO1xuXG5jb25zdCBFWFBJUkVTX0lOID0gTWF0aC5tYXgoMjAsIE1hdGgubWluKDkwLCBNYXRoLmZsb29yKFJFRlJFU0hfTVMgLyAxMDAwKSkpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVTeW1ib2xzKHN5bWJvbHM6IHN0cmluZ1tdKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoc3ltYm9scy5tYXAoKHN5bWJvbCkgPT4gc3ltYm9sLnRyaW0oKS50b1VwcGVyQ2FzZSgpKS5maWx0ZXIoQm9vbGVhbikpXG4gICkuc29ydCgpO1xufVxuXG5mdW5jdGlvbiBwbGFjZWhvbGRlclF1b3RlcyhzeW1ib2xzOiBzdHJpbmdbXSk6IFF1b3RlW10ge1xuICByZXR1cm4gc3ltYm9scy5tYXAoKHN5bWJvbCkgPT4gKHtcbiAgICBzeW1ib2wsXG4gICAgbmFtZTogc3ltYm9sLFxuICAgIGN1cnJlbmN5OiBcIlVTRFwiLFxuICAgIHByaWNlOiBudWxsLFxuICAgIGNoYW5nZTogbnVsbCxcbiAgICBwZXJjZW50Q2hhbmdlOiBudWxsLFxuICAgIG9wZW46IG51bGwsXG4gICAgaGlnaDogbnVsbCxcbiAgICBsb3c6IG51bGwsXG4gICAgdm9sdW1lOiBudWxsLFxuICAgIHByZXZpb3VzQ2xvc2U6IG51bGwsXG4gICAgdGltZXN0YW1wOiBudWxsXG4gIH0pKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZFF1b3Rlc1BheWxvYWQoXG4gIHN5bWJvbHNJbnB1dDogc3RyaW5nW10sXG4gIG9wdGlvbnM6IHsgZm9yY2VSZWZyZXNoPzogYm9vbGVhbiB9ID0ge31cbik6IFByb21pc2U8UXVvdGVzUGF5bG9hZD4ge1xuICBjb25zdCBzeW1ib2xzID0gbm9ybWFsaXplU3ltYm9scyhzeW1ib2xzSW5wdXQpO1xuICBpZiAoIXN5bWJvbHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHF1b3RlczogW10sXG4gICAgICBleHBpcmVzSW46IEVYUElSRVNfSU5cbiAgICB9O1xuICB9XG5cbiAgY29uc3Qga2V5ID0gYHF1b3Rlczoke3N5bWJvbHMuam9pbihcIixcIil9YDtcblxuICB0cnkge1xuICAgIGNvbnN0IHF1b3RlcyA9IGF3YWl0IGNhY2hlZChcbiAgICAgIGtleSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGdldFF1b3RlcyhzeW1ib2xzKTtcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHR0bE1zOiBSRUZSRVNIX01TLFxuICAgICAgICBzdGFsZVR0bE1zOiBTVEFMRV9NUyxcbiAgICAgICAgc3RhbGVJZkVycm9yOiB0cnVlLFxuICAgICAgICBmb3JjZVJlZnJlc2g6IG9wdGlvbnMuZm9yY2VSZWZyZXNoLFxuICAgICAgICBiYWNrZ3JvdW5kUmV2YWxpZGF0ZTogdHJ1ZSxcbiAgICAgICAgbDI6IHRydWVcbiAgICAgIH1cbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHF1b3RlcyxcbiAgICAgIGV4cGlyZXNJbjogRVhQSVJFU19JTlxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcXVvdGVzOiBwbGFjZWhvbGRlclF1b3RlcyhzeW1ib2xzKSxcbiAgICAgIHdhcm5pbmc6IGVycm9yPy5tZXNzYWdlIHx8IFwiRmFpbGVkIHRvIGxvYWQgcXVvdGVzXCIsXG4gICAgICBzdGFsZTogdHJ1ZSxcbiAgICAgIGV4cGlyZXNJbjogRVhQSVJFU19JTlxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRRdW90ZXMiLCJjYWNoZWQiLCJSRUZSRVNIX01TIiwicmF3IiwiTnVtYmVyIiwicHJvY2VzcyIsImVudiIsIlFVT1RFU19SRUZSRVNIX01TIiwiaXNGaW5pdGUiLCJNYXRoIiwibWF4IiwiU1RBTEVfTVMiLCJRVU9URVNfU1RBTEVfTVMiLCJFWFBJUkVTX0lOIiwibWluIiwiZmxvb3IiLCJub3JtYWxpemVTeW1ib2xzIiwic3ltYm9scyIsIkFycmF5IiwiZnJvbSIsIlNldCIsIm1hcCIsInN5bWJvbCIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsImZpbHRlciIsIkJvb2xlYW4iLCJzb3J0IiwicGxhY2Vob2xkZXJRdW90ZXMiLCJuYW1lIiwiY3VycmVuY3kiLCJwcmljZSIsImNoYW5nZSIsInBlcmNlbnRDaGFuZ2UiLCJvcGVuIiwiaGlnaCIsImxvdyIsInZvbHVtZSIsInByZXZpb3VzQ2xvc2UiLCJ0aW1lc3RhbXAiLCJnZXRDYWNoZWRRdW90ZXNQYXlsb2FkIiwic3ltYm9sc0lucHV0Iiwib3B0aW9ucyIsImxlbmd0aCIsInF1b3RlcyIsImV4cGlyZXNJbiIsImtleSIsImpvaW4iLCJ0dGxNcyIsInN0YWxlVHRsTXMiLCJzdGFsZUlmRXJyb3IiLCJmb3JjZVJlZnJlc2giLCJiYWNrZ3JvdW5kUmV2YWxpZGF0ZSIsImwyIiwiZXJyb3IiLCJ3YXJuaW5nIiwibWVzc2FnZSIsInN0YWxlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/quotesData.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/resilience.ts":
/*!*******************************!*\
  !*** ./src/lib/resilience.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runWithResilience: () => (/* binding */ runWithResilience)\n/* harmony export */ });\nconst CIRCUITS = new Map();\nfunction sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\nfunction getState(key) {\n    const current = CIRCUITS.get(key);\n    if (current) return current;\n    const next = {\n        failures: 0,\n        openedAt: null\n    };\n    CIRCUITS.set(key, next);\n    return next;\n}\nfunction isAbortError(error) {\n    const name = error?.name;\n    const message = String(error?.message || \"\");\n    return name === \"AbortError\" || /aborted|timeout/i.test(message);\n}\nasync function runAttempt(task, ms) {\n    const controller = new AbortController();\n    const timer = setTimeout(()=>controller.abort(), ms);\n    try {\n        return await task({\n            signal: controller.signal\n        });\n    } finally{\n        clearTimeout(timer);\n    }\n}\nasync function runWithResilience(key, task, options) {\n    const retries = Math.max(0, options.retries ?? 1);\n    const openAfterFailures = Math.max(1, options.openAfterFailures ?? 4);\n    const openWindowMs = Math.max(1000, options.openWindowMs ?? 45000);\n    const now = Date.now();\n    const state = getState(key);\n    if (state.openedAt && now - state.openedAt < openWindowMs) {\n        throw new Error(`Circuit open for ${key}`);\n    }\n    if (state.openedAt && now - state.openedAt >= openWindowMs) {\n        state.openedAt = null;\n        state.failures = 0;\n    }\n    let attempt = 0;\n    while(attempt <= retries){\n        attempt += 1;\n        try {\n            const result = await runAttempt(task, options.timeoutMs);\n            state.failures = 0;\n            state.openedAt = null;\n            return result;\n        } catch (error) {\n            state.failures += 1;\n            if (state.failures >= openAfterFailures) {\n                state.openedAt = Date.now();\n            }\n            const retryable = options.shouldRetry ? options.shouldRetry(error) : !isAbortError(error);\n            if (!retryable || attempt > retries) {\n                throw error;\n            }\n            await sleep(Math.min(600, 120 * 2 ** (attempt - 1)));\n        }\n    }\n    throw new Error(`Unexpected resilience state for ${key}`);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvcmVzaWxpZW5jZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBYUEsTUFBTUEsV0FBVyxJQUFJQztBQUVyQixTQUFTQyxNQUFNQyxFQUFVO0lBQ3ZCLE9BQU8sSUFBSUMsUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTRjtBQUN0RDtBQUVBLFNBQVNJLFNBQVNDLEdBQVc7SUFDM0IsTUFBTUMsVUFBVVQsU0FBU1UsR0FBRyxDQUFDRjtJQUM3QixJQUFJQyxTQUFTLE9BQU9BO0lBQ3BCLE1BQU1FLE9BQXFCO1FBQUVDLFVBQVU7UUFBR0MsVUFBVTtJQUFLO0lBQ3pEYixTQUFTYyxHQUFHLENBQUNOLEtBQUtHO0lBQ2xCLE9BQU9BO0FBQ1Q7QUFFQSxTQUFTSSxhQUFhQyxLQUFjO0lBQ2xDLE1BQU1DLE9BQVFELE9BQWVDO0lBQzdCLE1BQU1DLFVBQVVDLE9BQU8sT0FBZ0JELFdBQVc7SUFDbEQsT0FBT0QsU0FBUyxnQkFBZ0IsbUJBQW1CRyxJQUFJLENBQUNGO0FBQzFEO0FBRUEsZUFBZUcsV0FDYkMsSUFBa0QsRUFDbERuQixFQUFVO0lBRVYsTUFBTW9CLGFBQWEsSUFBSUM7SUFDdkIsTUFBTUMsUUFBUW5CLFdBQVcsSUFBTWlCLFdBQVdHLEtBQUssSUFBSXZCO0lBQ25ELElBQUk7UUFDRixPQUFPLE1BQU1tQixLQUFLO1lBQUVLLFFBQVFKLFdBQVdJLE1BQU07UUFBQztJQUNoRCxTQUFVO1FBQ1JDLGFBQWFIO0lBQ2Y7QUFDRjtBQUVPLGVBQWVJLGtCQUNwQnJCLEdBQVcsRUFDWGMsSUFBa0QsRUFDbERRLE9BQTBCO0lBRTFCLE1BQU1DLFVBQVVDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHSCxRQUFRQyxPQUFPLElBQUk7SUFDL0MsTUFBTUcsb0JBQW9CRixLQUFLQyxHQUFHLENBQUMsR0FBR0gsUUFBUUksaUJBQWlCLElBQUk7SUFDbkUsTUFBTUMsZUFBZUgsS0FBS0MsR0FBRyxDQUFDLE1BQU1ILFFBQVFLLFlBQVksSUFBSTtJQUM1RCxNQUFNQyxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLE1BQU1FLFFBQVEvQixTQUFTQztJQUV2QixJQUFJOEIsTUFBTXpCLFFBQVEsSUFBSXVCLE1BQU1FLE1BQU16QixRQUFRLEdBQUdzQixjQUFjO1FBQ3pELE1BQU0sSUFBSUksTUFBTSxDQUFDLGlCQUFpQixFQUFFL0IsS0FBSztJQUMzQztJQUNBLElBQUk4QixNQUFNekIsUUFBUSxJQUFJdUIsTUFBTUUsTUFBTXpCLFFBQVEsSUFBSXNCLGNBQWM7UUFDMURHLE1BQU16QixRQUFRLEdBQUc7UUFDakJ5QixNQUFNMUIsUUFBUSxHQUFHO0lBQ25CO0lBRUEsSUFBSTRCLFVBQVU7SUFDZCxNQUFPQSxXQUFXVCxRQUFTO1FBQ3pCUyxXQUFXO1FBQ1gsSUFBSTtZQUNGLE1BQU1DLFNBQVMsTUFBTXBCLFdBQVdDLE1BQU1RLFFBQVFZLFNBQVM7WUFDdkRKLE1BQU0xQixRQUFRLEdBQUc7WUFDakIwQixNQUFNekIsUUFBUSxHQUFHO1lBQ2pCLE9BQU80QjtRQUNULEVBQUUsT0FBT3pCLE9BQU87WUFDZHNCLE1BQU0xQixRQUFRLElBQUk7WUFDbEIsSUFBSTBCLE1BQU0xQixRQUFRLElBQUlzQixtQkFBbUI7Z0JBQ3ZDSSxNQUFNekIsUUFBUSxHQUFHd0IsS0FBS0QsR0FBRztZQUMzQjtZQUNBLE1BQU1PLFlBQVliLFFBQVFjLFdBQVcsR0FDakNkLFFBQVFjLFdBQVcsQ0FBQzVCLFNBQ3BCLENBQUNELGFBQWFDO1lBQ2xCLElBQUksQ0FBQzJCLGFBQWFILFVBQVVULFNBQVM7Z0JBQ25DLE1BQU1mO1lBQ1I7WUFDQSxNQUFNZCxNQUFNOEIsS0FBS2EsR0FBRyxDQUFDLEtBQUssTUFBTSxLQUFNTCxDQUFBQSxVQUFVO1FBQ2xEO0lBQ0Y7SUFFQSxNQUFNLElBQUlELE1BQU0sQ0FBQyxnQ0FBZ0MsRUFBRS9CLEtBQUs7QUFDMUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL3Jlc2lsaWVuY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBDaXJjdWl0U3RhdGUgPSB7XG4gIGZhaWx1cmVzOiBudW1iZXI7XG4gIG9wZW5lZEF0OiBudW1iZXIgfCBudWxsO1xufTtcblxudHlwZSBSZXNpbGllbmNlT3B0aW9ucyA9IHtcbiAgdGltZW91dE1zOiBudW1iZXI7XG4gIHJldHJpZXM/OiBudW1iZXI7XG4gIG9wZW5BZnRlckZhaWx1cmVzPzogbnVtYmVyO1xuICBvcGVuV2luZG93TXM/OiBudW1iZXI7XG4gIHNob3VsZFJldHJ5PzogKGVycm9yOiB1bmtub3duKSA9PiBib29sZWFuO1xufTtcblxuY29uc3QgQ0lSQ1VJVFMgPSBuZXcgTWFwPHN0cmluZywgQ2lyY3VpdFN0YXRlPigpO1xuXG5mdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG5mdW5jdGlvbiBnZXRTdGF0ZShrZXk6IHN0cmluZykge1xuICBjb25zdCBjdXJyZW50ID0gQ0lSQ1VJVFMuZ2V0KGtleSk7XG4gIGlmIChjdXJyZW50KSByZXR1cm4gY3VycmVudDtcbiAgY29uc3QgbmV4dDogQ2lyY3VpdFN0YXRlID0geyBmYWlsdXJlczogMCwgb3BlbmVkQXQ6IG51bGwgfTtcbiAgQ0lSQ1VJVFMuc2V0KGtleSwgbmV4dCk7XG4gIHJldHVybiBuZXh0O1xufVxuXG5mdW5jdGlvbiBpc0Fib3J0RXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgY29uc3QgbmFtZSA9IChlcnJvciBhcyBhbnkpPy5uYW1lO1xuICBjb25zdCBtZXNzYWdlID0gU3RyaW5nKChlcnJvciBhcyBhbnkpPy5tZXNzYWdlIHx8IFwiXCIpO1xuICByZXR1cm4gbmFtZSA9PT0gXCJBYm9ydEVycm9yXCIgfHwgL2Fib3J0ZWR8dGltZW91dC9pLnRlc3QobWVzc2FnZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bkF0dGVtcHQ8VD4oXG4gIHRhc2s6IChjdHg6IHsgc2lnbmFsOiBBYm9ydFNpZ25hbCB9KSA9PiBQcm9taXNlPFQ+LFxuICBtczogbnVtYmVyXG4pIHtcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgbXMpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0YXNrKHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5XaXRoUmVzaWxpZW5jZTxUPihcbiAga2V5OiBzdHJpbmcsXG4gIHRhc2s6IChjdHg6IHsgc2lnbmFsOiBBYm9ydFNpZ25hbCB9KSA9PiBQcm9taXNlPFQ+LFxuICBvcHRpb25zOiBSZXNpbGllbmNlT3B0aW9uc1xuKSB7XG4gIGNvbnN0IHJldHJpZXMgPSBNYXRoLm1heCgwLCBvcHRpb25zLnJldHJpZXMgPz8gMSk7XG4gIGNvbnN0IG9wZW5BZnRlckZhaWx1cmVzID0gTWF0aC5tYXgoMSwgb3B0aW9ucy5vcGVuQWZ0ZXJGYWlsdXJlcyA/PyA0KTtcbiAgY29uc3Qgb3BlbldpbmRvd01zID0gTWF0aC5tYXgoMTAwMCwgb3B0aW9ucy5vcGVuV2luZG93TXMgPz8gNDVfMDAwKTtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZShrZXkpO1xuXG4gIGlmIChzdGF0ZS5vcGVuZWRBdCAmJiBub3cgLSBzdGF0ZS5vcGVuZWRBdCA8IG9wZW5XaW5kb3dNcykge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2lyY3VpdCBvcGVuIGZvciAke2tleX1gKTtcbiAgfVxuICBpZiAoc3RhdGUub3BlbmVkQXQgJiYgbm93IC0gc3RhdGUub3BlbmVkQXQgPj0gb3BlbldpbmRvd01zKSB7XG4gICAgc3RhdGUub3BlbmVkQXQgPSBudWxsO1xuICAgIHN0YXRlLmZhaWx1cmVzID0gMDtcbiAgfVxuXG4gIGxldCBhdHRlbXB0ID0gMDtcbiAgd2hpbGUgKGF0dGVtcHQgPD0gcmV0cmllcykge1xuICAgIGF0dGVtcHQgKz0gMTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVuQXR0ZW1wdCh0YXNrLCBvcHRpb25zLnRpbWVvdXRNcyk7XG4gICAgICBzdGF0ZS5mYWlsdXJlcyA9IDA7XG4gICAgICBzdGF0ZS5vcGVuZWRBdCA9IG51bGw7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzdGF0ZS5mYWlsdXJlcyArPSAxO1xuICAgICAgaWYgKHN0YXRlLmZhaWx1cmVzID49IG9wZW5BZnRlckZhaWx1cmVzKSB7XG4gICAgICAgIHN0YXRlLm9wZW5lZEF0ID0gRGF0ZS5ub3coKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJldHJ5YWJsZSA9IG9wdGlvbnMuc2hvdWxkUmV0cnlcbiAgICAgICAgPyBvcHRpb25zLnNob3VsZFJldHJ5KGVycm9yKVxuICAgICAgICA6ICFpc0Fib3J0RXJyb3IoZXJyb3IpO1xuICAgICAgaWYgKCFyZXRyeWFibGUgfHwgYXR0ZW1wdCA+IHJldHJpZXMpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBhd2FpdCBzbGVlcChNYXRoLm1pbig2MDAsIDEyMCAqIDIgKiogKGF0dGVtcHQgLSAxKSkpO1xuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCByZXNpbGllbmNlIHN0YXRlIGZvciAke2tleX1gKTtcbn1cbiJdLCJuYW1lcyI6WyJDSVJDVUlUUyIsIk1hcCIsInNsZWVwIiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJnZXRTdGF0ZSIsImtleSIsImN1cnJlbnQiLCJnZXQiLCJuZXh0IiwiZmFpbHVyZXMiLCJvcGVuZWRBdCIsInNldCIsImlzQWJvcnRFcnJvciIsImVycm9yIiwibmFtZSIsIm1lc3NhZ2UiLCJTdHJpbmciLCJ0ZXN0IiwicnVuQXR0ZW1wdCIsInRhc2siLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZXIiLCJhYm9ydCIsInNpZ25hbCIsImNsZWFyVGltZW91dCIsInJ1bldpdGhSZXNpbGllbmNlIiwib3B0aW9ucyIsInJldHJpZXMiLCJNYXRoIiwibWF4Iiwib3BlbkFmdGVyRmFpbHVyZXMiLCJvcGVuV2luZG93TXMiLCJub3ciLCJEYXRlIiwic3RhdGUiLCJFcnJvciIsImF0dGVtcHQiLCJyZXN1bHQiLCJ0aW1lb3V0TXMiLCJyZXRyeWFibGUiLCJzaG91bGRSZXRyeSIsIm1pbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/resilience.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/sec.ts":
/*!************************!*\
  !*** ./src/lib/sec.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildWhisperSummary: () => (/* binding */ buildWhisperSummary),\n/* harmony export */   getCikForTicker: () => (/* binding */ getCikForTicker),\n/* harmony export */   getRecentFilings: () => (/* binding */ getRecentFilings)\n/* harmony export */ });\n/* harmony import */ var _lib_resilience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/resilience */ \"(api-node)/./src/lib/resilience.ts\");\n\nconst SEC_BASE = \"https://data.sec.gov\";\nconst SEC_TICKER_MAP = \"https://www.sec.gov/files/company_tickers.json\";\nconst SEC_TIMEOUT_MS = 2500;\nconst SEC_CACHE = {};\nconst DAY_MS = 24 * 60 * 60 * 1000;\nfunction getUserAgent() {\n    return process.env.SEC_USER_AGENT || \"AuroraMarkets/1.0 (support@example.com)\";\n}\nasync function fetchSec(url) {\n    const payload = await (0,_lib_resilience__WEBPACK_IMPORTED_MODULE_0__.runWithResilience)(\"sec:fetch\", async ({ signal })=>{\n        const response = await fetch(url, {\n            signal,\n            headers: {\n                \"User-Agent\": getUserAgent(),\n                Accept: \"application/json\"\n            }\n        });\n        if (!response.ok) {\n            throw new Error(`SEC request failed: ${response.status}`);\n        }\n        return response.json();\n    }, {\n        timeoutMs: SEC_TIMEOUT_MS,\n        retries: 1,\n        openAfterFailures: 4,\n        openWindowMs: 60 * 1000\n    });\n    return payload;\n}\nasync function loadTickerMap() {\n    if (SEC_CACHE.mapping && SEC_CACHE.mappingFetchedAt) {\n        if (Date.now() - SEC_CACHE.mappingFetchedAt < DAY_MS) {\n            return SEC_CACHE.mapping;\n        }\n    }\n    const data = await fetchSec(SEC_TICKER_MAP);\n    const mapping = {};\n    Object.values(data).forEach((entry)=>{\n        if (entry.ticker && entry.cik_str) {\n            const cik = String(entry.cik_str).padStart(10, \"0\");\n            mapping[String(entry.ticker).toUpperCase()] = cik;\n        }\n    });\n    SEC_CACHE.mapping = mapping;\n    SEC_CACHE.mappingFetchedAt = Date.now();\n    return mapping;\n}\nasync function getCikForTicker(symbol) {\n    const mapping = await loadTickerMap();\n    return mapping[symbol.toUpperCase()] || null;\n}\nasync function getRecentFilings(symbol) {\n    if (!SEC_CACHE.filings) {\n        SEC_CACHE.filings = {};\n    }\n    const cached = SEC_CACHE.filings[symbol];\n    if (cached && Date.now() - cached.fetchedAt < DAY_MS / 4) {\n        return cached.data;\n    }\n    const cik = await getCikForTicker(symbol);\n    if (!cik) {\n        throw new Error(\"CIK not found for symbol\");\n    }\n    const payload = await fetchSec(`${SEC_BASE}/submissions/CIK${cik}.json`);\n    const recent = payload?.filings?.recent;\n    if (!recent) {\n        return {\n            symbol,\n            cik,\n            filings: []\n        };\n    }\n    const filings = (recent.form || []).map((form, index)=>({\n            form,\n            filingDate: recent.filingDate?.[index],\n            accessionNumber: recent.accessionNumber?.[index],\n            description: recent.primaryDocDescription?.[index]\n        }));\n    const result = {\n        symbol,\n        cik,\n        filings\n    };\n    SEC_CACHE.filings[symbol] = {\n        fetchedAt: Date.now(),\n        data: result\n    };\n    return result;\n}\nfunction buildWhisperSummary(filings) {\n    if (!filings.length) {\n        return {\n            headline: \"No recent public filings\",\n            message: \"Nothing new has hit EDGAR recently. The filing radar looks calm.\"\n        };\n    }\n    const recentFilings = filings.slice(0, 12);\n    const latest = recentFilings[0];\n    const formCounts = {};\n    recentFilings.forEach((filing)=>{\n        const form = filing.form || \"\";\n        formCounts[form] = (formCounts[form] || 0) + 1;\n    });\n    const hasForm4 = formCounts[\"4\"] || formCounts[\"4/A\"];\n    const has10k = formCounts[\"10-K\"] || formCounts[\"10-K/A\"];\n    const has10q = formCounts[\"10-Q\"] || formCounts[\"10-Q/A\"];\n    const has8k = formCounts[\"8-K\"] || formCounts[\"8-K/A\"];\n    let headline = `Latest filing: ${latest.form}`;\n    let message = `Public filing posted on ${latest.filingDate}.`;\n    if (hasForm4) {\n        headline = \"Insider activity spotted\";\n        message = \"Form 4 filings were published recently. Public insider transactions are worth a closer look.\";\n    } else if (has10k) {\n        headline = \"Fresh annual report\";\n        message = \"A 10-K is in the mix. This is the deepest annual snapshot of performance and risk.\";\n    } else if (has10q) {\n        headline = \"Quarterly update filed\";\n        message = \"A 10-Q landed recently. This is the most current view of quarterly momentum.\";\n    } else if (has8k) {\n        headline = \"Event-driven filing\";\n        message = \"An 8-K was filed recently. These often contain material corporate updates.\";\n    }\n    return {\n        headline,\n        message\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUU3RCxJQUFJYyxVQUFVO1FBQ1pQLFdBQVc7UUFDWEMsVUFDRTtJQUNKLE9BQU8sSUFBSU8sUUFBUTtRQUNqQlIsV0FBVztRQUNYQyxVQUNFO0lBQ0osT0FBTyxJQUFJUSxRQUFRO1FBQ2pCVCxXQUFXO1FBQ1hDLFVBQ0U7SUFDSixPQUFPLElBQUlTLE9BQU87UUFDaEJWLFdBQVc7UUFDWEMsVUFDRTtJQUNKO0lBRUEsT0FBTztRQUFFRDtRQUFVQztJQUFRO0FBQzdCIiwic291cmNlcyI6WyIvVXNlcnMvdHV1bGFpL0RvY3VtZW50cy90bXAvc3JjL2xpYi9zZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcnVuV2l0aFJlc2lsaWVuY2UgfSBmcm9tIFwiQC9saWIvcmVzaWxpZW5jZVwiO1xuXG5jb25zdCBTRUNfQkFTRSA9IFwiaHR0cHM6Ly9kYXRhLnNlYy5nb3ZcIjtcbmNvbnN0IFNFQ19USUNLRVJfTUFQID0gXCJodHRwczovL3d3dy5zZWMuZ292L2ZpbGVzL2NvbXBhbnlfdGlja2Vycy5qc29uXCI7XG5jb25zdCBTRUNfVElNRU9VVF9NUyA9IDI1MDA7XG5cbmNvbnN0IFNFQ19DQUNIRToge1xuICBtYXBwaW5nPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgbWFwcGluZ0ZldGNoZWRBdD86IG51bWJlcjtcbiAgZmlsaW5ncz86IFJlY29yZDxzdHJpbmcsIHsgZmV0Y2hlZEF0OiBudW1iZXI7IGRhdGE6IGFueSB9Pjtcbn0gPSB7fTtcblxuY29uc3QgREFZX01TID0gMjQgKiA2MCAqIDYwICogMTAwMDtcblxuZnVuY3Rpb24gZ2V0VXNlckFnZW50KCkge1xuICByZXR1cm4gKFxuICAgIHByb2Nlc3MuZW52LlNFQ19VU0VSX0FHRU5UIHx8XG4gICAgXCJBdXJvcmFNYXJrZXRzLzEuMCAoc3VwcG9ydEBleGFtcGxlLmNvbSlcIlxuICApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFNlYyh1cmw6IHN0cmluZykge1xuICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcnVuV2l0aFJlc2lsaWVuY2UoXG4gICAgXCJzZWM6ZmV0Y2hcIixcbiAgICBhc3luYyAoeyBzaWduYWwgfSkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJVc2VyLUFnZW50XCI6IGdldFVzZXJBZ2VudCgpLFxuICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU0VDIHJlcXVlc3QgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICB7XG4gICAgICB0aW1lb3V0TXM6IFNFQ19USU1FT1VUX01TLFxuICAgICAgcmV0cmllczogMSxcbiAgICAgIG9wZW5BZnRlckZhaWx1cmVzOiA0LFxuICAgICAgb3BlbldpbmRvd01zOiA2MCAqIDEwMDBcbiAgICB9XG4gICk7XG5cbiAgcmV0dXJuIHBheWxvYWQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRUaWNrZXJNYXAoKSB7XG4gIGlmIChTRUNfQ0FDSEUubWFwcGluZyAmJiBTRUNfQ0FDSEUubWFwcGluZ0ZldGNoZWRBdCkge1xuICAgIGlmIChEYXRlLm5vdygpIC0gU0VDX0NBQ0hFLm1hcHBpbmdGZXRjaGVkQXQgPCBEQVlfTVMpIHtcbiAgICAgIHJldHVybiBTRUNfQ0FDSEUubWFwcGluZztcbiAgICB9XG4gIH1cblxuICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hTZWMoU0VDX1RJQ0tFUl9NQVApO1xuICBjb25zdCBtYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIE9iamVjdC52YWx1ZXM8YW55PihkYXRhKS5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgIGlmIChlbnRyeS50aWNrZXIgJiYgZW50cnkuY2lrX3N0cikge1xuICAgICAgY29uc3QgY2lrID0gU3RyaW5nKGVudHJ5LmNpa19zdHIpLnBhZFN0YXJ0KDEwLCBcIjBcIik7XG4gICAgICBtYXBwaW5nW1N0cmluZyhlbnRyeS50aWNrZXIpLnRvVXBwZXJDYXNlKCldID0gY2lrO1xuICAgIH1cbiAgfSk7XG5cbiAgU0VDX0NBQ0hFLm1hcHBpbmcgPSBtYXBwaW5nO1xuICBTRUNfQ0FDSEUubWFwcGluZ0ZldGNoZWRBdCA9IERhdGUubm93KCk7XG4gIHJldHVybiBtYXBwaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2lrRm9yVGlja2VyKHN5bWJvbDogc3RyaW5nKSB7XG4gIGNvbnN0IG1hcHBpbmcgPSBhd2FpdCBsb2FkVGlja2VyTWFwKCk7XG4gIHJldHVybiBtYXBwaW5nW3N5bWJvbC50b1VwcGVyQ2FzZSgpXSB8fCBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVjZW50RmlsaW5ncyhzeW1ib2w6IHN0cmluZykge1xuICBpZiAoIVNFQ19DQUNIRS5maWxpbmdzKSB7XG4gICAgU0VDX0NBQ0hFLmZpbGluZ3MgPSB7fTtcbiAgfVxuICBjb25zdCBjYWNoZWQgPSBTRUNfQ0FDSEUuZmlsaW5nc1tzeW1ib2xdO1xuICBpZiAoY2FjaGVkICYmIERhdGUubm93KCkgLSBjYWNoZWQuZmV0Y2hlZEF0IDwgREFZX01TIC8gNCkge1xuICAgIHJldHVybiBjYWNoZWQuZGF0YTtcbiAgfVxuXG4gIGNvbnN0IGNpayA9IGF3YWl0IGdldENpa0ZvclRpY2tlcihzeW1ib2wpO1xuICBpZiAoIWNpaykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNJSyBub3QgZm91bmQgZm9yIHN5bWJvbFwiKTtcbiAgfVxuXG4gIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBmZXRjaFNlYyhgJHtTRUNfQkFTRX0vc3VibWlzc2lvbnMvQ0lLJHtjaWt9Lmpzb25gKTtcbiAgY29uc3QgcmVjZW50ID0gcGF5bG9hZD8uZmlsaW5ncz8ucmVjZW50O1xuICBpZiAoIXJlY2VudCkge1xuICAgIHJldHVybiB7IHN5bWJvbCwgY2lrLCBmaWxpbmdzOiBbXSBhcyBhbnlbXSB9O1xuICB9XG5cbiAgY29uc3QgZmlsaW5ncyA9IChyZWNlbnQuZm9ybSB8fCBbXSkubWFwKChmb3JtOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+ICh7XG4gICAgZm9ybSxcbiAgICBmaWxpbmdEYXRlOiByZWNlbnQuZmlsaW5nRGF0ZT8uW2luZGV4XSxcbiAgICBhY2Nlc3Npb25OdW1iZXI6IHJlY2VudC5hY2Nlc3Npb25OdW1iZXI/LltpbmRleF0sXG4gICAgZGVzY3JpcHRpb246IHJlY2VudC5wcmltYXJ5RG9jRGVzY3JpcHRpb24/LltpbmRleF1cbiAgfSkpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHsgc3ltYm9sLCBjaWssIGZpbGluZ3MgfTtcbiAgU0VDX0NBQ0hFLmZpbGluZ3Nbc3ltYm9sXSA9IHsgZmV0Y2hlZEF0OiBEYXRlLm5vdygpLCBkYXRhOiByZXN1bHQgfTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkV2hpc3BlclN1bW1hcnkoZmlsaW5nczogYW55W10pIHtcbiAgaWYgKCFmaWxpbmdzLmxlbmd0aCkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkbGluZTogXCJObyByZWNlbnQgcHVibGljIGZpbGluZ3NcIixcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgIFwiTm90aGluZyBuZXcgaGFzIGhpdCBFREdBUiByZWNlbnRseS4gVGhlIGZpbGluZyByYWRhciBsb29rcyBjYWxtLlwiXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHJlY2VudEZpbGluZ3MgPSBmaWxpbmdzLnNsaWNlKDAsIDEyKTtcbiAgY29uc3QgbGF0ZXN0ID0gcmVjZW50RmlsaW5nc1swXTtcbiAgY29uc3QgZm9ybUNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICByZWNlbnRGaWxpbmdzLmZvckVhY2goKGZpbGluZykgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBmaWxpbmcuZm9ybSB8fCBcIlwiO1xuICAgIGZvcm1Db3VudHNbZm9ybV0gPSAoZm9ybUNvdW50c1tmb3JtXSB8fCAwKSArIDE7XG4gIH0pO1xuXG4gIGNvbnN0IGhhc0Zvcm00ID0gZm9ybUNvdW50c1tcIjRcIl0gfHwgZm9ybUNvdW50c1tcIjQvQVwiXTtcbiAgY29uc3QgaGFzMTBrID0gZm9ybUNvdW50c1tcIjEwLUtcIl0gfHwgZm9ybUNvdW50c1tcIjEwLUsvQVwiXTtcbiAgY29uc3QgaGFzMTBxID0gZm9ybUNvdW50c1tcIjEwLVFcIl0gfHwgZm9ybUNvdW50c1tcIjEwLVEvQVwiXTtcbiAgY29uc3QgaGFzOGsgPSBmb3JtQ291bnRzW1wiOC1LXCJdIHx8IGZvcm1Db3VudHNbXCI4LUsvQVwiXTtcblxuICBsZXQgaGVhZGxpbmUgPSBgTGF0ZXN0IGZpbGluZzogJHtsYXRlc3QuZm9ybX1gO1xuICBsZXQgbWVzc2FnZSA9IGBQdWJsaWMgZmlsaW5nIHBvc3RlZCBvbiAke2xhdGVzdC5maWxpbmdEYXRlfS5gO1xuXG4gIGlmIChoYXNGb3JtNCkge1xuICAgIGhlYWRsaW5lID0gXCJJbnNpZGVyIGFjdGl2aXR5IHNwb3R0ZWRcIjtcbiAgICBtZXNzYWdlID1cbiAgICAgIFwiRm9ybSA0IGZpbGluZ3Mgd2VyZSBwdWJsaXNoZWQgcmVjZW50bHkuIFB1YmxpYyBpbnNpZGVyIHRyYW5zYWN0aW9ucyBhcmUgd29ydGggYSBjbG9zZXIgbG9vay5cIjtcbiAgfSBlbHNlIGlmIChoYXMxMGspIHtcbiAgICBoZWFkbGluZSA9IFwiRnJlc2ggYW5udWFsIHJlcG9ydFwiO1xuICAgIG1lc3NhZ2UgPVxuICAgICAgXCJBIDEwLUsgaXMgaW4gdGhlIG1peC4gVGhpcyBpcyB0aGUgZGVlcGVzdCBhbm51YWwgc25hcHNob3Qgb2YgcGVyZm9ybWFuY2UgYW5kIHJpc2suXCI7XG4gIH0gZWxzZSBpZiAoaGFzMTBxKSB7XG4gICAgaGVhZGxpbmUgPSBcIlF1YXJ0ZXJseSB1cGRhdGUgZmlsZWRcIjtcbiAgICBtZXNzYWdlID1cbiAgICAgIFwiQSAxMC1RIGxhbmRlZCByZWNlbnRseS4gVGhpcyBpcyB0aGUgbW9zdCBjdXJyZW50IHZpZXcgb2YgcXVhcnRlcmx5IG1vbWVudHVtLlwiO1xuICB9IGVsc2UgaWYgKGhhczhrKSB7XG4gICAgaGVhZGxpbmUgPSBcIkV2ZW50LWRyaXZlbiBmaWxpbmdcIjtcbiAgICBtZXNzYWdlID1cbiAgICAgIFwiQW4gOC1LIHdhcyBmaWxlZCByZWNlbnRseS4gVGhlc2Ugb2Z0ZW4gY29udGFpbiBtYXRlcmlhbCBjb3Jwb3JhdGUgdXBkYXRlcy5cIjtcbiAgfVxuXG4gIHJldHVybiB7IGhlYWRsaW5lLCBtZXNzYWdlIH07XG59XG4iXSwibmFtZXMiOlsicnVuV2l0aFJlc2lsaWVuY2UiLCJTRUNfQkFTRSIsIlNFQ19USUNLRVJfTUFQIiwiU0VDX1RJTUVPVVRfTVMiLCJTRUNfQ0FDSEUiLCJEQVlfTVMiLCJnZXRVc2VyQWdlbnQiLCJwcm9jZXNzIiwiZW52IiwiU0VDX1VTRVJfQUdFTlQiLCJmZXRjaFNlYyIsInVybCIsInBheWxvYWQiLCJzaWduYWwiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIkFjY2VwdCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwidGltZW91dE1zIiwicmV0cmllcyIsIm9wZW5BZnRlckZhaWx1cmVzIiwib3BlbldpbmRvd01zIiwibG9hZFRpY2tlck1hcCIsIm1hcHBpbmciLCJtYXBwaW5nRmV0Y2hlZEF0IiwiRGF0ZSIsIm5vdyIsImRhdGEiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJ0aWNrZXIiLCJjaWtfc3RyIiwiY2lrIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJ0b1VwcGVyQ2FzZSIsImdldENpa0ZvclRpY2tlciIsInN5bWJvbCIsImdldFJlY2VudEZpbGluZ3MiLCJmaWxpbmdzIiwiY2FjaGVkIiwiZmV0Y2hlZEF0IiwicmVjZW50IiwiZm9ybSIsIm1hcCIsImluZGV4IiwiZmlsaW5nRGF0ZSIsImFjY2Vzc2lvbk51bWJlciIsImRlc2NyaXB0aW9uIiwicHJpbWFyeURvY0Rlc2NyaXB0aW9uIiwicmVzdWx0IiwiYnVpbGRXaGlzcGVyU3VtbWFyeSIsImxlbmd0aCIsImhlYWRsaW5lIiwibWVzc2FnZSIsInJlY2VudEZpbGluZ3MiLCJzbGljZSIsImxhdGVzdCIsImZvcm1Db3VudHMiLCJmaWxpbmciLCJoYXNGb3JtNCIsImhhczEwayIsImhhczEwcSIsImhhczhrIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/sec.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/sentiment.ts":
/*!******************************!*\
  !*** ./src/lib/sentiment.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeSentiment: () => (/* binding */ analyzeSentiment),\n/* harmony export */   summarizeSentiment: () => (/* binding */ summarizeSentiment)\n/* harmony export */ });\n/* harmony import */ var sentiment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sentiment */ \"sentiment\");\n/* harmony import */ var sentiment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sentiment__WEBPACK_IMPORTED_MODULE_0__);\n\nconst analyzer = new (sentiment__WEBPACK_IMPORTED_MODULE_0___default())();\nfunction clamp(value, min, max) {\n    return Math.min(max, Math.max(min, value));\n}\nfunction analyzeSentiment(text) {\n    const result = analyzer.analyze(text || \"\");\n    const normalized = clamp(result.score / 10, -1, 1);\n    return {\n        score: result.score,\n        normalized\n    };\n}\nfunction summarizeSentiment(values) {\n    if (!values.length) {\n        return {\n            score: 0,\n            label: \"neutral\",\n            confidence: 0\n        };\n    }\n    const score = values.reduce((acc, value)=>acc + value, 0) / values.length;\n    const label = score > 0.2 ? \"bullish\" : score < -0.2 ? \"bearish\" : \"neutral\";\n    const confidence = clamp(Math.abs(score) / 0.6, 0, 1);\n    return {\n        score,\n        label,\n        confidence\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvc2VudGltZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0M7QUFFbEMsTUFBTUMsV0FBVyxJQUFJRCxrREFBU0E7QUFhOUIsU0FBU0UsTUFBTUMsS0FBYSxFQUFFQyxHQUFXLEVBQUVDLEdBQVc7SUFDcEQsT0FBT0MsS0FBS0YsR0FBRyxDQUFDQyxLQUFLQyxLQUFLRCxHQUFHLENBQUNELEtBQUtEO0FBQ3JDO0FBRU8sU0FBU0ksaUJBQWlCQyxJQUFZO0lBQzNDLE1BQU1DLFNBQVNSLFNBQVNTLE9BQU8sQ0FBQ0YsUUFBUTtJQUN4QyxNQUFNRyxhQUFhVCxNQUFNTyxPQUFPRyxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUc7SUFDaEQsT0FBTztRQUFFQSxPQUFPSCxPQUFPRyxLQUFLO1FBQUVEO0lBQVc7QUFDM0M7QUFFTyxTQUFTRSxtQkFBbUJDLE1BQWdCO0lBQ2pELElBQUksQ0FBQ0EsT0FBT0MsTUFBTSxFQUFFO1FBQ2xCLE9BQU87WUFBRUgsT0FBTztZQUFHSSxPQUFPO1lBQVdDLFlBQVk7UUFBRTtJQUNyRDtJQUVBLE1BQU1MLFFBQVFFLE9BQU9JLE1BQU0sQ0FBQyxDQUFDQyxLQUFLaEIsUUFBVWdCLE1BQU1oQixPQUFPLEtBQUtXLE9BQU9DLE1BQU07SUFDM0UsTUFBTUMsUUFBUUosUUFBUSxNQUFNLFlBQVlBLFFBQVEsQ0FBQyxNQUFNLFlBQVk7SUFDbkUsTUFBTUssYUFBYWYsTUFBTUksS0FBS2MsR0FBRyxDQUFDUixTQUFTLEtBQUssR0FBRztJQUVuRCxPQUFPO1FBQUVBO1FBQU9JO1FBQU9DO0lBQVc7QUFDcEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL3NlbnRpbWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VudGltZW50IGZyb20gXCJzZW50aW1lbnRcIjtcblxuY29uc3QgYW5hbHl6ZXIgPSBuZXcgU2VudGltZW50KCk7XG5cbmV4cG9ydCB0eXBlIFNlbnRpbWVudFJlc3VsdCA9IHtcbiAgc2NvcmU6IG51bWJlcjtcbiAgbm9ybWFsaXplZDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgU2VudGltZW50U3VtbWFyeSA9IHtcbiAgc2NvcmU6IG51bWJlcjtcbiAgbGFiZWw6IFwiYnVsbGlzaFwiIHwgXCJiZWFyaXNoXCIgfCBcIm5ldXRyYWxcIjtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xufTtcblxuZnVuY3Rpb24gY2xhbXAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gIHJldHVybiBNYXRoLm1pbihtYXgsIE1hdGgubWF4KG1pbiwgdmFsdWUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFuYWx5emVTZW50aW1lbnQodGV4dDogc3RyaW5nKTogU2VudGltZW50UmVzdWx0IHtcbiAgY29uc3QgcmVzdWx0ID0gYW5hbHl6ZXIuYW5hbHl6ZSh0ZXh0IHx8IFwiXCIpO1xuICBjb25zdCBub3JtYWxpemVkID0gY2xhbXAocmVzdWx0LnNjb3JlIC8gMTAsIC0xLCAxKTtcbiAgcmV0dXJuIHsgc2NvcmU6IHJlc3VsdC5zY29yZSwgbm9ybWFsaXplZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VtbWFyaXplU2VudGltZW50KHZhbHVlczogbnVtYmVyW10pOiBTZW50aW1lbnRTdW1tYXJ5IHtcbiAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgc2NvcmU6IDAsIGxhYmVsOiBcIm5ldXRyYWxcIiwgY29uZmlkZW5jZTogMCB9O1xuICB9XG5cbiAgY29uc3Qgc2NvcmUgPSB2YWx1ZXMucmVkdWNlKChhY2MsIHZhbHVlKSA9PiBhY2MgKyB2YWx1ZSwgMCkgLyB2YWx1ZXMubGVuZ3RoO1xuICBjb25zdCBsYWJlbCA9IHNjb3JlID4gMC4yID8gXCJidWxsaXNoXCIgOiBzY29yZSA8IC0wLjIgPyBcImJlYXJpc2hcIiA6IFwibmV1dHJhbFwiO1xuICBjb25zdCBjb25maWRlbmNlID0gY2xhbXAoTWF0aC5hYnMoc2NvcmUpIC8gMC42LCAwLCAxKTtcblxuICByZXR1cm4geyBzY29yZSwgbGFiZWwsIGNvbmZpZGVuY2UgfTtcbn1cbiJdLCJuYW1lcyI6WyJTZW50aW1lbnQiLCJhbmFseXplciIsImNsYW1wIiwidmFsdWUiLCJtaW4iLCJtYXgiLCJNYXRoIiwiYW5hbHl6ZVNlbnRpbWVudCIsInRleHQiLCJyZXN1bHQiLCJhbmFseXplIiwibm9ybWFsaXplZCIsInNjb3JlIiwic3VtbWFyaXplU2VudGltZW50IiwidmFsdWVzIiwibGVuZ3RoIiwibGFiZWwiLCJjb25maWRlbmNlIiwicmVkdWNlIiwiYWNjIiwiYWJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/sentiment.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/serverStore.ts":
/*!********************************!*\
  !*** ./src/lib/serverStore.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cached: () => (/* binding */ cached),\n/* harmony export */   getFresh: () => (/* binding */ getFresh),\n/* harmony export */   getStale: () => (/* binding */ getStale),\n/* harmony export */   isRefreshing: () => (/* binding */ isRefreshing),\n/* harmony export */   setValue: () => (/* binding */ setValue)\n/* harmony export */ });\n/* harmony import */ var _lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/cache/l2Redis */ \"(api-node)/./src/lib/cache/l2Redis.ts\");\n/* harmony import */ var _lib_telemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/telemetry */ \"(api-node)/./src/lib/telemetry.ts\");\n\n\nconst MAX_ENTRIES = 1200;\nconst globalStore = globalThis.__STOCK_PULSE_SERVER_STORE__ || {\n    cache: new Map(),\n    inFlight: new Map()\n};\nglobalThis.__STOCK_PULSE_SERVER_STORE__ = globalStore;\nfunction now() {\n    return Date.now();\n}\nfunction prune() {\n    while(globalStore.cache.size > MAX_ENTRIES){\n        const first = globalStore.cache.keys().next().value;\n        if (!first) break;\n        globalStore.cache.delete(first);\n    }\n}\nfunction getFresh(key) {\n    const cached = globalStore.cache.get(key);\n    if (!cached) return null;\n    if (now() > cached.expiresAt) return null;\n    (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.l1.hit\");\n    return cached.value;\n}\nfunction getStale(key, staleTtlMs = Number.POSITIVE_INFINITY) {\n    const cached = globalStore.cache.get(key);\n    if (!cached) return null;\n    if (now() - cached.updatedAt > staleTtlMs) return null;\n    (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.l1.stale_hit\");\n    return cached.value;\n}\nfunction setValue(key, value, ttlMs) {\n    const entry = {\n        value,\n        updatedAt: now(),\n        expiresAt: now() + Math.max(0, ttlMs)\n    };\n    globalStore.cache.set(key, entry);\n    prune();\n    (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.l1.write\");\n    void (0,_lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__.writeL2Cache)(key, entry, ttlMs);\n}\nasync function cached(key, fetcher, options) {\n    const fresh = !options.forceRefresh ? getFresh(key) : null;\n    if (fresh !== null) return fresh;\n    const stale = getStale(key, options.staleTtlMs);\n    if (!fresh && options.l2 !== false) {\n        const l2 = await (0,_lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__.readL2Cache)(key);\n        if (l2 && now() <= l2.expiresAt) {\n            globalStore.cache.set(key, l2);\n            (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.l2.hit\");\n            return l2.value;\n        }\n        if (l2 && !stale && options.staleTtlMs && now() - l2.updatedAt <= options.staleTtlMs) {\n            globalStore.cache.set(key, l2);\n            (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.l2.stale_hit\");\n        }\n    }\n    if (stale !== null && options.backgroundRevalidate) {\n        if (!globalStore.inFlight.has(key)) {\n            const bgTask = (async ()=>{\n                const lockKey = `refresh:${key}`;\n                const locked = options.l2 === false ? true : await (0,_lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__.acquireL2Lock)(lockKey);\n                if (!locked) return stale;\n                return fetcher().then((value)=>{\n                    setValue(key, value, options.ttlMs);\n                    return value;\n                }).catch(()=>stale).finally(()=>{\n                    globalStore.inFlight.delete(key);\n                    if (options.l2 !== false) {\n                        void (0,_lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__.releaseL2Lock)(lockKey);\n                    }\n                });\n            })();\n            globalStore.inFlight.set(key, bgTask);\n            (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.revalidate.background\");\n        }\n        return stale;\n    }\n    if (globalStore.inFlight.has(key)) {\n        (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.inflight.hit\");\n        return globalStore.inFlight.get(key);\n    }\n    (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.miss\");\n    const task = (async ()=>{\n        const lockKey = `fetch:${key}`;\n        const locked = options.l2 === false ? true : await (0,_lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__.acquireL2Lock)(lockKey);\n        if (!locked && stale !== null) {\n            (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.lock.contended_return_stale\");\n            return stale;\n        }\n        return fetcher().then((value)=>{\n            setValue(key, value, options.ttlMs);\n            return value;\n        }).catch((error)=>{\n            if (options.staleIfError !== false && stale !== null) {\n                return stale;\n            }\n            throw error;\n        }).finally(()=>{\n            globalStore.inFlight.delete(key);\n            if (options.l2 !== false) {\n                void (0,_lib_cache_l2Redis__WEBPACK_IMPORTED_MODULE_0__.releaseL2Lock)(lockKey);\n            }\n        });\n    })();\n    globalStore.inFlight.set(key, task);\n    return task;\n}\nfunction isRefreshing(key) {\n    return globalStore.inFlight.has(key);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUsTUFBTTtnQkFDcEQsT0FBT0E7WUFDVDtZQUNBLE1BQU1XO1FBQ1IsR0FDQ0YsT0FBTyxDQUFDO1lBQ1A1QyxZQUFZSyxRQUFRLENBQUNTLE1BQU0sQ0FBQ0U7WUFDNUIsSUFBSWdCLFFBQVFJLEVBQUUsS0FBSyxPQUFPO2dCQUN4QixLQUFLeEMsaUVBQWFBLENBQUM0QztZQUNyQjtRQUNGO0lBQ0Y7SUFFQXhDLFlBQVlLLFFBQVEsQ0FBQ3lCLEdBQUcsQ0FBQ2QsS0FBSzZCO0lBQzlCLE9BQU9BO0FBQ1Q7QUFFTyxTQUFTRyxhQUFhaEMsR0FBVztJQUN0QyxPQUFPaEIsWUFBWUssUUFBUSxDQUFDaUMsR0FBRyxDQUFDdEI7QUFDbEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy90dXVsYWkvRG9jdW1lbnRzL3RtcC9zcmMvbGliL3NlcnZlclN0b3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGFjcXVpcmVMMkxvY2ssXG4gIHJlYWRMMkNhY2hlLFxuICByZWxlYXNlTDJMb2NrLFxuICB3cml0ZUwyQ2FjaGVcbn0gZnJvbSBcIkAvbGliL2NhY2hlL2wyUmVkaXNcIjtcbmltcG9ydCB7IGluY3JlbWVudENvdW50ZXIgfSBmcm9tIFwiQC9saWIvdGVsZW1ldHJ5XCI7XG5cbnR5cGUgQ2FjaGVFbnRyeTxUPiA9IHtcbiAgdmFsdWU6IFQ7XG4gIHVwZGF0ZWRBdDogbnVtYmVyO1xuICBleHBpcmVzQXQ6IG51bWJlcjtcbn07XG5cbnR5cGUgQ2FjaGVkT3B0aW9ucyA9IHtcbiAgdHRsTXM6IG51bWJlcjtcbiAgc3RhbGVUdGxNcz86IG51bWJlcjtcbiAgZm9yY2VSZWZyZXNoPzogYm9vbGVhbjtcbiAgc3RhbGVJZkVycm9yPzogYm9vbGVhbjtcbiAgYmFja2dyb3VuZFJldmFsaWRhdGU/OiBib29sZWFuO1xuICBsMj86IGJvb2xlYW47XG59O1xuXG50eXBlIFNlcnZlclN0b3JlID0ge1xuICBjYWNoZTogTWFwPHN0cmluZywgQ2FjaGVFbnRyeTxhbnk+PjtcbiAgaW5GbGlnaHQ6IE1hcDxzdHJpbmcsIFByb21pc2U8YW55Pj47XG59O1xuXG5jb25zdCBNQVhfRU5UUklFUyA9IDEyMDA7XG5cbmNvbnN0IGdsb2JhbFN0b3JlID1cbiAgKGdsb2JhbFRoaXMgYXMgYW55KS5fX1NUT0NLX1BVTFNFX1NFUlZFUl9TVE9SRV9fIHx8XG4gICh7XG4gICAgY2FjaGU6IG5ldyBNYXA8c3RyaW5nLCBDYWNoZUVudHJ5PGFueT4+KCksXG4gICAgaW5GbGlnaHQ6IG5ldyBNYXA8c3RyaW5nLCBQcm9taXNlPGFueT4+KClcbiAgfSBzYXRpc2ZpZXMgU2VydmVyU3RvcmUpO1xuXG4oZ2xvYmFsVGhpcyBhcyBhbnkpLl9fU1RPQ0tfUFVMU0VfU0VSVkVSX1NUT1JFX18gPSBnbG9iYWxTdG9yZTtcblxuZnVuY3Rpb24gbm93KCkge1xuICByZXR1cm4gRGF0ZS5ub3coKTtcbn1cblxuZnVuY3Rpb24gcHJ1bmUoKSB7XG4gIHdoaWxlIChnbG9iYWxTdG9yZS5jYWNoZS5zaXplID4gTUFYX0VOVFJJRVMpIHtcbiAgICBjb25zdCBmaXJzdCA9IGdsb2JhbFN0b3JlLmNhY2hlLmtleXMoKS5uZXh0KCkudmFsdWU7XG4gICAgaWYgKCFmaXJzdCkgYnJlYWs7XG4gICAgZ2xvYmFsU3RvcmUuY2FjaGUuZGVsZXRlKGZpcnN0KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJlc2g8VD4oa2V5OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gIGNvbnN0IGNhY2hlZCA9IGdsb2JhbFN0b3JlLmNhY2hlLmdldChrZXkpO1xuICBpZiAoIWNhY2hlZCkgcmV0dXJuIG51bGw7XG4gIGlmIChub3coKSA+IGNhY2hlZC5leHBpcmVzQXQpIHJldHVybiBudWxsO1xuICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUubDEuaGl0XCIpO1xuICByZXR1cm4gY2FjaGVkLnZhbHVlIGFzIFQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGFsZTxUPihrZXk6IHN0cmluZywgc3RhbGVUdGxNcyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk6IFQgfCBudWxsIHtcbiAgY29uc3QgY2FjaGVkID0gZ2xvYmFsU3RvcmUuY2FjaGUuZ2V0KGtleSk7XG4gIGlmICghY2FjaGVkKSByZXR1cm4gbnVsbDtcbiAgaWYgKG5vdygpIC0gY2FjaGVkLnVwZGF0ZWRBdCA+IHN0YWxlVHRsTXMpIHJldHVybiBudWxsO1xuICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUubDEuc3RhbGVfaGl0XCIpO1xuICByZXR1cm4gY2FjaGVkLnZhbHVlIGFzIFQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRWYWx1ZTxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQsIHR0bE1zOiBudW1iZXIpIHtcbiAgY29uc3QgZW50cnkgPSB7XG4gICAgdmFsdWUsXG4gICAgdXBkYXRlZEF0OiBub3coKSxcbiAgICBleHBpcmVzQXQ6IG5vdygpICsgTWF0aC5tYXgoMCwgdHRsTXMpXG4gIH07XG4gIGdsb2JhbFN0b3JlLmNhY2hlLnNldChrZXksIGVudHJ5KTtcbiAgcHJ1bmUoKTtcbiAgaW5jcmVtZW50Q291bnRlcihcImNhY2hlLmwxLndyaXRlXCIpO1xuICB2b2lkIHdyaXRlTDJDYWNoZShrZXksIGVudHJ5LCB0dGxNcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWNoZWQ8VD4oXG4gIGtleTogc3RyaW5nLFxuICBmZXRjaGVyOiAoKSA9PiBQcm9taXNlPFQ+LFxuICBvcHRpb25zOiBDYWNoZWRPcHRpb25zXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgZnJlc2ggPSAhb3B0aW9ucy5mb3JjZVJlZnJlc2ggPyBnZXRGcmVzaDxUPihrZXkpIDogbnVsbDtcbiAgaWYgKGZyZXNoICE9PSBudWxsKSByZXR1cm4gZnJlc2g7XG5cbiAgY29uc3Qgc3RhbGUgPSBnZXRTdGFsZTxUPihrZXksIG9wdGlvbnMuc3RhbGVUdGxNcyk7XG4gIGlmICghZnJlc2ggJiYgb3B0aW9ucy5sMiAhPT0gZmFsc2UpIHtcbiAgICBjb25zdCBsMiA9IGF3YWl0IHJlYWRMMkNhY2hlPFQ+KGtleSk7XG4gICAgaWYgKGwyICYmIG5vdygpIDw9IGwyLmV4cGlyZXNBdCkge1xuICAgICAgZ2xvYmFsU3RvcmUuY2FjaGUuc2V0KGtleSwgbDIpO1xuICAgICAgaW5jcmVtZW50Q291bnRlcihcImNhY2hlLmwyLmhpdFwiKTtcbiAgICAgIHJldHVybiBsMi52YWx1ZTtcbiAgICB9XG4gICAgaWYgKGwyICYmICFzdGFsZSAmJiBvcHRpb25zLnN0YWxlVHRsTXMgJiYgbm93KCkgLSBsMi51cGRhdGVkQXQgPD0gb3B0aW9ucy5zdGFsZVR0bE1zKSB7XG4gICAgICBnbG9iYWxTdG9yZS5jYWNoZS5zZXQoa2V5LCBsMik7XG4gICAgICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUubDIuc3RhbGVfaGl0XCIpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGFsZSAhPT0gbnVsbCAmJiBvcHRpb25zLmJhY2tncm91bmRSZXZhbGlkYXRlKSB7XG4gICAgaWYgKCFnbG9iYWxTdG9yZS5pbkZsaWdodC5oYXMoa2V5KSkge1xuICAgICAgY29uc3QgYmdUYXNrID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbG9ja0tleSA9IGByZWZyZXNoOiR7a2V5fWA7XG4gICAgICAgIGNvbnN0IGxvY2tlZCA9IG9wdGlvbnMubDIgPT09IGZhbHNlID8gdHJ1ZSA6IGF3YWl0IGFjcXVpcmVMMkxvY2sobG9ja0tleSk7XG4gICAgICAgIGlmICghbG9ja2VkKSByZXR1cm4gc3RhbGU7XG4gICAgICAgIHJldHVybiBmZXRjaGVyKClcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgICAgc2V0VmFsdWUoa2V5LCB2YWx1ZSwgb3B0aW9ucy50dGxNcyk7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4gc3RhbGUpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBnbG9iYWxTdG9yZS5pbkZsaWdodC5kZWxldGUoa2V5KTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5sMiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZvaWQgcmVsZWFzZUwyTG9jayhsb2NrS2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSkoKTtcbiAgICAgIGdsb2JhbFN0b3JlLmluRmxpZ2h0LnNldChrZXksIGJnVGFzayk7XG4gICAgICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUucmV2YWxpZGF0ZS5iYWNrZ3JvdW5kXCIpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhbGU7XG4gIH1cblxuICBpZiAoZ2xvYmFsU3RvcmUuaW5GbGlnaHQuaGFzKGtleSkpIHtcbiAgICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUuaW5mbGlnaHQuaGl0XCIpO1xuICAgIHJldHVybiBnbG9iYWxTdG9yZS5pbkZsaWdodC5nZXQoa2V5KSBhcyBQcm9taXNlPFQ+O1xuICB9XG5cbiAgaW5jcmVtZW50Q291bnRlcihcImNhY2hlLm1pc3NcIik7XG4gIGNvbnN0IHRhc2sgPSAoYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGxvY2tLZXkgPSBgZmV0Y2g6JHtrZXl9YDtcbiAgICBjb25zdCBsb2NrZWQgPSBvcHRpb25zLmwyID09PSBmYWxzZSA/IHRydWUgOiBhd2FpdCBhY3F1aXJlTDJMb2NrKGxvY2tLZXkpO1xuICAgIGlmICghbG9ja2VkICYmIHN0YWxlICE9PSBudWxsKSB7XG4gICAgICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUubG9jay5jb250ZW5kZWRfcmV0dXJuX3N0YWxlXCIpO1xuICAgICAgcmV0dXJuIHN0YWxlO1xuICAgIH1cbiAgICByZXR1cm4gZmV0Y2hlcigpXG4gICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICBzZXRWYWx1ZShrZXksIHZhbHVlLCBvcHRpb25zLnR0bE1zKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgIGlmIChvcHRpb25zLnN0YWxlSWZFcnJvciAhPT0gZmFsc2UgJiYgc3RhbGUgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0YWxlO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBnbG9iYWxTdG9yZS5pbkZsaWdodC5kZWxldGUoa2V5KTtcbiAgICAgIGlmIChvcHRpb25zLmwyICE9PSBmYWxzZSkge1xuICAgICAgICB2b2lkIHJlbGVhc2VMMkxvY2sobG9ja0tleSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKCk7XG5cbiAgZ2xvYmFsU3RvcmUuaW5GbGlnaHQuc2V0KGtleSwgdGFzayk7XG4gIHJldHVybiB0YXNrO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWZyZXNoaW5nKGtleTogc3RyaW5nKSB7XG4gIHJldHVybiBnbG9iYWxTdG9yZS5pbkZsaWdodC5oYXMoa2V5KTtcbn1cbiJdLCJuYW1lcyI6WyJhY3F1aXJlTDJMb2NrIiwicmVhZEwyQ2FjaGUiLCJyZWxlYXNlTDJMb2NrIiwid3JpdGVMMkNhY2hlIiwiaW5jcmVtZW50Q291bnRlciIsIk1BWF9FTlRSSUVTIiwiZ2xvYmFsU3RvcmUiLCJnbG9iYWxUaGlzIiwiX19TVE9DS19QVUxTRV9TRVJWRVJfU1RPUkVfXyIsImNhY2hlIiwiTWFwIiwiaW5GbGlnaHQiLCJub3ciLCJEYXRlIiwicHJ1bmUiLCJzaXplIiwiZmlyc3QiLCJrZXlzIiwibmV4dCIsInZhbHVlIiwiZGVsZXRlIiwiZ2V0RnJlc2giLCJrZXkiLCJjYWNoZWQiLCJnZXQiLCJleHBpcmVzQXQiLCJnZXRTdGFsZSIsInN0YWxlVHRsTXMiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsInVwZGF0ZWRBdCIsInNldFZhbHVlIiwidHRsTXMiLCJlbnRyeSIsIk1hdGgiLCJtYXgiLCJzZXQiLCJmZXRjaGVyIiwib3B0aW9ucyIsImZyZXNoIiwiZm9yY2VSZWZyZXNoIiwic3RhbGUiLCJsMiIsImJhY2tncm91bmRSZXZhbGlkYXRlIiwiaGFzIiwiYmdUYXNrIiwibG9ja0tleSIsImxvY2tlZCIsInRoZW4iLCJjYXRjaCIsImZpbmFsbHkiLCJ0YXNrIiwiZXJyb3IiLCJzdGFsZUlmRXJyb3IiLCJpc1JlZnJlc2hpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/serverStore.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/telemetry.ts":
/*!******************************!*\
  !*** ./src/lib/telemetry.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTelemetrySnapshot: () => (/* binding */ getTelemetrySnapshot),\n/* harmony export */   incrementCounter: () => (/* binding */ incrementCounter),\n/* harmony export */   recordDuration: () => (/* binding */ recordDuration),\n/* harmony export */   startTimer: () => (/* binding */ startTimer)\n/* harmony export */ });\nconst globalTelemetry = globalThis.__STOCK_PULSE_TELEMETRY__ || {\n    counters: {},\n    durations: {}\n};\nglobalThis.__STOCK_PULSE_TELEMETRY__ = globalTelemetry;\nfunction incrementCounter(name, by = 1) {\n    globalTelemetry.counters[name] = (globalTelemetry.counters[name] || 0) + by;\n}\nfunction recordDuration(name, ms) {\n    if (!Number.isFinite(ms) || ms < 0) return;\n    const current = globalTelemetry.durations[name] || {\n        count: 0,\n        sumMs: 0,\n        minMs: Number.POSITIVE_INFINITY,\n        maxMs: 0\n    };\n    current.count += 1;\n    current.sumMs += ms;\n    current.minMs = Math.min(current.minMs, ms);\n    current.maxMs = Math.max(current.maxMs, ms);\n    globalTelemetry.durations[name] = current;\n}\nfunction startTimer(name) {\n    const startedAt = Date.now();\n    return ()=>{\n        recordDuration(name, Date.now() - startedAt);\n    };\n}\nfunction getTelemetrySnapshot() {\n    const durations = Object.fromEntries(Object.entries(globalTelemetry.durations).map(([key, value])=>[\n            key,\n            {\n                ...value,\n                avgMs: value.count > 0 ? value.sumMs / value.count : 0\n            }\n        ]));\n    return {\n        counters: {\n            ...globalTelemetry.counters\n        },\n        durations\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvdGVsZW1ldHJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFjQSxNQUFNQSxrQkFDSixXQUFvQkUseUJBQXlCLElBQzVDO0lBQ0NDLFVBQVUsQ0FBQztJQUNYQyxXQUFXLENBQUM7QUFDZDtBQUVESCxXQUFtQkMseUJBQXlCLEdBQUdGO0FBRXpDLFNBQVNLLGlCQUFpQkMsSUFBWSxFQUFFQyxLQUFLLENBQUM7SUFDbkRQLGdCQUFnQkcsUUFBUSxDQUFDRyxLQUFLLEdBQUcsQ0FBQ04sZ0JBQWdCRyxRQUFRLENBQUNHLEtBQUssSUFBSSxLQUFLQztBQUMzRTtBQUVPLFNBQVNDLGVBQWVGLElBQVksRUFBRUcsRUFBVTtJQUNyRCxJQUFJLENBQUNDLE9BQU9DLFFBQVEsQ0FBQ0YsT0FBT0EsS0FBSyxHQUFHO0lBQ3BDLE1BQU1HLFVBQVVaLGdCQUFnQkksU0FBUyxDQUFDRSxLQUFLLElBQUk7UUFDakRPLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPTCxPQUFPTSxpQkFBaUI7UUFDL0JDLE9BQU87SUFDVDtJQUNBTCxRQUFRQyxLQUFLLElBQUk7SUFDakJELFFBQVFFLEtBQUssSUFBSUw7SUFDakJHLFFBQVFHLEtBQUssR0FBR0csS0FBS0MsR0FBRyxDQUFDUCxRQUFRRyxLQUFLLEVBQUVOO0lBQ3hDRyxRQUFRSyxLQUFLLEdBQUdDLEtBQUtFLEdBQUcsQ0FBQ1IsUUFBUUssS0FBSyxFQUFFUjtJQUN4Q1QsZ0JBQWdCSSxTQUFTLENBQUNFLEtBQUssR0FBR007QUFDcEM7QUFFTyxTQUFTUyxXQUFXZixJQUFZO0lBQ3JDLE1BQU1nQixZQUFZQyxLQUFLQyxHQUFHO0lBQzFCLE9BQU87UUFDTGhCLGVBQWVGLE1BQU1pQixLQUFLQyxHQUFHLEtBQUtGO0lBQ3BDO0FBQ0Y7QUFFTyxTQUFTRztJQUNkLE1BQU1yQixZQUFZc0IsT0FBT0MsV0FBVyxDQUNsQ0QsT0FBT0UsT0FBTyxDQUFDNUIsZ0JBQWdCSSxTQUFTLEVBQWlCeUIsR0FBRyxDQUMxRCxDQUFDLENBQUNDLEtBQUtDLE1BQU0sR0FBSztZQUNoQkQ7WUFDQTtnQkFDRSxHQUFHQyxLQUFLO2dCQUNSQyxPQUFPRCxNQUFNbEIsS0FBSyxHQUFHLElBQUlrQixNQUFNakIsS0FBSyxHQUFHaUIsTUFBTWxCLEtBQUssR0FBRztZQUN2RDtTQUNEO0lBSUwsT0FBTztRQUNMVixVQUFVO1lBQUUsR0FBR0gsZ0JBQWdCRyxRQUFRO1FBQUM7UUFDeENDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3R1dWxhaS9Eb2N1bWVudHMvdG1wL3NyYy9saWIvdGVsZW1ldHJ5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgQ291bnRlck1hcCA9IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG50eXBlIER1cmF0aW9uU3RhdCA9IHtcbiAgY291bnQ6IG51bWJlcjtcbiAgc3VtTXM6IG51bWJlcjtcbiAgbWluTXM6IG51bWJlcjtcbiAgbWF4TXM6IG51bWJlcjtcbn07XG50eXBlIER1cmF0aW9uTWFwID0gUmVjb3JkPHN0cmluZywgRHVyYXRpb25TdGF0PjtcblxudHlwZSBUZWxlbWV0cnlTdGF0ZSA9IHtcbiAgY291bnRlcnM6IENvdW50ZXJNYXA7XG4gIGR1cmF0aW9uczogRHVyYXRpb25NYXA7XG59O1xuXG5jb25zdCBnbG9iYWxUZWxlbWV0cnkgPVxuICAoZ2xvYmFsVGhpcyBhcyBhbnkpLl9fU1RPQ0tfUFVMU0VfVEVMRU1FVFJZX18gfHxcbiAgKHtcbiAgICBjb3VudGVyczoge30sXG4gICAgZHVyYXRpb25zOiB7fVxuICB9IHNhdGlzZmllcyBUZWxlbWV0cnlTdGF0ZSk7XG5cbihnbG9iYWxUaGlzIGFzIGFueSkuX19TVE9DS19QVUxTRV9URUxFTUVUUllfXyA9IGdsb2JhbFRlbGVtZXRyeTtcblxuZXhwb3J0IGZ1bmN0aW9uIGluY3JlbWVudENvdW50ZXIobmFtZTogc3RyaW5nLCBieSA9IDEpIHtcbiAgZ2xvYmFsVGVsZW1ldHJ5LmNvdW50ZXJzW25hbWVdID0gKGdsb2JhbFRlbGVtZXRyeS5jb3VudGVyc1tuYW1lXSB8fCAwKSArIGJ5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVjb3JkRHVyYXRpb24obmFtZTogc3RyaW5nLCBtczogbnVtYmVyKSB7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKG1zKSB8fCBtcyA8IDApIHJldHVybjtcbiAgY29uc3QgY3VycmVudCA9IGdsb2JhbFRlbGVtZXRyeS5kdXJhdGlvbnNbbmFtZV0gfHwge1xuICAgIGNvdW50OiAwLFxuICAgIHN1bU1zOiAwLFxuICAgIG1pbk1zOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgbWF4TXM6IDBcbiAgfTtcbiAgY3VycmVudC5jb3VudCArPSAxO1xuICBjdXJyZW50LnN1bU1zICs9IG1zO1xuICBjdXJyZW50Lm1pbk1zID0gTWF0aC5taW4oY3VycmVudC5taW5NcywgbXMpO1xuICBjdXJyZW50Lm1heE1zID0gTWF0aC5tYXgoY3VycmVudC5tYXhNcywgbXMpO1xuICBnbG9iYWxUZWxlbWV0cnkuZHVyYXRpb25zW25hbWVdID0gY3VycmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0VGltZXIobmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHN0YXJ0ZWRBdCA9IERhdGUubm93KCk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVjb3JkRHVyYXRpb24obmFtZSwgRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZWxlbWV0cnlTbmFwc2hvdCgpIHtcbiAgY29uc3QgZHVyYXRpb25zID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKGdsb2JhbFRlbGVtZXRyeS5kdXJhdGlvbnMgYXMgRHVyYXRpb25NYXApLm1hcChcbiAgICAgIChba2V5LCB2YWx1ZV0pID0+IFtcbiAgICAgICAga2V5LFxuICAgICAgICB7XG4gICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgYXZnTXM6IHZhbHVlLmNvdW50ID4gMCA/IHZhbHVlLnN1bU1zIC8gdmFsdWUuY291bnQgOiAwXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICApXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb3VudGVyczogeyAuLi5nbG9iYWxUZWxlbWV0cnkuY291bnRlcnMgfSxcbiAgICBkdXJhdGlvbnNcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJnbG9iYWxUZWxlbWV0cnkiLCJnbG9iYWxUaGlzIiwiX19TVE9DS19QVUxTRV9URUxFTUVUUllfXyIsImNvdW50ZXJzIiwiZHVyYXRpb25zIiwiaW5jcmVtZW50Q291bnRlciIsIm5hbWUiLCJieSIsInJlY29yZER1cmF0aW9uIiwibXMiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImN1cnJlbnQiLCJjb3VudCIsInN1bU1zIiwibWluTXMiLCJQT1NJVElWRV9JTkZJTklUWSIsIm1heE1zIiwiTWF0aCIsIm1pbiIsIm1heCIsInN0YXJ0VGltZXIiLCJzdGFydGVkQXQiLCJEYXRlIiwibm93IiwiZ2V0VGVsZW1ldHJ5U25hcHNob3QiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJtYXAiLCJrZXkiLCJ2YWx1ZSIsImF2Z01zIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/telemetry.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/tickerData.ts":
/*!*******************************!*\
  !*** ./src/lib/tickerData.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTickerIndex: () => (/* binding */ getTickerIndex),\n/* harmony export */   getTickerSearchPayload: () => (/* binding */ getTickerSearchPayload),\n/* harmony export */   warmTickerSearchCache: () => (/* binding */ warmTickerSearchCache)\n/* harmony export */ });\n/* harmony import */ var _lib_tickers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/tickers */ \"(api-node)/./src/lib/tickers.ts\");\n/* harmony import */ var _lib_resilience__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/resilience */ \"(api-node)/./src/lib/resilience.ts\");\n/* harmony import */ var _lib_serverStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/serverStore */ \"(api-node)/./src/lib/serverStore.ts\");\n/* harmony import */ var _lib_telemetry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/telemetry */ \"(api-node)/./src/lib/telemetry.ts\");\n\n\n\n\nconst SEC_TICKERS_URL = \"https://www.sec.gov/files/company_tickers.json\";\nconst QUERY_CACHE_SECONDS = 12 * 60 * 60;\nconst QUERY_CACHE_MS = QUERY_CACHE_SECONDS * 1000;\nconst INDEX_CACHE_MS = 24 * 60 * 60 * 1000;\nconst INDEX_STALE_MS = 7 * 24 * 60 * 60 * 1000;\nconst MIN_QUERY_LENGTH = 3;\nconst MAX_INDEX_ITEMS = 12000;\nconst NETWORK_TIMEOUT_MS = 2400;\nfunction getUserAgent() {\n    return process.env.SEC_USER_AGENT || \"StockPulse/1.0 support@stockpulse.app\";\n}\nfunction normalizeTicker(item) {\n    const symbol = String(item.symbol || \"\").trim().toUpperCase();\n    if (!symbol) return null;\n    return {\n        symbol,\n        name: String(item.name || symbol).trim() || symbol,\n        exchange: String(item.exchange || \"US\").trim() || \"US\",\n        country: String(item.country || \"US\").trim() || \"US\",\n        type: String(item.type || \"Common Stock\").trim() || \"Common Stock\",\n        currency: item.currency ? String(item.currency) : undefined\n    };\n}\nfunction mergeUnique(items, limit) {\n    const seen = new Set();\n    const merged = [];\n    for (const item of items){\n        const normalized = normalizeTicker(item);\n        if (!normalized) continue;\n        if (seen.has(normalized.symbol)) continue;\n        seen.add(normalized.symbol);\n        merged.push(normalized);\n        if (merged.length >= limit) break;\n    }\n    return merged;\n}\nfunction matchScore(item, query) {\n    const symbol = item.symbol.toUpperCase();\n    const name = item.name.toUpperCase();\n    if (symbol === query) return 140;\n    if (symbol.startsWith(query)) return 120;\n    if (name.startsWith(query)) return 95;\n    if (symbol.includes(query)) return 70;\n    if (name.includes(query)) return 40;\n    return 0;\n}\nfunction searchTickers(items, query, limit) {\n    const ranked = items.map((item)=>({\n            item,\n            score: matchScore(item, query)\n        })).filter((item)=>item.score > 0).sort((a, b)=>{\n        if (b.score !== a.score) return b.score - a.score;\n        if (a.item.symbol.length !== b.item.symbol.length) {\n            return a.item.symbol.length - b.item.symbol.length;\n        }\n        return a.item.symbol.localeCompare(b.item.symbol);\n    }).slice(0, limit * 2).map((entry)=>entry.item);\n    return mergeUnique(ranked, limit);\n}\nfunction fallbackTickers(query, limit) {\n    const defaults = _lib_tickers__WEBPACK_IMPORTED_MODULE_0__.POPULAR_TICKERS.map((symbol)=>({\n            symbol,\n            name: symbol,\n            exchange: \"US\",\n            country: \"US\",\n            type: \"Common Stock\"\n        }));\n    return searchTickers(defaults, query, limit);\n}\nasync function fetchSecTickerIndex() {\n    (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_3__.incrementCounter)(\"tickers.index.fetch\");\n    const payload = await (0,_lib_resilience__WEBPACK_IMPORTED_MODULE_1__.runWithResilience)(\"tickers:index:sec\", async ({ signal })=>{\n        const response = await fetch(SEC_TICKERS_URL, {\n            signal,\n            headers: {\n                \"User-Agent\": getUserAgent(),\n                Accept: \"application/json\"\n            }\n        });\n        if (!response.ok) {\n            throw new Error(`SEC index request failed: ${response.status}`);\n        }\n        return response.json();\n    }, {\n        timeoutMs: NETWORK_TIMEOUT_MS,\n        retries: 1,\n        openAfterFailures: 4,\n        openWindowMs: 60 * 1000\n    });\n    const mapped = Object.values(payload || {}).map((item)=>normalizeTicker({\n            symbol: item?.ticker,\n            name: item?.title,\n            exchange: \"US\",\n            country: \"US\",\n            type: \"Common Stock\"\n        })).filter((item)=>Boolean(item)).slice(0, MAX_INDEX_ITEMS);\n    return mergeUnique([\n        ...mapped,\n        ..._lib_tickers__WEBPACK_IMPORTED_MODULE_0__.POPULAR_TICKERS.map((symbol)=>({\n                symbol,\n                name: symbol,\n                exchange: \"US\",\n                country: \"US\",\n                type: \"Common Stock\"\n            }))\n    ], MAX_INDEX_ITEMS);\n}\nasync function getTickerIndex(forceRefresh = false) {\n    return (0,_lib_serverStore__WEBPACK_IMPORTED_MODULE_2__.cached)(\"tickers:index:v1\", fetchSecTickerIndex, {\n        ttlMs: INDEX_CACHE_MS,\n        staleTtlMs: INDEX_STALE_MS,\n        staleIfError: true,\n        forceRefresh,\n        backgroundRevalidate: true,\n        l2: true\n    });\n}\nasync function getTickerSearchPayload(query, limit = 12, options = {}) {\n    const q = String(query || \"\").trim().toUpperCase();\n    const safeLimit = Number.isFinite(limit) ? Math.max(1, Math.min(40, Number(limit))) : 12;\n    if (!q || q.length < MIN_QUERY_LENGTH) {\n        return {\n            tickers: [],\n            expiresIn: QUERY_CACHE_SECONDS\n        };\n    }\n    return (0,_lib_serverStore__WEBPACK_IMPORTED_MODULE_2__.cached)(`tickers:query:v1:${q}:${safeLimit}`, async ()=>{\n        const fallback = fallbackTickers(q, safeLimit);\n        try {\n            const index = await getTickerIndex(options.forceRefresh);\n            const fromIndex = searchTickers(index, q, safeLimit);\n            const merged = mergeUnique([\n                ...fromIndex,\n                ...fallback\n            ], safeLimit);\n            return {\n                tickers: merged.length ? merged : fallback,\n                expiresIn: QUERY_CACHE_SECONDS\n            };\n        } catch  {\n            return {\n                tickers: fallback,\n                expiresIn: QUERY_CACHE_SECONDS\n            };\n        }\n    }, {\n        ttlMs: QUERY_CACHE_MS,\n        staleTtlMs: 2 * QUERY_CACHE_MS,\n        staleIfError: true,\n        forceRefresh: options.forceRefresh,\n        backgroundRevalidate: true,\n        l2: true\n    });\n}\nasync function warmTickerSearchCache(symbols) {\n    const seeds = Array.from(new Set(symbols.map((symbol)=>String(symbol || \"\").trim().toUpperCase()).filter(Boolean).flatMap((symbol)=>[\n            symbol.slice(0, 3),\n            symbol.slice(0, 4),\n            symbol\n        ]).filter((query)=>query.length >= MIN_QUERY_LENGTH))).slice(0, 24);\n    await getTickerIndex(false).catch(()=>[]);\n    await Promise.allSettled(seeds.map((query)=>getTickerSearchPayload(query, 12)));\n    return {\n        queries: seeds.length\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvdGlja2VyRGF0YS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWdEO0FBQ0s7QUFDVjtBQUNRO0FBZ0JuRCxNQUFNSSxrQkFBa0I7QUFDeEIsTUFBTUMsc0JBQXNCLEtBQUssS0FBSztBQUN0QyxNQUFNQyxpQkFBaUJELHNCQUFzQjtBQUM3QyxNQUFNRSxpQkFBaUIsS0FBSyxLQUFLLEtBQUs7QUFDdEMsTUFBTUMsaUJBQWlCLElBQUksS0FBSyxLQUFLLEtBQUs7QUFDMUMsTUFBTUMsbUJBQW1CO0FBQ3pCLE1BQU1DLGtCQUFrQjtBQUN4QixNQUFNQyxxQkFBcUI7QUFFM0IsU0FBU0M7SUFDUCxPQUFPQyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSTtBQUN2QztBQUVBLFNBQVNDLGdCQUFnQkMsSUFBeUI7SUFDaEQsTUFBTUMsU0FBU0MsT0FBT0YsS0FBS0MsTUFBTSxJQUFJLElBQUlFLElBQUksR0FBR0MsV0FBVztJQUMzRCxJQUFJLENBQUNILFFBQVEsT0FBTztJQUVwQixPQUFPO1FBQ0xBO1FBQ0FJLE1BQU1ILE9BQU9GLEtBQUtLLElBQUksSUFBSUosUUFBUUUsSUFBSSxNQUFNRjtRQUM1Q0ssVUFBVUosT0FBT0YsS0FBS00sUUFBUSxJQUFJLE1BQU1ILElBQUksTUFBTTtRQUNsREksU0FBU0wsT0FBT0YsS0FBS08sT0FBTyxJQUFJLE1BQU1KLElBQUksTUFBTTtRQUNoREssTUFBTU4sT0FBT0YsS0FBS1EsSUFBSSxJQUFJLGdCQUFnQkwsSUFBSSxNQUFNO1FBQ3BETSxVQUFVVCxLQUFLUyxRQUFRLEdBQUdQLE9BQU9GLEtBQUtTLFFBQVEsSUFBSUM7SUFDcEQ7QUFDRjtBQUVBLFNBQVNDLFlBQVlDLEtBQW1CLEVBQUVDLEtBQWE7SUFDckQsTUFBTUMsT0FBTyxJQUFJQztJQUNqQixNQUFNQyxTQUF1QixFQUFFO0lBRS9CLEtBQUssTUFBTWhCLFFBQVFZLE1BQU87UUFDeEIsTUFBTUssYUFBYWxCLGdCQUFnQkM7UUFDbkMsSUFBSSxDQUFDaUIsWUFBWTtRQUNqQixJQUFJSCxLQUFLSSxHQUFHLENBQUNELFdBQVdoQixNQUFNLEdBQUc7UUFDakNhLEtBQUtLLEdBQUcsQ0FBQ0YsV0FBV2hCLE1BQU07UUFDMUJlLE9BQU9JLElBQUksQ0FBQ0g7UUFDWixJQUFJRCxPQUFPSyxNQUFNLElBQUlSLE9BQU87SUFDOUI7SUFFQSxPQUFPRztBQUNUO0FBRUEsU0FBU00sV0FBV3RCLElBQWdCLEVBQUV1QixLQUFhO0lBQ2pELE1BQU10QixTQUFTRCxLQUFLQyxNQUFNLENBQUNHLFdBQVc7SUFDdEMsTUFBTUMsT0FBT0wsS0FBS0ssSUFBSSxDQUFDRCxXQUFXO0lBQ2xDLElBQUlILFdBQVdzQixPQUFPLE9BQU87SUFDN0IsSUFBSXRCLE9BQU91QixVQUFVLENBQUNELFFBQVEsT0FBTztJQUNyQyxJQUFJbEIsS0FBS21CLFVBQVUsQ0FBQ0QsUUFBUSxPQUFPO0lBQ25DLElBQUl0QixPQUFPd0IsUUFBUSxDQUFDRixRQUFRLE9BQU87SUFDbkMsSUFBSWxCLEtBQUtvQixRQUFRLENBQUNGLFFBQVEsT0FBTztJQUNqQyxPQUFPO0FBQ1Q7QUFFQSxTQUFTRyxjQUFjZCxLQUFtQixFQUFFVyxLQUFhLEVBQUVWLEtBQWE7SUFDdEUsTUFBTWMsU0FBU2YsTUFDWmdCLEdBQUcsQ0FBQyxDQUFDNUIsT0FBVTtZQUFFQTtZQUFNNkIsT0FBT1AsV0FBV3RCLE1BQU11QjtRQUFPLElBQ3RETyxNQUFNLENBQUMsQ0FBQzlCLE9BQVNBLEtBQUs2QixLQUFLLEdBQUcsR0FDOUJFLElBQUksQ0FBQyxDQUFDQyxHQUFHQztRQUNSLElBQUlBLEVBQUVKLEtBQUssS0FBS0csRUFBRUgsS0FBSyxFQUFFLE9BQU9JLEVBQUVKLEtBQUssR0FBR0csRUFBRUgsS0FBSztRQUNqRCxJQUFJRyxFQUFFaEMsSUFBSSxDQUFDQyxNQUFNLENBQUNvQixNQUFNLEtBQUtZLEVBQUVqQyxJQUFJLENBQUNDLE1BQU0sQ0FBQ29CLE1BQU0sRUFBRTtZQUNqRCxPQUFPVyxFQUFFaEMsSUFBSSxDQUFDQyxNQUFNLENBQUNvQixNQUFNLEdBQUdZLEVBQUVqQyxJQUFJLENBQUNDLE1BQU0sQ0FBQ29CLE1BQU07UUFDcEQ7UUFDQSxPQUFPVyxFQUFFaEMsSUFBSSxDQUFDQyxNQUFNLENBQUNpQyxhQUFhLENBQUNELEVBQUVqQyxJQUFJLENBQUNDLE1BQU07SUFDbEQsR0FDQ2tDLEtBQUssQ0FBQyxHQUFHdEIsUUFBUSxHQUNqQmUsR0FBRyxDQUFDLENBQUNRLFFBQVVBLE1BQU1wQyxJQUFJO0lBRTVCLE9BQU9XLFlBQVlnQixRQUFRZDtBQUM3QjtBQUVBLFNBQVN3QixnQkFBZ0JkLEtBQWEsRUFBRVYsS0FBYTtJQUNuRCxNQUFNeUIsV0FBV3ZELHlEQUFlQSxDQUFDNkMsR0FBRyxDQUFDLENBQUMzQixTQUFZO1lBQ2hEQTtZQUNBSSxNQUFNSjtZQUNOSyxVQUFVO1lBQ1ZDLFNBQVM7WUFDVEMsTUFBTTtRQUNSO0lBQ0EsT0FBT2tCLGNBQWNZLFVBQVVmLE9BQU9WO0FBQ3hDO0FBRUEsZUFBZTBCO0lBQ2JyRCxnRUFBZ0JBLENBQUM7SUFFakIsTUFBTXNELFVBQVUsTUFBTXhELGtFQUFpQkEsQ0FDckMscUJBQ0EsT0FBTyxFQUFFeUQsTUFBTSxFQUFFO1FBQ2YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNeEQsaUJBQWlCO1lBQzVDc0Q7WUFDQUcsU0FBUztnQkFDUCxjQUFjakQ7Z0JBQ2RrRCxRQUFRO1lBQ1Y7UUFDRjtRQUNBLElBQUksQ0FBQ0gsU0FBU0ksRUFBRSxFQUFFO1lBQ2hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLDBCQUEwQixFQUFFTCxTQUFTTSxNQUFNLEVBQUU7UUFDaEU7UUFDQSxPQUFPTixTQUFTTyxJQUFJO0lBQ3RCLEdBQ0E7UUFDRUMsV0FBV3hEO1FBQ1h5RCxTQUFTO1FBQ1RDLG1CQUFtQjtRQUNuQkMsY0FBYyxLQUFLO0lBQ3JCO0lBR0YsTUFBTUMsU0FBU0MsT0FBT0MsTUFBTSxDQUFNaEIsV0FBVyxDQUFDLEdBQzNDWixHQUFHLENBQUMsQ0FBQzVCLE9BQ0pELGdCQUFnQjtZQUNkRSxRQUFRRCxNQUFNeUQ7WUFDZHBELE1BQU1MLE1BQU0wRDtZQUNacEQsVUFBVTtZQUNWQyxTQUFTO1lBQ1RDLE1BQU07UUFDUixJQUVEc0IsTUFBTSxDQUFDLENBQUM5QixPQUE2QjJELFFBQVEzRCxPQUM3Q21DLEtBQUssQ0FBQyxHQUFHMUM7SUFFWixPQUFPa0IsWUFDTDtXQUNLMkM7V0FDQXZFLHlEQUFlQSxDQUFDNkMsR0FBRyxDQUFDLENBQUMzQixTQUFZO2dCQUNsQ0E7Z0JBQ0FJLE1BQU1KO2dCQUNOSyxVQUFVO2dCQUNWQyxTQUFTO2dCQUNUQyxNQUFNO1lBQ1I7S0FDRCxFQUNEZjtBQUVKO0FBRU8sZUFBZW1FLGVBQWVDLGVBQWUsS0FBSztJQUN2RCxPQUFPNUUsd0RBQU1BLENBQ1gsb0JBQ0FzRCxxQkFDQTtRQUNFdUIsT0FBT3hFO1FBQ1B5RSxZQUFZeEU7UUFDWnlFLGNBQWM7UUFDZEg7UUFDQUksc0JBQXNCO1FBQ3RCQyxJQUFJO0lBQ047QUFFSjtBQUVPLGVBQWVDLHVCQUNwQjVDLEtBQWEsRUFDYlYsUUFBUSxFQUFFLEVBQ1Z1RCxVQUFzQyxDQUFDLENBQUM7SUFFeEMsTUFBTUMsSUFBSW5FLE9BQU9xQixTQUFTLElBQUlwQixJQUFJLEdBQUdDLFdBQVc7SUFDaEQsTUFBTWtFLFlBQVlDLE9BQU9DLFFBQVEsQ0FBQzNELFNBQzlCNEQsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEdBQUcsQ0FBQyxJQUFJSixPQUFPMUQsV0FDaEM7SUFFSixJQUFJLENBQUN3RCxLQUFLQSxFQUFFaEQsTUFBTSxHQUFHN0Isa0JBQWtCO1FBQ3JDLE9BQU87WUFBRW9GLFNBQVMsRUFBRTtZQUFFQyxXQUFXekY7UUFBb0I7SUFDdkQ7SUFFQSxPQUFPSCx3REFBTUEsQ0FDWCxDQUFDLGlCQUFpQixFQUFFb0YsRUFBRSxDQUFDLEVBQUVDLFdBQVcsRUFDcEM7UUFDRSxNQUFNUSxXQUFXekMsZ0JBQWdCZ0MsR0FBR0M7UUFDcEMsSUFBSTtZQUNGLE1BQU1TLFFBQVEsTUFBTW5CLGVBQWVRLFFBQVFQLFlBQVk7WUFDdkQsTUFBTW1CLFlBQVl0RCxjQUFjcUQsT0FBT1YsR0FBR0M7WUFDMUMsTUFBTXRELFNBQVNMLFlBQVk7bUJBQUlxRTttQkFBY0Y7YUFBUyxFQUFFUjtZQUN4RCxPQUFPO2dCQUNMTSxTQUFTNUQsT0FBT0ssTUFBTSxHQUFHTCxTQUFTOEQ7Z0JBQ2xDRCxXQUFXekY7WUFDYjtRQUNGLEVBQUUsT0FBTTtZQUNOLE9BQU87Z0JBQ0x3RixTQUFTRTtnQkFDVEQsV0FBV3pGO1lBQ2I7UUFDRjtJQUNGLEdBQ0E7UUFDRTBFLE9BQU96RTtRQUNQMEUsWUFBWSxJQUFJMUU7UUFDaEIyRSxjQUFjO1FBQ2RILGNBQWNPLFFBQVFQLFlBQVk7UUFDbENJLHNCQUFzQjtRQUN0QkMsSUFBSTtJQUNOO0FBRUo7QUFFTyxlQUFlZSxzQkFBc0JDLE9BQWlCO0lBQzNELE1BQU1DLFFBQVFDLE1BQU1DLElBQUksQ0FDdEIsSUFBSXRFLElBQ0ZtRSxRQUNHdEQsR0FBRyxDQUFDLENBQUMzQixTQUFXQyxPQUFPRCxVQUFVLElBQUlFLElBQUksR0FBR0MsV0FBVyxJQUN2RDBCLE1BQU0sQ0FBQzZCLFNBQ1AyQixPQUFPLENBQUMsQ0FBQ3JGLFNBQVc7WUFBQ0EsT0FBT2tDLEtBQUssQ0FBQyxHQUFHO1lBQUlsQyxPQUFPa0MsS0FBSyxDQUFDLEdBQUc7WUFBSWxDO1NBQU8sRUFDcEU2QixNQUFNLENBQUMsQ0FBQ1AsUUFBVUEsTUFBTUYsTUFBTSxJQUFJN0Isb0JBRXZDMkMsS0FBSyxDQUFDLEdBQUc7SUFFWCxNQUFNeUIsZUFBZSxPQUFPMkIsS0FBSyxDQUFDLElBQU0sRUFBRTtJQUMxQyxNQUFNQyxRQUFRQyxVQUFVLENBQUNOLE1BQU12RCxHQUFHLENBQUMsQ0FBQ0wsUUFBVTRDLHVCQUF1QjVDLE9BQU87SUFFNUUsT0FBTztRQUFFbUUsU0FBU1AsTUFBTTlELE1BQU07SUFBQztBQUNqQyIsInNvdXJjZXMiOlsiL1VzZXJzL3R1dWxhaS9Eb2N1bWVudHMvdG1wL3NyYy9saWIvdGlja2VyRGF0YS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQT1BVTEFSX1RJQ0tFUlMgfSBmcm9tIFwiQC9saWIvdGlja2Vyc1wiO1xuaW1wb3J0IHsgcnVuV2l0aFJlc2lsaWVuY2UgfSBmcm9tIFwiQC9saWIvcmVzaWxpZW5jZVwiO1xuaW1wb3J0IHsgY2FjaGVkIH0gZnJvbSBcIkAvbGliL3NlcnZlclN0b3JlXCI7XG5pbXBvcnQgeyBpbmNyZW1lbnRDb3VudGVyIH0gZnJvbSBcIkAvbGliL3RlbGVtZXRyeVwiO1xuXG5leHBvcnQgdHlwZSBUaWNrZXJJdGVtID0ge1xuICBzeW1ib2w6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBleGNoYW5nZTogc3RyaW5nO1xuICBjb3VudHJ5OiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgY3VycmVuY3k/OiBzdHJpbmc7XG59O1xuXG50eXBlIFRpY2tlclNlYXJjaFBheWxvYWQgPSB7XG4gIHRpY2tlcnM6IFRpY2tlckl0ZW1bXTtcbiAgZXhwaXJlc0luOiBudW1iZXI7XG59O1xuXG5jb25zdCBTRUNfVElDS0VSU19VUkwgPSBcImh0dHBzOi8vd3d3LnNlYy5nb3YvZmlsZXMvY29tcGFueV90aWNrZXJzLmpzb25cIjtcbmNvbnN0IFFVRVJZX0NBQ0hFX1NFQ09ORFMgPSAxMiAqIDYwICogNjA7XG5jb25zdCBRVUVSWV9DQUNIRV9NUyA9IFFVRVJZX0NBQ0hFX1NFQ09ORFMgKiAxMDAwO1xuY29uc3QgSU5ERVhfQ0FDSEVfTVMgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuY29uc3QgSU5ERVhfU1RBTEVfTVMgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbmNvbnN0IE1JTl9RVUVSWV9MRU5HVEggPSAzO1xuY29uc3QgTUFYX0lOREVYX0lURU1TID0gMTJfMDAwO1xuY29uc3QgTkVUV09SS19USU1FT1VUX01TID0gMjQwMDtcblxuZnVuY3Rpb24gZ2V0VXNlckFnZW50KCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuU0VDX1VTRVJfQUdFTlQgfHwgXCJTdG9ja1B1bHNlLzEuMCBzdXBwb3J0QHN0b2NrcHVsc2UuYXBwXCI7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVRpY2tlcihpdGVtOiBQYXJ0aWFsPFRpY2tlckl0ZW0+KTogVGlja2VySXRlbSB8IG51bGwge1xuICBjb25zdCBzeW1ib2wgPSBTdHJpbmcoaXRlbS5zeW1ib2wgfHwgXCJcIikudHJpbSgpLnRvVXBwZXJDYXNlKCk7XG4gIGlmICghc3ltYm9sKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4ge1xuICAgIHN5bWJvbCxcbiAgICBuYW1lOiBTdHJpbmcoaXRlbS5uYW1lIHx8IHN5bWJvbCkudHJpbSgpIHx8IHN5bWJvbCxcbiAgICBleGNoYW5nZTogU3RyaW5nKGl0ZW0uZXhjaGFuZ2UgfHwgXCJVU1wiKS50cmltKCkgfHwgXCJVU1wiLFxuICAgIGNvdW50cnk6IFN0cmluZyhpdGVtLmNvdW50cnkgfHwgXCJVU1wiKS50cmltKCkgfHwgXCJVU1wiLFxuICAgIHR5cGU6IFN0cmluZyhpdGVtLnR5cGUgfHwgXCJDb21tb24gU3RvY2tcIikudHJpbSgpIHx8IFwiQ29tbW9uIFN0b2NrXCIsXG4gICAgY3VycmVuY3k6IGl0ZW0uY3VycmVuY3kgPyBTdHJpbmcoaXRlbS5jdXJyZW5jeSkgOiB1bmRlZmluZWRcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VVbmlxdWUoaXRlbXM6IFRpY2tlckl0ZW1bXSwgbGltaXQ6IG51bWJlcikge1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IG1lcmdlZDogVGlja2VySXRlbVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVRpY2tlcihpdGVtKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIGNvbnRpbnVlO1xuICAgIGlmIChzZWVuLmhhcyhub3JtYWxpemVkLnN5bWJvbCkpIGNvbnRpbnVlO1xuICAgIHNlZW4uYWRkKG5vcm1hbGl6ZWQuc3ltYm9sKTtcbiAgICBtZXJnZWQucHVzaChub3JtYWxpemVkKTtcbiAgICBpZiAobWVyZ2VkLmxlbmd0aCA+PSBsaW1pdCkgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gbWVyZ2VkO1xufVxuXG5mdW5jdGlvbiBtYXRjaFNjb3JlKGl0ZW06IFRpY2tlckl0ZW0sIHF1ZXJ5OiBzdHJpbmcpIHtcbiAgY29uc3Qgc3ltYm9sID0gaXRlbS5zeW1ib2wudG9VcHBlckNhc2UoKTtcbiAgY29uc3QgbmFtZSA9IGl0ZW0ubmFtZS50b1VwcGVyQ2FzZSgpO1xuICBpZiAoc3ltYm9sID09PSBxdWVyeSkgcmV0dXJuIDE0MDtcbiAgaWYgKHN5bWJvbC5zdGFydHNXaXRoKHF1ZXJ5KSkgcmV0dXJuIDEyMDtcbiAgaWYgKG5hbWUuc3RhcnRzV2l0aChxdWVyeSkpIHJldHVybiA5NTtcbiAgaWYgKHN5bWJvbC5pbmNsdWRlcyhxdWVyeSkpIHJldHVybiA3MDtcbiAgaWYgKG5hbWUuaW5jbHVkZXMocXVlcnkpKSByZXR1cm4gNDA7XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBzZWFyY2hUaWNrZXJzKGl0ZW1zOiBUaWNrZXJJdGVtW10sIHF1ZXJ5OiBzdHJpbmcsIGxpbWl0OiBudW1iZXIpIHtcbiAgY29uc3QgcmFua2VkID0gaXRlbXNcbiAgICAubWFwKChpdGVtKSA9PiAoeyBpdGVtLCBzY29yZTogbWF0Y2hTY29yZShpdGVtLCBxdWVyeSkgfSkpXG4gICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5zY29yZSA+IDApXG4gICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChiLnNjb3JlICE9PSBhLnNjb3JlKSByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG4gICAgICBpZiAoYS5pdGVtLnN5bWJvbC5sZW5ndGggIT09IGIuaXRlbS5zeW1ib2wubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBhLml0ZW0uc3ltYm9sLmxlbmd0aCAtIGIuaXRlbS5zeW1ib2wubGVuZ3RoO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGEuaXRlbS5zeW1ib2wubG9jYWxlQ29tcGFyZShiLml0ZW0uc3ltYm9sKTtcbiAgICB9KVxuICAgIC5zbGljZSgwLCBsaW1pdCAqIDIpXG4gICAgLm1hcCgoZW50cnkpID0+IGVudHJ5Lml0ZW0pO1xuXG4gIHJldHVybiBtZXJnZVVuaXF1ZShyYW5rZWQsIGxpbWl0KTtcbn1cblxuZnVuY3Rpb24gZmFsbGJhY2tUaWNrZXJzKHF1ZXJ5OiBzdHJpbmcsIGxpbWl0OiBudW1iZXIpIHtcbiAgY29uc3QgZGVmYXVsdHMgPSBQT1BVTEFSX1RJQ0tFUlMubWFwKChzeW1ib2wpID0+ICh7XG4gICAgc3ltYm9sLFxuICAgIG5hbWU6IHN5bWJvbCxcbiAgICBleGNoYW5nZTogXCJVU1wiLFxuICAgIGNvdW50cnk6IFwiVVNcIixcbiAgICB0eXBlOiBcIkNvbW1vbiBTdG9ja1wiXG4gIH0pKTtcbiAgcmV0dXJuIHNlYXJjaFRpY2tlcnMoZGVmYXVsdHMsIHF1ZXJ5LCBsaW1pdCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2VjVGlja2VySW5kZXgoKTogUHJvbWlzZTxUaWNrZXJJdGVtW10+IHtcbiAgaW5jcmVtZW50Q291bnRlcihcInRpY2tlcnMuaW5kZXguZmV0Y2hcIik7XG5cbiAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJ1bldpdGhSZXNpbGllbmNlKFxuICAgIFwidGlja2VyczppbmRleDpzZWNcIixcbiAgICBhc3luYyAoeyBzaWduYWwgfSkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChTRUNfVElDS0VSU19VUkwsIHtcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJVc2VyLUFnZW50XCI6IGdldFVzZXJBZ2VudCgpLFxuICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU0VDIGluZGV4IHJlcXVlc3QgZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICB7XG4gICAgICB0aW1lb3V0TXM6IE5FVFdPUktfVElNRU9VVF9NUyxcbiAgICAgIHJldHJpZXM6IDEsXG4gICAgICBvcGVuQWZ0ZXJGYWlsdXJlczogNCxcbiAgICAgIG9wZW5XaW5kb3dNczogNjAgKiAxMDAwXG4gICAgfVxuICApO1xuXG4gIGNvbnN0IG1hcHBlZCA9IE9iamVjdC52YWx1ZXM8YW55PihwYXlsb2FkIHx8IHt9KVxuICAgIC5tYXAoKGl0ZW06IGFueSkgPT5cbiAgICAgIG5vcm1hbGl6ZVRpY2tlcih7XG4gICAgICAgIHN5bWJvbDogaXRlbT8udGlja2VyLFxuICAgICAgICBuYW1lOiBpdGVtPy50aXRsZSxcbiAgICAgICAgZXhjaGFuZ2U6IFwiVVNcIixcbiAgICAgICAgY291bnRyeTogXCJVU1wiLFxuICAgICAgICB0eXBlOiBcIkNvbW1vbiBTdG9ja1wiXG4gICAgICB9KVxuICAgIClcbiAgICAuZmlsdGVyKChpdGVtKTogaXRlbSBpcyBUaWNrZXJJdGVtID0+IEJvb2xlYW4oaXRlbSkpXG4gICAgLnNsaWNlKDAsIE1BWF9JTkRFWF9JVEVNUyk7XG5cbiAgcmV0dXJuIG1lcmdlVW5pcXVlKFxuICAgIFtcbiAgICAgIC4uLm1hcHBlZCxcbiAgICAgIC4uLlBPUFVMQVJfVElDS0VSUy5tYXAoKHN5bWJvbCkgPT4gKHtcbiAgICAgICAgc3ltYm9sLFxuICAgICAgICBuYW1lOiBzeW1ib2wsXG4gICAgICAgIGV4Y2hhbmdlOiBcIlVTXCIsXG4gICAgICAgIGNvdW50cnk6IFwiVVNcIixcbiAgICAgICAgdHlwZTogXCJDb21tb24gU3RvY2tcIlxuICAgICAgfSkpXG4gICAgXSxcbiAgICBNQVhfSU5ERVhfSVRFTVNcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRpY2tlckluZGV4KGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XG4gIHJldHVybiBjYWNoZWQoXG4gICAgXCJ0aWNrZXJzOmluZGV4OnYxXCIsXG4gICAgZmV0Y2hTZWNUaWNrZXJJbmRleCxcbiAgICB7XG4gICAgICB0dGxNczogSU5ERVhfQ0FDSEVfTVMsXG4gICAgICBzdGFsZVR0bE1zOiBJTkRFWF9TVEFMRV9NUyxcbiAgICAgIHN0YWxlSWZFcnJvcjogdHJ1ZSxcbiAgICAgIGZvcmNlUmVmcmVzaCxcbiAgICAgIGJhY2tncm91bmRSZXZhbGlkYXRlOiB0cnVlLFxuICAgICAgbDI6IHRydWVcbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUaWNrZXJTZWFyY2hQYXlsb2FkKFxuICBxdWVyeTogc3RyaW5nLFxuICBsaW1pdCA9IDEyLFxuICBvcHRpb25zOiB7IGZvcmNlUmVmcmVzaD86IGJvb2xlYW4gfSA9IHt9XG4pOiBQcm9taXNlPFRpY2tlclNlYXJjaFBheWxvYWQ+IHtcbiAgY29uc3QgcSA9IFN0cmluZyhxdWVyeSB8fCBcIlwiKS50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgY29uc3Qgc2FmZUxpbWl0ID0gTnVtYmVyLmlzRmluaXRlKGxpbWl0KVxuICAgID8gTWF0aC5tYXgoMSwgTWF0aC5taW4oNDAsIE51bWJlcihsaW1pdCkpKVxuICAgIDogMTI7XG5cbiAgaWYgKCFxIHx8IHEubGVuZ3RoIDwgTUlOX1FVRVJZX0xFTkdUSCkge1xuICAgIHJldHVybiB7IHRpY2tlcnM6IFtdLCBleHBpcmVzSW46IFFVRVJZX0NBQ0hFX1NFQ09ORFMgfTtcbiAgfVxuXG4gIHJldHVybiBjYWNoZWQoXG4gICAgYHRpY2tlcnM6cXVlcnk6djE6JHtxfToke3NhZmVMaW1pdH1gLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZmFsbGJhY2tUaWNrZXJzKHEsIHNhZmVMaW1pdCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBpbmRleCA9IGF3YWl0IGdldFRpY2tlckluZGV4KG9wdGlvbnMuZm9yY2VSZWZyZXNoKTtcbiAgICAgICAgY29uc3QgZnJvbUluZGV4ID0gc2VhcmNoVGlja2VycyhpbmRleCwgcSwgc2FmZUxpbWl0KTtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VVbmlxdWUoWy4uLmZyb21JbmRleCwgLi4uZmFsbGJhY2tdLCBzYWZlTGltaXQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpY2tlcnM6IG1lcmdlZC5sZW5ndGggPyBtZXJnZWQgOiBmYWxsYmFjayxcbiAgICAgICAgICBleHBpcmVzSW46IFFVRVJZX0NBQ0hFX1NFQ09ORFNcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRpY2tlcnM6IGZhbGxiYWNrLFxuICAgICAgICAgIGV4cGlyZXNJbjogUVVFUllfQ0FDSEVfU0VDT05EU1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdHRsTXM6IFFVRVJZX0NBQ0hFX01TLFxuICAgICAgc3RhbGVUdGxNczogMiAqIFFVRVJZX0NBQ0hFX01TLFxuICAgICAgc3RhbGVJZkVycm9yOiB0cnVlLFxuICAgICAgZm9yY2VSZWZyZXNoOiBvcHRpb25zLmZvcmNlUmVmcmVzaCxcbiAgICAgIGJhY2tncm91bmRSZXZhbGlkYXRlOiB0cnVlLFxuICAgICAgbDI6IHRydWVcbiAgICB9XG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YXJtVGlja2VyU2VhcmNoQ2FjaGUoc3ltYm9sczogc3RyaW5nW10pIHtcbiAgY29uc3Qgc2VlZHMgPSBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoXG4gICAgICBzeW1ib2xzXG4gICAgICAgIC5tYXAoKHN5bWJvbCkgPT4gU3RyaW5nKHN5bWJvbCB8fCBcIlwiKS50cmltKCkudG9VcHBlckNhc2UoKSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAuZmxhdE1hcCgoc3ltYm9sKSA9PiBbc3ltYm9sLnNsaWNlKDAsIDMpLCBzeW1ib2wuc2xpY2UoMCwgNCksIHN5bWJvbF0pXG4gICAgICAgIC5maWx0ZXIoKHF1ZXJ5KSA9PiBxdWVyeS5sZW5ndGggPj0gTUlOX1FVRVJZX0xFTkdUSClcbiAgICApXG4gICkuc2xpY2UoMCwgMjQpO1xuXG4gIGF3YWl0IGdldFRpY2tlckluZGV4KGZhbHNlKS5jYXRjaCgoKSA9PiBbXSk7XG4gIGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChzZWVkcy5tYXAoKHF1ZXJ5KSA9PiBnZXRUaWNrZXJTZWFyY2hQYXlsb2FkKHF1ZXJ5LCAxMikpKTtcblxuICByZXR1cm4geyBxdWVyaWVzOiBzZWVkcy5sZW5ndGggfTtcbn1cbiJdLCJuYW1lcyI6WyJQT1BVTEFSX1RJQ0tFUlMiLCJydW5XaXRoUmVzaWxpZW5jZSIsImNhY2hlZCIsImluY3JlbWVudENvdW50ZXIiLCJTRUNfVElDS0VSU19VUkwiLCJRVUVSWV9DQUNIRV9TRUNPTkRTIiwiUVVFUllfQ0FDSEVfTVMiLCJJTkRFWF9DQUNIRV9NUyIsIklOREVYX1NUQUxFX01TIiwiTUlOX1FVRVJZX0xFTkdUSCIsIk1BWF9JTkRFWF9JVEVNUyIsIk5FVFdPUktfVElNRU9VVF9NUyIsImdldFVzZXJBZ2VudCIsInByb2Nlc3MiLCJlbnYiLCJTRUNfVVNFUl9BR0VOVCIsIm5vcm1hbGl6ZVRpY2tlciIsIml0ZW0iLCJzeW1ib2wiLCJTdHJpbmciLCJ0cmltIiwidG9VcHBlckNhc2UiLCJuYW1lIiwiZXhjaGFuZ2UiLCJjb3VudHJ5IiwidHlwZSIsImN1cnJlbmN5IiwidW5kZWZpbmVkIiwibWVyZ2VVbmlxdWUiLCJpdGVtcyIsImxpbWl0Iiwic2VlbiIsIlNldCIsIm1lcmdlZCIsIm5vcm1hbGl6ZWQiLCJoYXMiLCJhZGQiLCJwdXNoIiwibGVuZ3RoIiwibWF0Y2hTY29yZSIsInF1ZXJ5Iiwic3RhcnRzV2l0aCIsImluY2x1ZGVzIiwic2VhcmNoVGlja2VycyIsInJhbmtlZCIsIm1hcCIsInNjb3JlIiwiZmlsdGVyIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsInNsaWNlIiwiZW50cnkiLCJmYWxsYmFja1RpY2tlcnMiLCJkZWZhdWx0cyIsImZldGNoU2VjVGlja2VySW5kZXgiLCJwYXlsb2FkIiwic2lnbmFsIiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJBY2NlcHQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwianNvbiIsInRpbWVvdXRNcyIsInJldHJpZXMiLCJvcGVuQWZ0ZXJGYWlsdXJlcyIsIm9wZW5XaW5kb3dNcyIsIm1hcHBlZCIsIk9iamVjdCIsInZhbHVlcyIsInRpY2tlciIsInRpdGxlIiwiQm9vbGVhbiIsImdldFRpY2tlckluZGV4IiwiZm9yY2VSZWZyZXNoIiwidHRsTXMiLCJzdGFsZVR0bE1zIiwic3RhbGVJZkVycm9yIiwiYmFja2dyb3VuZFJldmFsaWRhdGUiLCJsMiIsImdldFRpY2tlclNlYXJjaFBheWxvYWQiLCJvcHRpb25zIiwicSIsInNhZmVMaW1pdCIsIk51bWJlciIsImlzRmluaXRlIiwiTWF0aCIsIm1heCIsIm1pbiIsInRpY2tlcnMiLCJleHBpcmVzSW4iLCJmYWxsYmFjayIsImluZGV4IiwiZnJvbUluZGV4Iiwid2FybVRpY2tlclNlYXJjaENhY2hlIiwic3ltYm9scyIsInNlZWRzIiwiQXJyYXkiLCJmcm9tIiwiZmxhdE1hcCIsImNhdGNoIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJxdWVyaWVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/tickerData.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/tickers.ts":
/*!****************************!*\
  !*** ./src/lib/tickers.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POPULAR_TICKERS: () => (/* binding */ POPULAR_TICKERS),\n/* harmony export */   buildTickerSuggestions: () => (/* binding */ buildTickerSuggestions),\n/* harmony export */   normalizeTickerInput: () => (/* binding */ normalizeTickerInput)\n/* harmony export */ });\nconst POPULAR_TICKERS = [\n    \"AAPL\",\n    \"MSFT\",\n    \"GOOGL\",\n    \"AMZN\",\n    \"NVDA\",\n    \"META\",\n    \"TSLA\",\n    \"AMD\",\n    \"NFLX\",\n    \"INTC\",\n    \"AVGO\",\n    \"QCOM\",\n    \"CRM\",\n    \"ADBE\",\n    \"ORCL\",\n    \"CSCO\",\n    \"IBM\",\n    \"UBER\",\n    \"SHOP\",\n    \"PYPL\",\n    \"SQ\",\n    \"PLTR\",\n    \"SNOW\",\n    \"PANW\",\n    \"NOW\",\n    \"JPM\",\n    \"BAC\",\n    \"WFC\",\n    \"GS\",\n    \"MS\",\n    \"V\",\n    \"MA\",\n    \"AXP\",\n    \"BRK.B\",\n    \"SPY\",\n    \"QQQ\",\n    \"DIA\",\n    \"IWM\",\n    \"XLE\",\n    \"XLF\",\n    \"XLI\",\n    \"XLK\",\n    \"XLV\",\n    \"XLP\",\n    \"XLY\",\n    \"XLB\",\n    \"XLU\",\n    \"XLC\",\n    \"XBI\",\n    \"ARKK\",\n    \"COIN\",\n    \"MSTR\",\n    \"BABA\",\n    \"NIO\",\n    \"PDD\",\n    \"TCEHY\",\n    \"DIS\",\n    \"CMCSA\",\n    \"TMUS\",\n    \"VZ\",\n    \"T\",\n    \"WMT\",\n    \"COST\",\n    \"HD\",\n    \"LOW\",\n    \"NKE\",\n    \"SBUX\",\n    \"MCD\",\n    \"KO\",\n    \"PEP\",\n    \"PG\",\n    \"XOM\",\n    \"CVX\",\n    \"COP\",\n    \"SLB\",\n    \"OXY\",\n    \"PBR\",\n    \"UNH\",\n    \"LLY\",\n    \"JNJ\",\n    \"MRK\",\n    \"PFE\",\n    \"ABBV\",\n    \"TMO\",\n    \"GILD\",\n    \"REGN\",\n    \"VRTX\",\n    \"CAT\",\n    \"DE\",\n    \"GE\",\n    \"BA\",\n    \"F\",\n    \"GM\",\n    \"RIVN\",\n    \"LCID\",\n    \"SOFI\",\n    \"HOOD\",\n    \"RBLX\"\n];\nfunction normalizeTickerInput(value) {\n    return value.trim().toUpperCase();\n}\nfunction buildTickerSuggestions(extra = [], limit = 60) {\n    const merged = Array.from(new Set([\n        ...extra.map((ticker)=>normalizeTickerInput(ticker)),\n        ...POPULAR_TICKERS\n    ])).filter(Boolean);\n    return merged.slice(0, limit);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvdGlja2Vycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxrQkFBa0I7SUFDN0I7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNELENBQUM7QUFFSyxTQUFTQyxxQkFBcUJDLEtBQWE7SUFDaEQsT0FBT0EsTUFBTUMsSUFBSSxHQUFHQyxXQUFXO0FBQ2pDO0FBRU8sU0FBU0MsdUJBQXVCQyxRQUFrQixFQUFFLEVBQUVDLFFBQVEsRUFBRTtJQUNyRSxNQUFNQyxTQUFTQyxNQUFNQyxJQUFJLENBQ3ZCLElBQUlDLElBQUk7V0FDSEwsTUFBTU0sR0FBRyxDQUFDLENBQUNDLFNBQVdaLHFCQUFxQlk7V0FDM0NiO0tBQ0osR0FDRGMsTUFBTSxDQUFDQztJQUNULE9BQU9QLE9BQU9RLEtBQUssQ0FBQyxHQUFHVDtBQUN6QiIsInNvdXJjZXMiOlsiL1VzZXJzL3R1dWxhaS9Eb2N1bWVudHMvdG1wL3NyYy9saWIvdGlja2Vycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUE9QVUxBUl9USUNLRVJTID0gW1xuICBcIkFBUExcIixcbiAgXCJNU0ZUXCIsXG4gIFwiR09PR0xcIixcbiAgXCJBTVpOXCIsXG4gIFwiTlZEQVwiLFxuICBcIk1FVEFcIixcbiAgXCJUU0xBXCIsXG4gIFwiQU1EXCIsXG4gIFwiTkZMWFwiLFxuICBcIklOVENcIixcbiAgXCJBVkdPXCIsXG4gIFwiUUNPTVwiLFxuICBcIkNSTVwiLFxuICBcIkFEQkVcIixcbiAgXCJPUkNMXCIsXG4gIFwiQ1NDT1wiLFxuICBcIklCTVwiLFxuICBcIlVCRVJcIixcbiAgXCJTSE9QXCIsXG4gIFwiUFlQTFwiLFxuICBcIlNRXCIsXG4gIFwiUExUUlwiLFxuICBcIlNOT1dcIixcbiAgXCJQQU5XXCIsXG4gIFwiTk9XXCIsXG4gIFwiSlBNXCIsXG4gIFwiQkFDXCIsXG4gIFwiV0ZDXCIsXG4gIFwiR1NcIixcbiAgXCJNU1wiLFxuICBcIlZcIixcbiAgXCJNQVwiLFxuICBcIkFYUFwiLFxuICBcIkJSSy5CXCIsXG4gIFwiU1BZXCIsXG4gIFwiUVFRXCIsXG4gIFwiRElBXCIsXG4gIFwiSVdNXCIsXG4gIFwiWExFXCIsXG4gIFwiWExGXCIsXG4gIFwiWExJXCIsXG4gIFwiWExLXCIsXG4gIFwiWExWXCIsXG4gIFwiWExQXCIsXG4gIFwiWExZXCIsXG4gIFwiWExCXCIsXG4gIFwiWExVXCIsXG4gIFwiWExDXCIsXG4gIFwiWEJJXCIsXG4gIFwiQVJLS1wiLFxuICBcIkNPSU5cIixcbiAgXCJNU1RSXCIsXG4gIFwiQkFCQVwiLFxuICBcIk5JT1wiLFxuICBcIlBERFwiLFxuICBcIlRDRUhZXCIsXG4gIFwiRElTXCIsXG4gIFwiQ01DU0FcIixcbiAgXCJUTVVTXCIsXG4gIFwiVlpcIixcbiAgXCJUXCIsXG4gIFwiV01UXCIsXG4gIFwiQ09TVFwiLFxuICBcIkhEXCIsXG4gIFwiTE9XXCIsXG4gIFwiTktFXCIsXG4gIFwiU0JVWFwiLFxuICBcIk1DRFwiLFxuICBcIktPXCIsXG4gIFwiUEVQXCIsXG4gIFwiUEdcIixcbiAgXCJYT01cIixcbiAgXCJDVlhcIixcbiAgXCJDT1BcIixcbiAgXCJTTEJcIixcbiAgXCJPWFlcIixcbiAgXCJQQlJcIixcbiAgXCJVTkhcIixcbiAgXCJMTFlcIixcbiAgXCJKTkpcIixcbiAgXCJNUktcIixcbiAgXCJQRkVcIixcbiAgXCJBQkJWXCIsXG4gIFwiVE1PXCIsXG4gIFwiR0lMRFwiLFxuICBcIlJFR05cIixcbiAgXCJWUlRYXCIsXG4gIFwiQ0FUXCIsXG4gIFwiREVcIixcbiAgXCJHRVwiLFxuICBcIkJBXCIsXG4gIFwiRlwiLFxuICBcIkdNXCIsXG4gIFwiUklWTlwiLFxuICBcIkxDSURcIixcbiAgXCJTT0ZJXCIsXG4gIFwiSE9PRFwiLFxuICBcIlJCTFhcIlxuXTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVRpY2tlcklucHV0KHZhbHVlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRUaWNrZXJTdWdnZXN0aW9ucyhleHRyYTogc3RyaW5nW10gPSBbXSwgbGltaXQgPSA2MCkge1xuICBjb25zdCBtZXJnZWQgPSBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoW1xuICAgICAgLi4uZXh0cmEubWFwKCh0aWNrZXIpID0+IG5vcm1hbGl6ZVRpY2tlcklucHV0KHRpY2tlcikpLFxuICAgICAgLi4uUE9QVUxBUl9USUNLRVJTXG4gICAgXSlcbiAgKS5maWx0ZXIoQm9vbGVhbik7XG4gIHJldHVybiBtZXJnZWQuc2xpY2UoMCwgbGltaXQpO1xufVxuIl0sIm5hbWVzIjpbIlBPUFVMQVJfVElDS0VSUyIsIm5vcm1hbGl6ZVRpY2tlcklucHV0IiwidmFsdWUiLCJ0cmltIiwidG9VcHBlckNhc2UiLCJidWlsZFRpY2tlclN1Z2dlc3Rpb25zIiwiZXh0cmEiLCJsaW1pdCIsIm1lcmdlZCIsIkFycmF5IiwiZnJvbSIsIlNldCIsIm1hcCIsInRpY2tlciIsImZpbHRlciIsIkJvb2xlYW4iLCJzbGljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/tickers.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/twelveData.ts":
/*!*******************************!*\
  !*** ./src/lib/twelveData.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getNews: () => (/* binding */ getNews),\n/* harmony export */   getQuote: () => (/* binding */ getQuote),\n/* harmony export */   getQuotes: () => (/* binding */ getQuotes),\n/* harmony export */   getTimeSeries: () => (/* binding */ getTimeSeries),\n/* harmony export */   searchTickers: () => (/* binding */ searchTickers)\n/* harmony export */ });\n/* harmony import */ var _lib_resilience__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/resilience */ \"(api-node)/./src/lib/resilience.ts\");\n/* harmony import */ var _lib_telemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/telemetry */ \"(api-node)/./src/lib/telemetry.ts\");\n\n\nconst API_BASE = \"https://api.twelvedata.com\";\nconst STOOQ_BASE = \"https://stooq.com/q/d/l/\";\nconst NEWS_API_BASE = process.env.NEWS_API_BASE || \"https://newsapi.org/v2\";\nconst CACHE = new Map();\nconst IN_FLIGHT = new Map();\nconst QUOTE_TTL = 90 * 1000;\nconst SERIES_TTL = 15 * 60 * 1000;\nconst NEWS_TTL = 5 * 60 * 1000;\nconst TICKER_TTL = 6 * 60 * 60 * 1000;\nconst MAX_SYMBOLS_PER_REQUEST = Math.max(1, Number(process.env.TWELVE_BATCH_SIZE || 24) || 24);\nconst MIN_GAP_MS = (()=>{\n    const raw = process.env.TWELVE_MIN_GAP_MS;\n    if (raw === undefined || raw === \"\") return 200;\n    const value = Number(raw);\n    if (!Number.isFinite(value)) return 200;\n    return Math.max(0, value);\n})();\nconst MAX_REQUESTS_PER_MIN = (()=>{\n    const raw = process.env.TWELVE_MAX_PER_MIN;\n    if (raw === undefined || raw === \"\") return 8;\n    const value = Number(raw);\n    if (!Number.isFinite(value)) return 8;\n    return Math.max(1, Math.floor(value));\n})();\nconst RATE_WINDOW_MS = 60 * 1000;\nconst REQUEST_TIMEOUT_MS = (()=>{\n    const raw = process.env.TWELVE_TIMEOUT_MS;\n    if (raw === undefined || raw === \"\") return 2500;\n    const value = Number(raw);\n    if (!Number.isFinite(value)) return 2500;\n    return Math.max(800, value);\n})();\nconst NEWS_TIMEOUT_MS = (()=>{\n    const raw = process.env.NEWS_TIMEOUT_MS;\n    if (raw === undefined || raw === \"\") return Math.max(REQUEST_TIMEOUT_MS, 4200);\n    const value = Number(raw);\n    if (!Number.isFinite(value)) return Math.max(REQUEST_TIMEOUT_MS, 4200);\n    return Math.max(1200, value);\n})();\nconst MAX_THROTTLE_WAIT_MS = (()=>{\n    const raw = process.env.TWELVE_MAX_WAIT_MS;\n    if (raw === undefined || raw === \"\") return 1200;\n    const value = Number(raw);\n    if (!Number.isFinite(value)) return 1200;\n    return Math.max(200, value);\n})();\nlet lastRequestAt = 0;\nlet requestQueue = Promise.resolve();\nconst recentRequestTimestamps = [];\nconst QUOTE_CACHE = new Map();\nfunction getCache(key, ttl) {\n    const entry = CACHE.get(key);\n    if (!entry) return null;\n    if (Date.now() - entry.timestamp > ttl) {\n        CACHE.delete(key);\n        return null;\n    }\n    return entry.data;\n}\nfunction getStale(key) {\n    const entry = CACHE.get(key);\n    if (!entry) return null;\n    return entry.data;\n}\nfunction setCache(key, data) {\n    CACHE.set(key, {\n        timestamp: Date.now(),\n        data\n    });\n}\nfunction withCache(key, ttl, fetcher, options = {}) {\n    const stale = options.staleIfError ? getStale(key) : null;\n    const cached = getCache(key, ttl);\n    if (cached) return Promise.resolve(cached);\n    if (IN_FLIGHT.has(key)) {\n        return IN_FLIGHT.get(key);\n    }\n    const task = (async ()=>{\n        try {\n            const data = await fetcher();\n            setCache(key, data);\n            return data;\n        } catch (error) {\n            if (options.staleIfError) {\n                if (stale) return stale;\n            }\n            throw error;\n        } finally{\n            IN_FLIGHT.delete(key);\n        }\n    })();\n    IN_FLIGHT.set(key, task);\n    return task;\n}\nfunction toNumber(value) {\n    if (value === undefined) return null;\n    const parsed = Number(value);\n    return Number.isFinite(parsed) ? parsed : null;\n}\nasync function throttle() {\n    requestQueue = requestQueue.catch(()=>undefined).then(async ()=>{\n        while(true){\n            const now = Date.now();\n            while(recentRequestTimestamps.length > 0 && now - recentRequestTimestamps[0] >= RATE_WINDOW_MS){\n                recentRequestTimestamps.shift();\n            }\n            const gapWait = Math.max(0, lastRequestAt + MIN_GAP_MS - now);\n            const windowWait = recentRequestTimestamps.length >= MAX_REQUESTS_PER_MIN ? Math.max(0, recentRequestTimestamps[0] + RATE_WINDOW_MS - now) : 0;\n            const wait = Math.max(gapWait, windowWait);\n            if (wait <= 0) {\n                break;\n            }\n            if (wait > MAX_THROTTLE_WAIT_MS) {\n                (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"quota.twelve.local_limit_block\");\n                throw new Error(\"Twelve Data local rate limit reached\");\n            }\n            await new Promise((resolve)=>setTimeout(resolve, wait));\n        }\n        const timestamp = Date.now();\n        lastRequestAt = timestamp;\n        recentRequestTimestamps.push(timestamp);\n        (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"quota.twelve.request_slot\");\n    });\n    await requestQueue;\n}\nasync function twelveFetch(endpoint, params) {\n    const apiKey = process.env.TWELVE_DATA_KEY;\n    if (!apiKey) {\n        throw new Error(\"Missing TWELVE_DATA_KEY in .env.local\");\n    }\n    const url = new URL(`${API_BASE}/${endpoint}`);\n    const searchParams = new URLSearchParams(params);\n    searchParams.set(\"apikey\", apiKey);\n    url.search = searchParams.toString();\n    const { response, payload } = await (0,_lib_resilience__WEBPACK_IMPORTED_MODULE_0__.runWithResilience)(`twelve:${endpoint}`, async ({ signal })=>{\n        await throttle();\n        (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"api.twelve.fetch\");\n        const response = await fetch(url.toString(), {\n            signal\n        });\n        const payload = await response.json();\n        return {\n            response,\n            payload\n        };\n    }, {\n        timeoutMs: REQUEST_TIMEOUT_MS,\n        retries: 1,\n        openAfterFailures: 4,\n        openWindowMs: 60 * 1000,\n        shouldRetry: (error)=>{\n            const message = String(error?.message || \"\");\n            return !/invalid|parameter|forbidden|unauthorized|404/i.test(message);\n        }\n    });\n    if (!response.ok) {\n        throw new Error(`Twelve Data error: ${response.status}`);\n    }\n    if (payload?.status === \"error\") {\n        throw new Error(payload.message || \"Twelve Data returned an error\");\n    }\n    if (payload?.code && payload?.message) {\n        throw new Error(payload.message);\n    }\n    return payload;\n}\nfunction stooqSymbols(symbol) {\n    const normalized = symbol.trim().toLowerCase().replace(/\\./g, \"-\");\n    const candidates = [\n        `${normalized}.us`,\n        normalized\n    ];\n    return Array.from(new Set(candidates));\n}\nfunction parseStooqCsv(csv) {\n    const lines = csv.trim().split(/\\r?\\n/);\n    if (lines.length < 2) return [];\n    const rows = lines.slice(1);\n    const parsed = rows.map((line)=>line.split(\",\")).filter((cols)=>cols.length >= 6).map((cols)=>{\n        const [date, open, high, low, close, volume] = cols;\n        if (!date || [\n            open,\n            high,\n            low,\n            close\n        ].some((value)=>value === \"N/D\")) {\n            return null;\n        }\n        const point = {\n            time: date,\n            open: Number(open),\n            high: Number(high),\n            low: Number(low),\n            close: Number(close),\n            volume: Number(volume || 0)\n        };\n        if (!Number.isFinite(point.open) || !Number.isFinite(point.high) || !Number.isFinite(point.low) || !Number.isFinite(point.close)) {\n            return null;\n        }\n        return point;\n    }).filter((point)=>Boolean(point)).sort((a, b)=>a.time.localeCompare(b.time));\n    return parsed.slice(-180);\n}\nasync function fetchStooqSeries(symbol) {\n    for (const candidate of stooqSymbols(symbol)){\n        const url = new URL(STOOQ_BASE);\n        url.searchParams.set(\"s\", candidate);\n        url.searchParams.set(\"i\", \"d\");\n        const controller = new AbortController();\n        const timer = setTimeout(()=>controller.abort(), REQUEST_TIMEOUT_MS);\n        try {\n            const response = await fetch(url.toString(), {\n                signal: controller.signal\n            });\n            if (!response.ok) continue;\n            const csv = await response.text();\n            const parsed = parseStooqCsv(csv);\n            if (parsed.length) return parsed;\n        } catch  {\n        // Ignore and continue with the next candidate.\n        } finally{\n            clearTimeout(timer);\n        }\n    }\n    return [];\n}\nfunction normalizeQuote(raw) {\n    return {\n        symbol: raw.symbol,\n        name: raw.name || raw.symbol,\n        currency: raw.currency || \"USD\",\n        price: toNumber(raw.price),\n        change: toNumber(raw.change),\n        percentChange: toNumber(raw.percent_change),\n        open: toNumber(raw.open),\n        high: toNumber(raw.high),\n        low: toNumber(raw.low),\n        volume: toNumber(raw.volume),\n        previousClose: toNumber(raw.previous_close),\n        timestamp: raw.datetime || raw.timestamp || null\n    };\n}\nfunction getQuoteCache(symbol, ttl) {\n    const entry = QUOTE_CACHE.get(symbol);\n    if (!entry) return null;\n    if (Date.now() - entry.timestamp > ttl) return null;\n    return entry.data;\n}\nfunction getQuoteStale(symbol) {\n    const entry = QUOTE_CACHE.get(symbol);\n    return entry ? entry.data : null;\n}\nfunction setQuoteCache(symbol, quote) {\n    QUOTE_CACHE.set(symbol, {\n        timestamp: Date.now(),\n        data: quote\n    });\n}\nasync function getQuote(symbol) {\n    const [quote] = await getQuotes([\n        symbol\n    ]);\n    if (!quote) {\n        throw new Error(\"Quote not found\");\n    }\n    return quote;\n}\nasync function getQuotes(symbols) {\n    const normalized = Array.from(new Set(symbols.map((symbol)=>symbol.toUpperCase()))).filter(Boolean);\n    if (normalized.length === 0) return [];\n    const sorted = [\n        ...normalized\n    ].sort();\n    const resultMap = new Map();\n    const staleMap = new Map();\n    const missing = [];\n    sorted.forEach((symbol)=>{\n        const fresh = getQuoteCache(symbol, QUOTE_TTL);\n        if (fresh) {\n            (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.quote.hit\");\n            resultMap.set(symbol, fresh);\n            return;\n        }\n        const stale = getQuoteStale(symbol);\n        if (stale) {\n            staleMap.set(symbol, stale);\n        }\n        missing.push(symbol);\n    });\n    if (missing.length) {\n        try {\n            async function fetchQuoteBatchAdaptive(batch) {\n                if (batch.length === 0) return [];\n                if (batch.length > MAX_SYMBOLS_PER_REQUEST) {\n                    const middle = Math.ceil(batch.length / 2);\n                    const [left, right] = await Promise.all([\n                        fetchQuoteBatchAdaptive(batch.slice(0, middle)),\n                        fetchQuoteBatchAdaptive(batch.slice(middle))\n                    ]);\n                    return [\n                        ...left,\n                        ...right\n                    ];\n                }\n                try {\n                    const payload = await twelveFetch(\"quote\", {\n                        symbol: batch.join(\",\")\n                    });\n                    if (Array.isArray(payload?.data)) return payload.data;\n                    if (payload?.symbol) return [\n                        payload\n                    ];\n                    return [];\n                } catch (error) {\n                    const message = String(error?.message || \"\");\n                    const shouldSplit = batch.length > 1 && /(symbol|parameter|length|too many|too long|invalid|400|414|422)/i.test(message);\n                    if (!shouldSplit) throw error;\n                    const middle = Math.ceil(batch.length / 2);\n                    const [left, right] = await Promise.all([\n                        fetchQuoteBatchAdaptive(batch.slice(0, middle)),\n                        fetchQuoteBatchAdaptive(batch.slice(middle))\n                    ]);\n                    return [\n                        ...left,\n                        ...right\n                    ];\n                }\n            }\n            const merged = await fetchQuoteBatchAdaptive(missing);\n            merged.map(normalizeQuote).forEach((quote)=>{\n                if (!quote.symbol) return;\n                setQuoteCache(quote.symbol, quote);\n                (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_1__.incrementCounter)(\"cache.quote.write\");\n                resultMap.set(quote.symbol, quote);\n            });\n        } catch (error) {\n            if (!staleMap.size) throw error;\n        }\n    }\n    staleMap.forEach((quote, symbol)=>{\n        if (!resultMap.has(symbol)) {\n            resultMap.set(symbol, quote);\n        }\n    });\n    return sorted.map((symbol)=>resultMap.get(symbol)).filter((quote)=>Boolean(quote));\n}\nasync function getTimeSeries(symbol, interval = \"1day\") {\n    const cacheKey = `series:${symbol}:${interval}`;\n    return withCache(cacheKey, SERIES_TTL, async ()=>{\n        let twelveError = null;\n        try {\n            const payload = await twelveFetch(\"time_series\", {\n                symbol,\n                interval,\n                outputsize: \"90\"\n            });\n            if (payload?.values?.length) {\n                const parsed = payload.values.map((value)=>({\n                        time: String(value.datetime || \"\").trim(),\n                        open: Number(value.open),\n                        high: Number(value.high),\n                        low: Number(value.low),\n                        close: Number(value.close),\n                        volume: Number(value.volume || 0)\n                    })).filter((point)=>{\n                    if (!point.time) return false;\n                    return [\n                        point.open,\n                        point.high,\n                        point.low,\n                        point.close\n                    ].every((item)=>Number.isFinite(item));\n                }).sort((a, b)=>a.time.localeCompare(b.time));\n                if (parsed.length) {\n                    return parsed.slice(-180);\n                }\n            }\n            twelveError = new Error(\"No time series data available\");\n        } catch (error) {\n            twelveError = error instanceof Error ? error : new Error(error?.message || \"Failed to load time series\");\n        }\n        // Free fallback data source to keep charts available when Twelve Data is slow/limited.\n        const fallback = await fetchStooqSeries(symbol);\n        if (fallback.length) {\n            return fallback;\n        }\n        throw twelveError || new Error(\"No time series data available\");\n    }, {\n        staleIfError: true\n    });\n}\nasync function getNews(symbol, options = {}) {\n    const apiKey = process.env.NEWS_API_KEY;\n    if (!apiKey) {\n        return [];\n    }\n    const query = symbol ? `${symbol} OR ${symbol} stock` : \"stock market\";\n    const cacheKey = `news:${query}:${options.from || \"\"}:${options.to || \"\"}`;\n    return withCache(cacheKey, NEWS_TTL, async ()=>{\n        const url = new URL(`${NEWS_API_BASE}/everything`);\n        url.searchParams.set(\"q\", query);\n        url.searchParams.set(\"sortBy\", \"publishedAt\");\n        url.searchParams.set(\"language\", \"en\");\n        url.searchParams.set(\"pageSize\", \"8\");\n        if (options.from) {\n            url.searchParams.set(\"from\", options.from);\n        }\n        if (options.to) {\n            url.searchParams.set(\"to\", options.to);\n        }\n        url.searchParams.set(\"apiKey\", apiKey);\n        const { response, payload } = await (0,_lib_resilience__WEBPACK_IMPORTED_MODULE_0__.runWithResilience)(\"news-api:everything\", async ({ signal })=>{\n            const response = await fetch(url.toString(), {\n                signal\n            });\n            const payload = await response.json();\n            return {\n                response,\n                payload\n            };\n        }, {\n            timeoutMs: NEWS_TIMEOUT_MS,\n            retries: 1,\n            openAfterFailures: 3,\n            openWindowMs: 45 * 1000,\n            shouldRetry: (error)=>{\n                const message = String(error?.message || \"\");\n                return !/api key|unauthorized|forbidden|429/i.test(message);\n            }\n        });\n        if (!response.ok) {\n            throw new Error(payload?.message || \"News API error\");\n        }\n        return (payload.articles || []).map((article)=>({\n                title: article.title,\n                description: article.description || article.content || \"\",\n                url: article.url,\n                source: article.source?.name || \"News\",\n                publishedAt: article.publishedAt,\n                imageUrl: article.urlToImage || undefined,\n                content: article.content || undefined\n            }));\n    }, {\n        staleIfError: true\n    });\n}\nasync function searchTickers(query, limit = 12) {\n    const normalized = query.trim().toUpperCase();\n    if (!normalized) return [];\n    const safeLimit = Math.max(1, Math.min(30, limit));\n    const cacheKey = `tickers:${normalized}:${safeLimit}`;\n    return withCache(cacheKey, TICKER_TTL, async ()=>{\n        const payload = await twelveFetch(\"symbol_search\", {\n            symbol: normalized,\n            outputsize: String(safeLimit)\n        });\n        const data = Array.isArray(payload?.data) ? payload.data : [];\n        return data.map((item)=>({\n                symbol: String(item?.symbol || \"\").toUpperCase(),\n                name: String(item?.instrument_name || item?.symbol || \"\"),\n                exchange: String(item?.exchange || \"\"),\n                country: String(item?.country || \"\"),\n                type: String(item?.type || \"\"),\n                currency: item?.currency ? String(item.currency) : undefined\n            })).filter((item)=>item.symbol.length > 0);\n    }, {\n        staleIfError: true\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akQsT0FBTzBGLEtBQUt6QyxRQUFRLElBQUk1SDtZQUNyRCxJQUNDa0csTUFBTSxDQUFDLENBQUNtRSxPQUFzQkEsS0FBS3BGLE1BQU0sQ0FBQ3BDLE1BQU0sR0FBRztJQUN4RCxHQUNBO1FBQUVWLGNBQWM7SUFBSztBQUV6QiIsInNvdXJjZXMiOlsiL1VzZXJzL3R1dWxhaS9Eb2N1bWVudHMvdG1wL3NyYy9saWIvdHdlbHZlRGF0YS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBydW5XaXRoUmVzaWxpZW5jZSB9IGZyb20gXCJAL2xpYi9yZXNpbGllbmNlXCI7XG5pbXBvcnQgeyBpbmNyZW1lbnRDb3VudGVyIH0gZnJvbSBcIkAvbGliL3RlbGVtZXRyeVwiO1xuXG5jb25zdCBBUElfQkFTRSA9IFwiaHR0cHM6Ly9hcGkudHdlbHZlZGF0YS5jb21cIjtcbmNvbnN0IFNUT09RX0JBU0UgPSBcImh0dHBzOi8vc3Rvb3EuY29tL3EvZC9sL1wiO1xuY29uc3QgTkVXU19BUElfQkFTRSA9IHByb2Nlc3MuZW52Lk5FV1NfQVBJX0JBU0UgfHwgXCJodHRwczovL25ld3NhcGkub3JnL3YyXCI7XG5jb25zdCBDQUNIRSA9IG5ldyBNYXA8c3RyaW5nLCB7IHRpbWVzdGFtcDogbnVtYmVyOyBkYXRhOiB1bmtub3duIH0+KCk7XG5jb25zdCBJTl9GTElHSFQgPSBuZXcgTWFwPHN0cmluZywgUHJvbWlzZTx1bmtub3duPj4oKTtcbmNvbnN0IFFVT1RFX1RUTCA9IDkwICogMTAwMDtcbmNvbnN0IFNFUklFU19UVEwgPSAxNSAqIDYwICogMTAwMDtcbmNvbnN0IE5FV1NfVFRMID0gNSAqIDYwICogMTAwMDtcbmNvbnN0IFRJQ0tFUl9UVEwgPSA2ICogNjAgKiA2MCAqIDEwMDA7XG5jb25zdCBNQVhfU1lNQk9MU19QRVJfUkVRVUVTVCA9IE1hdGgubWF4KFxuICAxLFxuICBOdW1iZXIocHJvY2Vzcy5lbnYuVFdFTFZFX0JBVENIX1NJWkUgfHwgMjQpIHx8IDI0XG4pO1xuY29uc3QgTUlOX0dBUF9NUyA9ICgoKSA9PiB7XG4gIGNvbnN0IHJhdyA9IHByb2Nlc3MuZW52LlRXRUxWRV9NSU5fR0FQX01TO1xuICBpZiAocmF3ID09PSB1bmRlZmluZWQgfHwgcmF3ID09PSBcIlwiKSByZXR1cm4gMjAwO1xuICBjb25zdCB2YWx1ZSA9IE51bWJlcihyYXcpO1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHJldHVybiAyMDA7XG4gIHJldHVybiBNYXRoLm1heCgwLCB2YWx1ZSk7XG59KSgpO1xuY29uc3QgTUFYX1JFUVVFU1RTX1BFUl9NSU4gPSAoKCkgPT4ge1xuICBjb25zdCByYXcgPSBwcm9jZXNzLmVudi5UV0VMVkVfTUFYX1BFUl9NSU47XG4gIGlmIChyYXcgPT09IHVuZGVmaW5lZCB8fCByYXcgPT09IFwiXCIpIHJldHVybiA4O1xuICBjb25zdCB2YWx1ZSA9IE51bWJlcihyYXcpO1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHJldHVybiA4O1xuICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcih2YWx1ZSkpO1xufSkoKTtcbmNvbnN0IFJBVEVfV0lORE9XX01TID0gNjAgKiAxMDAwO1xuY29uc3QgUkVRVUVTVF9USU1FT1VUX01TID0gKCgpID0+IHtcbiAgY29uc3QgcmF3ID0gcHJvY2Vzcy5lbnYuVFdFTFZFX1RJTUVPVVRfTVM7XG4gIGlmIChyYXcgPT09IHVuZGVmaW5lZCB8fCByYXcgPT09IFwiXCIpIHJldHVybiAyNTAwO1xuICBjb25zdCB2YWx1ZSA9IE51bWJlcihyYXcpO1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHJldHVybiAyNTAwO1xuICByZXR1cm4gTWF0aC5tYXgoODAwLCB2YWx1ZSk7XG59KSgpO1xuY29uc3QgTkVXU19USU1FT1VUX01TID0gKCgpID0+IHtcbiAgY29uc3QgcmF3ID0gcHJvY2Vzcy5lbnYuTkVXU19USU1FT1VUX01TO1xuICBpZiAocmF3ID09PSB1bmRlZmluZWQgfHwgcmF3ID09PSBcIlwiKSByZXR1cm4gTWF0aC5tYXgoUkVRVUVTVF9USU1FT1VUX01TLCA0MjAwKTtcbiAgY29uc3QgdmFsdWUgPSBOdW1iZXIocmF3KTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSByZXR1cm4gTWF0aC5tYXgoUkVRVUVTVF9USU1FT1VUX01TLCA0MjAwKTtcbiAgcmV0dXJuIE1hdGgubWF4KDEyMDAsIHZhbHVlKTtcbn0pKCk7XG5jb25zdCBNQVhfVEhST1RUTEVfV0FJVF9NUyA9ICgoKSA9PiB7XG4gIGNvbnN0IHJhdyA9IHByb2Nlc3MuZW52LlRXRUxWRV9NQVhfV0FJVF9NUztcbiAgaWYgKHJhdyA9PT0gdW5kZWZpbmVkIHx8IHJhdyA9PT0gXCJcIikgcmV0dXJuIDEyMDA7XG4gIGNvbnN0IHZhbHVlID0gTnVtYmVyKHJhdyk7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkgcmV0dXJuIDEyMDA7XG4gIHJldHVybiBNYXRoLm1heCgyMDAsIHZhbHVlKTtcbn0pKCk7XG5cbmxldCBsYXN0UmVxdWVzdEF0ID0gMDtcbmxldCByZXF1ZXN0UXVldWUgPSBQcm9taXNlLnJlc29sdmUoKTtcbmNvbnN0IHJlY2VudFJlcXVlc3RUaW1lc3RhbXBzOiBudW1iZXJbXSA9IFtdO1xuXG5leHBvcnQgdHlwZSBRdW90ZSA9IHtcbiAgc3ltYm9sOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgY3VycmVuY3k6IHN0cmluZztcbiAgcHJpY2U6IG51bWJlciB8IG51bGw7XG4gIGNoYW5nZTogbnVtYmVyIHwgbnVsbDtcbiAgcGVyY2VudENoYW5nZTogbnVtYmVyIHwgbnVsbDtcbiAgb3BlbjogbnVtYmVyIHwgbnVsbDtcbiAgaGlnaDogbnVtYmVyIHwgbnVsbDtcbiAgbG93OiBudW1iZXIgfCBudWxsO1xuICB2b2x1bWU6IG51bWJlciB8IG51bGw7XG4gIHByZXZpb3VzQ2xvc2U6IG51bWJlciB8IG51bGw7XG4gIHRpbWVzdGFtcDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCB0eXBlIFRpbWVTZXJpZXNQb2ludCA9IHtcbiAgdGltZTogc3RyaW5nO1xuICBvcGVuOiBudW1iZXI7XG4gIGhpZ2g6IG51bWJlcjtcbiAgbG93OiBudW1iZXI7XG4gIGNsb3NlOiBudW1iZXI7XG4gIHZvbHVtZTogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgTmV3c0FydGljbGUgPSB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHVybDogc3RyaW5nO1xuICBzb3VyY2U6IHN0cmluZztcbiAgcHVibGlzaGVkQXQ6IHN0cmluZztcbiAgaW1hZ2VVcmw/OiBzdHJpbmc7XG4gIGNvbnRlbnQ/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBTdG9ja1RpY2tlciA9IHtcbiAgc3ltYm9sOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZXhjaGFuZ2U6IHN0cmluZztcbiAgY291bnRyeTogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIGN1cnJlbmN5Pzogc3RyaW5nO1xufTtcblxuY29uc3QgUVVPVEVfQ0FDSEUgPSBuZXcgTWFwPHN0cmluZywgeyB0aW1lc3RhbXA6IG51bWJlcjsgZGF0YTogUXVvdGUgfT4oKTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGU8VD4oa2V5OiBzdHJpbmcsIHR0bDogbnVtYmVyKTogVCB8IG51bGwge1xuICBjb25zdCBlbnRyeSA9IENBQ0hFLmdldChrZXkpO1xuICBpZiAoIWVudHJ5KSByZXR1cm4gbnVsbDtcbiAgaWYgKERhdGUubm93KCkgLSBlbnRyeS50aW1lc3RhbXAgPiB0dGwpIHtcbiAgICBDQUNIRS5kZWxldGUoa2V5KTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gZW50cnkuZGF0YSBhcyBUO1xufVxuXG5mdW5jdGlvbiBnZXRTdGFsZTxUPihrZXk6IHN0cmluZyk6IFQgfCBudWxsIHtcbiAgY29uc3QgZW50cnkgPSBDQUNIRS5nZXQoa2V5KTtcbiAgaWYgKCFlbnRyeSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBlbnRyeS5kYXRhIGFzIFQ7XG59XG5cbmZ1bmN0aW9uIHNldENhY2hlKGtleTogc3RyaW5nLCBkYXRhOiB1bmtub3duKSB7XG4gIENBQ0hFLnNldChrZXksIHsgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBkYXRhIH0pO1xufVxuXG5mdW5jdGlvbiB3aXRoQ2FjaGU8VD4oXG4gIGtleTogc3RyaW5nLFxuICB0dGw6IG51bWJlcixcbiAgZmV0Y2hlcjogKCkgPT4gUHJvbWlzZTxUPixcbiAgb3B0aW9uczogeyBzdGFsZUlmRXJyb3I/OiBib29sZWFuIH0gPSB7fVxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IHN0YWxlID0gb3B0aW9ucy5zdGFsZUlmRXJyb3IgPyBnZXRTdGFsZTxUPihrZXkpIDogbnVsbDtcbiAgY29uc3QgY2FjaGVkID0gZ2V0Q2FjaGU8VD4oa2V5LCB0dGwpO1xuICBpZiAoY2FjaGVkKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlZCk7XG5cbiAgaWYgKElOX0ZMSUdIVC5oYXMoa2V5KSkge1xuICAgIHJldHVybiBJTl9GTElHSFQuZ2V0KGtleSkgYXMgUHJvbWlzZTxUPjtcbiAgfVxuXG4gIGNvbnN0IHRhc2sgPSAoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hlcigpO1xuICAgICAgc2V0Q2FjaGUoa2V5LCBkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAob3B0aW9ucy5zdGFsZUlmRXJyb3IpIHtcbiAgICAgICAgaWYgKHN0YWxlKSByZXR1cm4gc3RhbGU7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgSU5fRkxJR0hULmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgfSkoKTtcblxuICBJTl9GTElHSFQuc2V0KGtleSwgdGFzayk7XG4gIHJldHVybiB0YXNrO1xufVxuXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgdW5kZWZpbmVkKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShwYXJzZWQpID8gcGFyc2VkIDogbnVsbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdGhyb3R0bGUoKSB7XG4gIHJlcXVlc3RRdWV1ZSA9IHJlcXVlc3RRdWV1ZVxuICAgIC5jYXRjaCgoKSA9PiB1bmRlZmluZWQpXG4gICAgLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgd2hpbGUgKFxuICAgICAgICAgIHJlY2VudFJlcXVlc3RUaW1lc3RhbXBzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICBub3cgLSByZWNlbnRSZXF1ZXN0VGltZXN0YW1wc1swXSA+PSBSQVRFX1dJTkRPV19NU1xuICAgICAgICApIHtcbiAgICAgICAgICByZWNlbnRSZXF1ZXN0VGltZXN0YW1wcy5zaGlmdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ2FwV2FpdCA9IE1hdGgubWF4KDAsIGxhc3RSZXF1ZXN0QXQgKyBNSU5fR0FQX01TIC0gbm93KTtcbiAgICAgICAgY29uc3Qgd2luZG93V2FpdCA9XG4gICAgICAgICAgcmVjZW50UmVxdWVzdFRpbWVzdGFtcHMubGVuZ3RoID49IE1BWF9SRVFVRVNUU19QRVJfTUlOXG4gICAgICAgICAgICA/IE1hdGgubWF4KDAsIHJlY2VudFJlcXVlc3RUaW1lc3RhbXBzWzBdICsgUkFURV9XSU5ET1dfTVMgLSBub3cpXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGNvbnN0IHdhaXQgPSBNYXRoLm1heChnYXBXYWl0LCB3aW5kb3dXYWl0KTtcblxuICAgICAgICBpZiAod2FpdCA8PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdhaXQgPiBNQVhfVEhST1RUTEVfV0FJVF9NUykge1xuICAgICAgICAgIGluY3JlbWVudENvdW50ZXIoXCJxdW90YS50d2VsdmUubG9jYWxfbGltaXRfYmxvY2tcIik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHdlbHZlIERhdGEgbG9jYWwgcmF0ZSBsaW1pdCByZWFjaGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgd2FpdCkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgbGFzdFJlcXVlc3RBdCA9IHRpbWVzdGFtcDtcbiAgICAgIHJlY2VudFJlcXVlc3RUaW1lc3RhbXBzLnB1c2godGltZXN0YW1wKTtcbiAgICAgIGluY3JlbWVudENvdW50ZXIoXCJxdW90YS50d2VsdmUucmVxdWVzdF9zbG90XCIpO1xuICAgIH0pO1xuICBhd2FpdCByZXF1ZXN0UXVldWU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHR3ZWx2ZUZldGNoPFQ+KGVuZHBvaW50OiBzdHJpbmcsIHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge1xuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5UV0VMVkVfREFUQV9LRVk7XG4gIGlmICghYXBpS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBUV0VMVkVfREFUQV9LRVkgaW4gLmVudi5sb2NhbFwiKTtcbiAgfVxuXG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7QVBJX0JBU0V9LyR7ZW5kcG9pbnR9YCk7XG4gIGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKTtcbiAgc2VhcmNoUGFyYW1zLnNldChcImFwaWtleVwiLCBhcGlLZXkpO1xuICB1cmwuc2VhcmNoID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XG5cbiAgY29uc3QgeyByZXNwb25zZSwgcGF5bG9hZCB9ID0gYXdhaXQgcnVuV2l0aFJlc2lsaWVuY2UoXG4gICAgYHR3ZWx2ZToke2VuZHBvaW50fWAsXG4gICAgYXN5bmMgKHsgc2lnbmFsIH0pID0+IHtcbiAgICAgIGF3YWl0IHRocm90dGxlKCk7XG4gICAgICBpbmNyZW1lbnRDb3VudGVyKFwiYXBpLnR3ZWx2ZS5mZXRjaFwiKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHsgc2lnbmFsIH0pO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiB7IHJlc3BvbnNlLCBwYXlsb2FkIH07XG4gICAgfSxcbiAgICB7XG4gICAgICB0aW1lb3V0TXM6IFJFUVVFU1RfVElNRU9VVF9NUyxcbiAgICAgIHJldHJpZXM6IDEsXG4gICAgICBvcGVuQWZ0ZXJGYWlsdXJlczogNCxcbiAgICAgIG9wZW5XaW5kb3dNczogNjAgKiAxMDAwLFxuICAgICAgc2hvdWxkUmV0cnk6IChlcnJvcikgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gU3RyaW5nKChlcnJvciBhcyBhbnkpPy5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICByZXR1cm4gIS9pbnZhbGlkfHBhcmFtZXRlcnxmb3JiaWRkZW58dW5hdXRob3JpemVkfDQwNC9pLnRlc3QobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFR3ZWx2ZSBEYXRhIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgfVxuXG4gIGlmIChwYXlsb2FkPy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgIHRocm93IG5ldyBFcnJvcihwYXlsb2FkLm1lc3NhZ2UgfHwgXCJUd2VsdmUgRGF0YSByZXR1cm5lZCBhbiBlcnJvclwiKTtcbiAgfVxuXG4gIGlmIChwYXlsb2FkPy5jb2RlICYmIHBheWxvYWQ/Lm1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IocGF5bG9hZC5tZXNzYWdlKTtcbiAgfVxuXG4gIHJldHVybiBwYXlsb2FkIGFzIFQ7XG59XG5cbmZ1bmN0aW9uIHN0b29xU3ltYm9scyhzeW1ib2w6IHN0cmluZykge1xuICBjb25zdCBub3JtYWxpemVkID0gc3ltYm9sLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xcLi9nLCBcIi1cIik7XG4gIGNvbnN0IGNhbmRpZGF0ZXMgPSBbYCR7bm9ybWFsaXplZH0udXNgLCBub3JtYWxpemVkXTtcbiAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChjYW5kaWRhdGVzKSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlU3Rvb3FDc3YoY3N2OiBzdHJpbmcpOiBUaW1lU2VyaWVzUG9pbnRbXSB7XG4gIGNvbnN0IGxpbmVzID0gY3N2LnRyaW0oKS5zcGxpdCgvXFxyP1xcbi8pO1xuICBpZiAobGluZXMubGVuZ3RoIDwgMikgcmV0dXJuIFtdO1xuICBjb25zdCByb3dzID0gbGluZXMuc2xpY2UoMSk7XG5cbiAgY29uc3QgcGFyc2VkID0gcm93c1xuICAgIC5tYXAoKGxpbmUpID0+IGxpbmUuc3BsaXQoXCIsXCIpKVxuICAgIC5maWx0ZXIoKGNvbHMpID0+IGNvbHMubGVuZ3RoID49IDYpXG4gICAgLm1hcCgoY29scykgPT4ge1xuICAgICAgY29uc3QgW2RhdGUsIG9wZW4sIGhpZ2gsIGxvdywgY2xvc2UsIHZvbHVtZV0gPSBjb2xzO1xuICAgICAgaWYgKCFkYXRlIHx8IFtvcGVuLCBoaWdoLCBsb3csIGNsb3NlXS5zb21lKCh2YWx1ZSkgPT4gdmFsdWUgPT09IFwiTi9EXCIpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgcG9pbnQ6IFRpbWVTZXJpZXNQb2ludCA9IHtcbiAgICAgICAgdGltZTogZGF0ZSxcbiAgICAgICAgb3BlbjogTnVtYmVyKG9wZW4pLFxuICAgICAgICBoaWdoOiBOdW1iZXIoaGlnaCksXG4gICAgICAgIGxvdzogTnVtYmVyKGxvdyksXG4gICAgICAgIGNsb3NlOiBOdW1iZXIoY2xvc2UpLFxuICAgICAgICB2b2x1bWU6IE51bWJlcih2b2x1bWUgfHwgMClcbiAgICAgIH07XG4gICAgICBpZiAoXG4gICAgICAgICFOdW1iZXIuaXNGaW5pdGUocG9pbnQub3BlbikgfHxcbiAgICAgICAgIU51bWJlci5pc0Zpbml0ZShwb2ludC5oaWdoKSB8fFxuICAgICAgICAhTnVtYmVyLmlzRmluaXRlKHBvaW50LmxvdykgfHxcbiAgICAgICAgIU51bWJlci5pc0Zpbml0ZShwb2ludC5jbG9zZSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwb2ludDtcbiAgICB9KVxuICAgIC5maWx0ZXIoKHBvaW50KTogcG9pbnQgaXMgVGltZVNlcmllc1BvaW50ID0+IEJvb2xlYW4ocG9pbnQpKVxuICAgIC5zb3J0KChhLCBiKSA9PiBhLnRpbWUubG9jYWxlQ29tcGFyZShiLnRpbWUpKTtcblxuICByZXR1cm4gcGFyc2VkLnNsaWNlKC0xODApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaFN0b29xU2VyaWVzKHN5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxUaW1lU2VyaWVzUG9pbnRbXT4ge1xuICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBzdG9vcVN5bWJvbHMoc3ltYm9sKSkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoU1RPT1FfQkFTRSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzXCIsIGNhbmRpZGF0ZSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJpXCIsIFwiZFwiKTtcblxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgUkVRVUVTVF9USU1FT1VUX01TKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwudG9TdHJpbmcoKSwgeyBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIH0pO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgY29udGludWU7XG4gICAgICBjb25zdCBjc3YgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZVN0b29xQ3N2KGNzdik7XG4gICAgICBpZiAocGFyc2VkLmxlbmd0aCkgcmV0dXJuIHBhcnNlZDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElnbm9yZSBhbmQgY29udGludWUgd2l0aCB0aGUgbmV4dCBjYW5kaWRhdGUuXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUXVvdGUocmF3OiBhbnkpOiBRdW90ZSB7XG4gIHJldHVybiB7XG4gICAgc3ltYm9sOiByYXcuc3ltYm9sLFxuICAgIG5hbWU6IHJhdy5uYW1lIHx8IHJhdy5zeW1ib2wsXG4gICAgY3VycmVuY3k6IHJhdy5jdXJyZW5jeSB8fCBcIlVTRFwiLFxuICAgIHByaWNlOiB0b051bWJlcihyYXcucHJpY2UpLFxuICAgIGNoYW5nZTogdG9OdW1iZXIocmF3LmNoYW5nZSksXG4gICAgcGVyY2VudENoYW5nZTogdG9OdW1iZXIocmF3LnBlcmNlbnRfY2hhbmdlKSxcbiAgICBvcGVuOiB0b051bWJlcihyYXcub3BlbiksXG4gICAgaGlnaDogdG9OdW1iZXIocmF3LmhpZ2gpLFxuICAgIGxvdzogdG9OdW1iZXIocmF3LmxvdyksXG4gICAgdm9sdW1lOiB0b051bWJlcihyYXcudm9sdW1lKSxcbiAgICBwcmV2aW91c0Nsb3NlOiB0b051bWJlcihyYXcucHJldmlvdXNfY2xvc2UpLFxuICAgIHRpbWVzdGFtcDogcmF3LmRhdGV0aW1lIHx8IHJhdy50aW1lc3RhbXAgfHwgbnVsbFxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRRdW90ZUNhY2hlKHN5bWJvbDogc3RyaW5nLCB0dGw6IG51bWJlcikge1xuICBjb25zdCBlbnRyeSA9IFFVT1RFX0NBQ0hFLmdldChzeW1ib2wpO1xuICBpZiAoIWVudHJ5KSByZXR1cm4gbnVsbDtcbiAgaWYgKERhdGUubm93KCkgLSBlbnRyeS50aW1lc3RhbXAgPiB0dGwpIHJldHVybiBudWxsO1xuICByZXR1cm4gZW50cnkuZGF0YTtcbn1cblxuZnVuY3Rpb24gZ2V0UXVvdGVTdGFsZShzeW1ib2w6IHN0cmluZykge1xuICBjb25zdCBlbnRyeSA9IFFVT1RFX0NBQ0hFLmdldChzeW1ib2wpO1xuICByZXR1cm4gZW50cnkgPyBlbnRyeS5kYXRhIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gc2V0UXVvdGVDYWNoZShzeW1ib2w6IHN0cmluZywgcXVvdGU6IFF1b3RlKSB7XG4gIFFVT1RFX0NBQ0hFLnNldChzeW1ib2wsIHsgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBkYXRhOiBxdW90ZSB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFF1b3RlKHN5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxRdW90ZT4ge1xuICBjb25zdCBbcXVvdGVdID0gYXdhaXQgZ2V0UXVvdGVzKFtzeW1ib2xdKTtcbiAgaWYgKCFxdW90ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlF1b3RlIG5vdCBmb3VuZFwiKTtcbiAgfVxuICByZXR1cm4gcXVvdGU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRRdW90ZXMoc3ltYm9sczogc3RyaW5nW10pOiBQcm9taXNlPFF1b3RlW10+IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IEFycmF5LmZyb20oXG4gICAgbmV3IFNldChzeW1ib2xzLm1hcCgoc3ltYm9sKSA9PiBzeW1ib2wudG9VcHBlckNhc2UoKSkpXG4gICkuZmlsdGVyKEJvb2xlYW4pO1xuICBpZiAobm9ybWFsaXplZC5sZW5ndGggPT09IDApIHJldHVybiBbXTtcbiAgY29uc3Qgc29ydGVkID0gWy4uLm5vcm1hbGl6ZWRdLnNvcnQoKTtcblxuICBjb25zdCByZXN1bHRNYXAgPSBuZXcgTWFwPHN0cmluZywgUXVvdGU+KCk7XG4gIGNvbnN0IHN0YWxlTWFwID0gbmV3IE1hcDxzdHJpbmcsIFF1b3RlPigpO1xuICBjb25zdCBtaXNzaW5nOiBzdHJpbmdbXSA9IFtdO1xuXG4gIHNvcnRlZC5mb3JFYWNoKChzeW1ib2wpID0+IHtcbiAgICBjb25zdCBmcmVzaCA9IGdldFF1b3RlQ2FjaGUoc3ltYm9sLCBRVU9URV9UVEwpO1xuICAgIGlmIChmcmVzaCkge1xuICAgICAgaW5jcmVtZW50Q291bnRlcihcImNhY2hlLnF1b3RlLmhpdFwiKTtcbiAgICAgIHJlc3VsdE1hcC5zZXQoc3ltYm9sLCBmcmVzaCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0YWxlID0gZ2V0UXVvdGVTdGFsZShzeW1ib2wpO1xuICAgIGlmIChzdGFsZSkge1xuICAgICAgc3RhbGVNYXAuc2V0KHN5bWJvbCwgc3RhbGUpO1xuICAgIH1cbiAgICBtaXNzaW5nLnB1c2goc3ltYm9sKTtcbiAgfSk7XG5cbiAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoUXVvdGVCYXRjaEFkYXB0aXZlKGJhdGNoOiBzdHJpbmdbXSk6IFByb21pc2U8YW55W10+IHtcbiAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuICAgICAgICBpZiAoYmF0Y2gubGVuZ3RoID4gTUFYX1NZTUJPTFNfUEVSX1JFUVVFU1QpIHtcbiAgICAgICAgICBjb25zdCBtaWRkbGUgPSBNYXRoLmNlaWwoYmF0Y2gubGVuZ3RoIC8gMik7XG4gICAgICAgICAgY29uc3QgW2xlZnQsIHJpZ2h0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIGZldGNoUXVvdGVCYXRjaEFkYXB0aXZlKGJhdGNoLnNsaWNlKDAsIG1pZGRsZSkpLFxuICAgICAgICAgICAgZmV0Y2hRdW90ZUJhdGNoQWRhcHRpdmUoYmF0Y2guc2xpY2UobWlkZGxlKSlcbiAgICAgICAgICBdKTtcbiAgICAgICAgICByZXR1cm4gWy4uLmxlZnQsIC4uLnJpZ2h0XTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB0d2VsdmVGZXRjaDxhbnk+KFwicXVvdGVcIiwge1xuICAgICAgICAgICAgc3ltYm9sOiBiYXRjaC5qb2luKFwiLFwiKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBheWxvYWQ/LmRhdGEpKSByZXR1cm4gcGF5bG9hZC5kYXRhO1xuICAgICAgICAgIGlmIChwYXlsb2FkPy5zeW1ib2wpIHJldHVybiBbcGF5bG9hZF07XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9IFN0cmluZyhlcnJvcj8ubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgICBjb25zdCBzaG91bGRTcGxpdCA9XG4gICAgICAgICAgICBiYXRjaC5sZW5ndGggPiAxICYmXG4gICAgICAgICAgICAvKHN5bWJvbHxwYXJhbWV0ZXJ8bGVuZ3RofHRvbyBtYW55fHRvbyBsb25nfGludmFsaWR8NDAwfDQxNHw0MjIpL2kudGVzdChcbiAgICAgICAgICAgICAgbWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIXNob3VsZFNwbGl0KSB0aHJvdyBlcnJvcjtcblxuICAgICAgICAgIGNvbnN0IG1pZGRsZSA9IE1hdGguY2VpbChiYXRjaC5sZW5ndGggLyAyKTtcbiAgICAgICAgICBjb25zdCBbbGVmdCwgcmlnaHRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgZmV0Y2hRdW90ZUJhdGNoQWRhcHRpdmUoYmF0Y2guc2xpY2UoMCwgbWlkZGxlKSksXG4gICAgICAgICAgICBmZXRjaFF1b3RlQmF0Y2hBZGFwdGl2ZShiYXRjaC5zbGljZShtaWRkbGUpKVxuICAgICAgICAgIF0pO1xuICAgICAgICAgIHJldHVybiBbLi4ubGVmdCwgLi4ucmlnaHRdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1lcmdlZCA9IGF3YWl0IGZldGNoUXVvdGVCYXRjaEFkYXB0aXZlKG1pc3NpbmcpO1xuXG4gICAgICBtZXJnZWQubWFwKG5vcm1hbGl6ZVF1b3RlKS5mb3JFYWNoKChxdW90ZSkgPT4ge1xuICAgICAgICBpZiAoIXF1b3RlLnN5bWJvbCkgcmV0dXJuO1xuICAgICAgICBzZXRRdW90ZUNhY2hlKHF1b3RlLnN5bWJvbCwgcXVvdGUpO1xuICAgICAgICBpbmNyZW1lbnRDb3VudGVyKFwiY2FjaGUucXVvdGUud3JpdGVcIik7XG4gICAgICAgIHJlc3VsdE1hcC5zZXQocXVvdGUuc3ltYm9sLCBxdW90ZSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKCFzdGFsZU1hcC5zaXplKSB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBzdGFsZU1hcC5mb3JFYWNoKChxdW90ZSwgc3ltYm9sKSA9PiB7XG4gICAgaWYgKCFyZXN1bHRNYXAuaGFzKHN5bWJvbCkpIHtcbiAgICAgIHJlc3VsdE1hcC5zZXQoc3ltYm9sLCBxdW90ZSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gc29ydGVkXG4gICAgLm1hcCgoc3ltYm9sKSA9PiByZXN1bHRNYXAuZ2V0KHN5bWJvbCkpXG4gICAgLmZpbHRlcigocXVvdGUpOiBxdW90ZSBpcyBRdW90ZSA9PiBCb29sZWFuKHF1b3RlKSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUaW1lU2VyaWVzKFxuICBzeW1ib2w6IHN0cmluZyxcbiAgaW50ZXJ2YWwgPSBcIjFkYXlcIlxuKTogUHJvbWlzZTxUaW1lU2VyaWVzUG9pbnRbXT4ge1xuICBjb25zdCBjYWNoZUtleSA9IGBzZXJpZXM6JHtzeW1ib2x9OiR7aW50ZXJ2YWx9YDtcbiAgcmV0dXJuIHdpdGhDYWNoZShcbiAgICBjYWNoZUtleSxcbiAgICBTRVJJRVNfVFRMLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCB0d2VsdmVFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHR3ZWx2ZUZldGNoPGFueT4oXCJ0aW1lX3Nlcmllc1wiLCB7XG4gICAgICAgICAgc3ltYm9sLFxuICAgICAgICAgIGludGVydmFsLFxuICAgICAgICAgIG91dHB1dHNpemU6IFwiOTBcIlxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocGF5bG9hZD8udmFsdWVzPy5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXlsb2FkLnZhbHVlc1xuICAgICAgICAgICAgLm1hcCgodmFsdWU6IGFueSkgPT4gKHtcbiAgICAgICAgICAgICAgdGltZTogU3RyaW5nKHZhbHVlLmRhdGV0aW1lIHx8IFwiXCIpLnRyaW0oKSxcbiAgICAgICAgICAgICAgb3BlbjogTnVtYmVyKHZhbHVlLm9wZW4pLFxuICAgICAgICAgICAgICBoaWdoOiBOdW1iZXIodmFsdWUuaGlnaCksXG4gICAgICAgICAgICAgIGxvdzogTnVtYmVyKHZhbHVlLmxvdyksXG4gICAgICAgICAgICAgIGNsb3NlOiBOdW1iZXIodmFsdWUuY2xvc2UpLFxuICAgICAgICAgICAgICB2b2x1bWU6IE51bWJlcih2YWx1ZS52b2x1bWUgfHwgMClcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgLmZpbHRlcigocG9pbnQ6IFRpbWVTZXJpZXNQb2ludCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoIXBvaW50LnRpbWUpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIFtwb2ludC5vcGVuLCBwb2ludC5oaWdoLCBwb2ludC5sb3csIHBvaW50LmNsb3NlXS5ldmVyeSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBOdW1iZXIuaXNGaW5pdGUoaXRlbSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydCgoYTogVGltZVNlcmllc1BvaW50LCBiOiBUaW1lU2VyaWVzUG9pbnQpID0+XG4gICAgICAgICAgICAgIGEudGltZS5sb2NhbGVDb21wYXJlKGIudGltZSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKHBhcnNlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQuc2xpY2UoLTE4MCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHR3ZWx2ZUVycm9yID0gbmV3IEVycm9yKFwiTm8gdGltZSBzZXJpZXMgZGF0YSBhdmFpbGFibGVcIik7XG4gICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgIHR3ZWx2ZUVycm9yID1cbiAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICA/IGVycm9yXG4gICAgICAgICAgICA6IG5ldyBFcnJvcihlcnJvcj8ubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBsb2FkIHRpbWUgc2VyaWVzXCIpO1xuICAgICAgfVxuXG4gICAgICAvLyBGcmVlIGZhbGxiYWNrIGRhdGEgc291cmNlIHRvIGtlZXAgY2hhcnRzIGF2YWlsYWJsZSB3aGVuIFR3ZWx2ZSBEYXRhIGlzIHNsb3cvbGltaXRlZC5cbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gYXdhaXQgZmV0Y2hTdG9vcVNlcmllcyhzeW1ib2wpO1xuICAgICAgaWYgKGZhbGxiYWNrLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsbGJhY2s7XG4gICAgICB9XG5cbiAgICAgIHRocm93IHR3ZWx2ZUVycm9yIHx8IG5ldyBFcnJvcihcIk5vIHRpbWUgc2VyaWVzIGRhdGEgYXZhaWxhYmxlXCIpO1xuICAgIH0sXG4gICAgeyBzdGFsZUlmRXJyb3I6IHRydWUgfVxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmV3cyhcbiAgc3ltYm9sOiBzdHJpbmcsXG4gIG9wdGlvbnM6IHsgZnJvbT86IHN0cmluZzsgdG8/OiBzdHJpbmcgfSA9IHt9XG4pOiBQcm9taXNlPE5ld3NBcnRpY2xlW10+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVXU19BUElfS0VZO1xuICBpZiAoIWFwaUtleSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IHF1ZXJ5ID0gc3ltYm9sXG4gICAgPyBgJHtzeW1ib2x9IE9SICR7c3ltYm9sfSBzdG9ja2BcbiAgICA6IFwic3RvY2sgbWFya2V0XCI7XG5cbiAgY29uc3QgY2FjaGVLZXkgPSBgbmV3czoke3F1ZXJ5fToke29wdGlvbnMuZnJvbSB8fCBcIlwifToke29wdGlvbnMudG8gfHwgXCJcIn1gO1xuICByZXR1cm4gd2l0aENhY2hlKFxuICAgIGNhY2hlS2V5LFxuICAgIE5FV1NfVFRMLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYCR7TkVXU19BUElfQkFTRX0vZXZlcnl0aGluZ2ApO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJxXCIsIHF1ZXJ5KTtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic29ydEJ5XCIsIFwicHVibGlzaGVkQXRcIik7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImxhbmd1YWdlXCIsIFwiZW5cIik7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInBhZ2VTaXplXCIsIFwiOFwiKTtcbiAgICAgIGlmIChvcHRpb25zLmZyb20pIHtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJmcm9tXCIsIG9wdGlvbnMuZnJvbSk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInRvXCIsIG9wdGlvbnMudG8pO1xuICAgICAgfVxuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJhcGlLZXlcIiwgYXBpS2V5KTtcblxuICAgICAgY29uc3QgeyByZXNwb25zZSwgcGF5bG9hZCB9ID0gYXdhaXQgcnVuV2l0aFJlc2lsaWVuY2UoXG4gICAgICAgIFwibmV3cy1hcGk6ZXZlcnl0aGluZ1wiLFxuICAgICAgICBhc3luYyAoeyBzaWduYWwgfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHsgc2lnbmFsIH0pO1xuICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgcmV0dXJuIHsgcmVzcG9uc2UsIHBheWxvYWQgfTtcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVvdXRNczogTkVXU19USU1FT1VUX01TLFxuICAgICAgICAgIHJldHJpZXM6IDEsXG4gICAgICAgICAgb3BlbkFmdGVyRmFpbHVyZXM6IDMsXG4gICAgICAgICAgb3BlbldpbmRvd01zOiA0NSAqIDEwMDAsXG4gICAgICAgICAgc2hvdWxkUmV0cnk6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IFN0cmluZygoZXJyb3IgYXMgYW55KT8ubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgICAgIHJldHVybiAhL2FwaSBrZXl8dW5hdXRob3JpemVkfGZvcmJpZGRlbnw0MjkvaS50ZXN0KG1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocGF5bG9hZD8ubWVzc2FnZSB8fCBcIk5ld3MgQVBJIGVycm9yXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKHBheWxvYWQuYXJ0aWNsZXMgfHwgW10pLm1hcCgoYXJ0aWNsZTogYW55KSA9PiAoe1xuICAgICAgICB0aXRsZTogYXJ0aWNsZS50aXRsZSxcbiAgICAgICAgZGVzY3JpcHRpb246IGFydGljbGUuZGVzY3JpcHRpb24gfHwgYXJ0aWNsZS5jb250ZW50IHx8IFwiXCIsXG4gICAgICAgIHVybDogYXJ0aWNsZS51cmwsXG4gICAgICAgIHNvdXJjZTogYXJ0aWNsZS5zb3VyY2U/Lm5hbWUgfHwgXCJOZXdzXCIsXG4gICAgICAgIHB1Ymxpc2hlZEF0OiBhcnRpY2xlLnB1Ymxpc2hlZEF0LFxuICAgICAgICBpbWFnZVVybDogYXJ0aWNsZS51cmxUb0ltYWdlIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgY29udGVudDogYXJ0aWNsZS5jb250ZW50IHx8IHVuZGVmaW5lZFxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgeyBzdGFsZUlmRXJyb3I6IHRydWUgfVxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoVGlja2VycyhcbiAgcXVlcnk6IHN0cmluZyxcbiAgbGltaXQgPSAxMlxuKTogUHJvbWlzZTxTdG9ja1RpY2tlcltdPiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSBxdWVyeS50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgaWYgKCFub3JtYWxpemVkKSByZXR1cm4gW107XG4gIGNvbnN0IHNhZmVMaW1pdCA9IE1hdGgubWF4KDEsIE1hdGgubWluKDMwLCBsaW1pdCkpO1xuICBjb25zdCBjYWNoZUtleSA9IGB0aWNrZXJzOiR7bm9ybWFsaXplZH06JHtzYWZlTGltaXR9YDtcbiAgcmV0dXJuIHdpdGhDYWNoZShcbiAgICBjYWNoZUtleSxcbiAgICBUSUNLRVJfVFRMLFxuICAgIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB0d2VsdmVGZXRjaDxhbnk+KFwic3ltYm9sX3NlYXJjaFwiLCB7XG4gICAgICAgIHN5bWJvbDogbm9ybWFsaXplZCxcbiAgICAgICAgb3V0cHV0c2l6ZTogU3RyaW5nKHNhZmVMaW1pdClcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZGF0YSA9IEFycmF5LmlzQXJyYXkocGF5bG9hZD8uZGF0YSkgPyBwYXlsb2FkLmRhdGEgOiBbXTtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgICAgIC5tYXAoKGl0ZW06IGFueSkgPT4gKHtcbiAgICAgICAgICBzeW1ib2w6IFN0cmluZyhpdGVtPy5zeW1ib2wgfHwgXCJcIikudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICBuYW1lOiBTdHJpbmcoaXRlbT8uaW5zdHJ1bWVudF9uYW1lIHx8IGl0ZW0/LnN5bWJvbCB8fCBcIlwiKSxcbiAgICAgICAgICBleGNoYW5nZTogU3RyaW5nKGl0ZW0/LmV4Y2hhbmdlIHx8IFwiXCIpLFxuICAgICAgICAgIGNvdW50cnk6IFN0cmluZyhpdGVtPy5jb3VudHJ5IHx8IFwiXCIpLFxuICAgICAgICAgIHR5cGU6IFN0cmluZyhpdGVtPy50eXBlIHx8IFwiXCIpLFxuICAgICAgICAgIGN1cnJlbmN5OiBpdGVtPy5jdXJyZW5jeSA/IFN0cmluZyhpdGVtLmN1cnJlbmN5KSA6IHVuZGVmaW5lZFxuICAgICAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoaXRlbTogU3RvY2tUaWNrZXIpID0+IGl0ZW0uc3ltYm9sLmxlbmd0aCA+IDApO1xuICAgIH0sXG4gICAgeyBzdGFsZUlmRXJyb3I6IHRydWUgfVxuICApO1xufVxuIl0sIm5hbWVzIjpbInJ1bldpdGhSZXNpbGllbmNlIiwiaW5jcmVtZW50Q291bnRlciIsIkFQSV9CQVNFIiwiU1RPT1FfQkFTRSIsIk5FV1NfQVBJX0JBU0UiLCJwcm9jZXNzIiwiZW52IiwiQ0FDSEUiLCJNYXAiLCJJTl9GTElHSFQiLCJRVU9URV9UVEwiLCJTRVJJRVNfVFRMIiwiTkVXU19UVEwiLCJUSUNLRVJfVFRMIiwiTUFYX1NZTUJPTFNfUEVSX1JFUVVFU1QiLCJNYXRoIiwibWF4IiwiTnVtYmVyIiwiVFdFTFZFX0JBVENIX1NJWkUiLCJNSU5fR0FQX01TIiwicmF3IiwiVFdFTFZFX01JTl9HQVBfTVMiLCJ1bmRlZmluZWQiLCJ2YWx1ZSIsImlzRmluaXRlIiwiTUFYX1JFUVVFU1RTX1BFUl9NSU4iLCJUV0VMVkVfTUFYX1BFUl9NSU4iLCJmbG9vciIsIlJBVEVfV0lORE9XX01TIiwiUkVRVUVTVF9USU1FT1VUX01TIiwiVFdFTFZFX1RJTUVPVVRfTVMiLCJORVdTX1RJTUVPVVRfTVMiLCJNQVhfVEhST1RUTEVfV0FJVF9NUyIsIlRXRUxWRV9NQVhfV0FJVF9NUyIsImxhc3RSZXF1ZXN0QXQiLCJyZXF1ZXN0UXVldWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlY2VudFJlcXVlc3RUaW1lc3RhbXBzIiwiUVVPVEVfQ0FDSEUiLCJnZXRDYWNoZSIsImtleSIsInR0bCIsImVudHJ5IiwiZ2V0IiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcCIsImRlbGV0ZSIsImRhdGEiLCJnZXRTdGFsZSIsInNldENhY2hlIiwic2V0Iiwid2l0aENhY2hlIiwiZmV0Y2hlciIsIm9wdGlvbnMiLCJzdGFsZSIsInN0YWxlSWZFcnJvciIsImNhY2hlZCIsImhhcyIsInRhc2siLCJlcnJvciIsInRvTnVtYmVyIiwicGFyc2VkIiwidGhyb3R0bGUiLCJjYXRjaCIsInRoZW4iLCJsZW5ndGgiLCJzaGlmdCIsImdhcFdhaXQiLCJ3aW5kb3dXYWl0Iiwid2FpdCIsIkVycm9yIiwic2V0VGltZW91dCIsInB1c2giLCJ0d2VsdmVGZXRjaCIsImVuZHBvaW50IiwicGFyYW1zIiwiYXBpS2V5IiwiVFdFTFZFX0RBVEFfS0VZIiwidXJsIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2VhcmNoIiwidG9TdHJpbmciLCJyZXNwb25zZSIsInBheWxvYWQiLCJzaWduYWwiLCJmZXRjaCIsImpzb24iLCJ0aW1lb3V0TXMiLCJyZXRyaWVzIiwib3BlbkFmdGVyRmFpbHVyZXMiLCJvcGVuV2luZG93TXMiLCJzaG91bGRSZXRyeSIsIm1lc3NhZ2UiLCJTdHJpbmciLCJ0ZXN0Iiwib2siLCJzdGF0dXMiLCJjb2RlIiwic3Rvb3FTeW1ib2xzIiwic3ltYm9sIiwibm9ybWFsaXplZCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJjYW5kaWRhdGVzIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwicGFyc2VTdG9vcUNzdiIsImNzdiIsImxpbmVzIiwic3BsaXQiLCJyb3dzIiwic2xpY2UiLCJtYXAiLCJsaW5lIiwiZmlsdGVyIiwiY29scyIsImRhdGUiLCJvcGVuIiwiaGlnaCIsImxvdyIsImNsb3NlIiwidm9sdW1lIiwic29tZSIsInBvaW50IiwidGltZSIsIkJvb2xlYW4iLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwiZmV0Y2hTdG9vcVNlcmllcyIsImNhbmRpZGF0ZSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lciIsImFib3J0IiwidGV4dCIsImNsZWFyVGltZW91dCIsIm5vcm1hbGl6ZVF1b3RlIiwibmFtZSIsImN1cnJlbmN5IiwicHJpY2UiLCJjaGFuZ2UiLCJwZXJjZW50Q2hhbmdlIiwicGVyY2VudF9jaGFuZ2UiLCJwcmV2aW91c0Nsb3NlIiwicHJldmlvdXNfY2xvc2UiLCJkYXRldGltZSIsImdldFF1b3RlQ2FjaGUiLCJnZXRRdW90ZVN0YWxlIiwic2V0UXVvdGVDYWNoZSIsInF1b3RlIiwiZ2V0UXVvdGUiLCJnZXRRdW90ZXMiLCJzeW1ib2xzIiwidG9VcHBlckNhc2UiLCJzb3J0ZWQiLCJyZXN1bHRNYXAiLCJzdGFsZU1hcCIsIm1pc3NpbmciLCJmb3JFYWNoIiwiZnJlc2giLCJmZXRjaFF1b3RlQmF0Y2hBZGFwdGl2ZSIsImJhdGNoIiwibWlkZGxlIiwiY2VpbCIsImxlZnQiLCJyaWdodCIsImFsbCIsImpvaW4iLCJpc0FycmF5Iiwic2hvdWxkU3BsaXQiLCJtZXJnZWQiLCJzaXplIiwiZ2V0VGltZVNlcmllcyIsImludGVydmFsIiwiY2FjaGVLZXkiLCJ0d2VsdmVFcnJvciIsIm91dHB1dHNpemUiLCJ2YWx1ZXMiLCJldmVyeSIsIml0ZW0iLCJmYWxsYmFjayIsImdldE5ld3MiLCJORVdTX0FQSV9LRVkiLCJxdWVyeSIsInRvIiwiYXJ0aWNsZXMiLCJhcnRpY2xlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNvbnRlbnQiLCJzb3VyY2UiLCJwdWJsaXNoZWRBdCIsImltYWdlVXJsIiwidXJsVG9JbWFnZSIsInNlYXJjaFRpY2tlcnMiLCJsaW1pdCIsInNhZmVMaW1pdCIsIm1pbiIsImluc3RydW1lbnRfbmFtZSIsImV4Y2hhbmdlIiwiY291bnRyeSIsInR5cGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/twelveData.ts\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/stream/quotes.ts":
/*!****************************************!*\
  !*** ./src/pages/api/stream/quotes.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_dataAccess_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/dataAccess/service */ \"(api-node)/./src/lib/dataAccess/service.ts\");\n/* harmony import */ var _lib_apiValidation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/apiValidation */ \"(api-node)/./src/lib/apiValidation.ts\");\n/* harmony import */ var _contracts_requestContracts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contracts/requestContracts */ \"(api-node)/./src/contracts/requestContracts.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contracts_requestContracts__WEBPACK_IMPORTED_MODULE_2__]);\n_contracts_requestContracts__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nfunction isUsMarketHours(now = new Date()) {\n    const day = now.getUTCDay();\n    if (day === 0 || day === 6) return false;\n    const minutes = now.getUTCHours() * 60 + now.getUTCMinutes();\n    // 14:30 - 21:00 UTC\n    return minutes >= 14 * 60 + 30 && minutes <= 21 * 60;\n}\nfunction heartbeatMs() {\n    return isUsMarketHours() ? 10000 : 30000;\n}\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const query = (0,_lib_apiValidation__WEBPACK_IMPORTED_MODULE_1__.parseQuery)(req, res, _contracts_requestContracts__WEBPACK_IMPORTED_MODULE_2__.streamQuotesQuerySchema);\n    if (!query) return;\n    const symbols = query.symbols;\n    res.writeHead(200, {\n        \"Content-Type\": \"text/event-stream\",\n        \"Cache-Control\": \"no-cache, no-transform\",\n        Connection: \"keep-alive\",\n        \"X-Accel-Buffering\": \"no\"\n    });\n    let closed = false;\n    const sendSnapshot = async ()=>{\n        if (closed) return;\n        try {\n            const payload = await _lib_dataAccess_service__WEBPACK_IMPORTED_MODULE_0__.dataAccess.quotes(symbols);\n            res.write(`event: quotes\\ndata: ${JSON.stringify({\n                quotes: payload.quotes,\n                updatedAt: new Date().toISOString()\n            })}\\n\\n`);\n        } catch (error) {\n            res.write(`event: error\\ndata: ${JSON.stringify({\n                message: error?.message || \"Stream update failed\"\n            })}\\n\\n`);\n        }\n    };\n    const loop = async ()=>{\n        while(!closed){\n            await sendSnapshot();\n            await new Promise((resolve)=>setTimeout(resolve, heartbeatMs()));\n        }\n    };\n    req.socket.on(\"close\", ()=>{\n        closed = true;\n    });\n    res.write(`event: ready\\ndata: {\"ok\":true}\\n\\n`);\n    void loop();\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvc3RyZWFtL3F1b3Rlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNzRDtBQUNMO0FBQ3NCO0FBRWhFLE1BQU1HLFNBQVM7SUFDcEJDLEtBQUs7UUFDSEMsWUFBWTtJQUNkO0FBQ0YsRUFBRTtBQUVGLFNBQVNDLGdCQUFnQkMsTUFBTSxJQUFJQyxNQUFNO0lBQ3ZDLE1BQU1DLE1BQU1GLElBQUlHLFNBQVM7SUFDekIsSUFBSUQsUUFBUSxLQUFLQSxRQUFRLEdBQUcsT0FBTztJQUNuQyxNQUFNRSxVQUFVSixJQUFJSyxXQUFXLEtBQUssS0FBS0wsSUFBSU0sYUFBYTtJQUMxRCxvQkFBb0I7SUFDcEIsT0FBT0YsV0FBVyxLQUFLLEtBQUssTUFBTUEsV0FBVyxLQUFLO0FBQ3BEO0FBRUEsU0FBU0c7SUFDUCxPQUFPUixvQkFBb0IsUUFBUztBQUN0QztBQUVlLGVBQWVTLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLE1BQU1DLFFBQVFyQiw4REFBVUEsQ0FBQ2UsS0FBS0MsS0FBS2YsZ0ZBQXVCQTtJQUMxRCxJQUFJLENBQUNvQixPQUFPO0lBQ1osTUFBTUMsVUFBVUQsTUFBTUMsT0FBTztJQUU3Qk4sSUFBSU8sU0FBUyxDQUFDLEtBQUs7UUFDakIsZ0JBQWdCO1FBQ2hCLGlCQUFpQjtRQUNqQkMsWUFBWTtRQUNaLHFCQUFxQjtJQUN2QjtJQUVBLElBQUlDLFNBQVM7SUFFYixNQUFNQyxlQUFlO1FBQ25CLElBQUlELFFBQVE7UUFDWixJQUFJO1lBQ0YsTUFBTUUsVUFBVSxNQUFNNUIsK0RBQVVBLENBQUM2QixNQUFNLENBQUNOO1lBQ3hDTixJQUFJYSxLQUFLLENBQ1AsQ0FBQyxxQkFBcUIsRUFBRUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNyQ0gsUUFBUUQsUUFBUUMsTUFBTTtnQkFDdEJJLFdBQVcsSUFBSXpCLE9BQU8wQixXQUFXO1lBQ25DLEdBQUcsSUFBSSxDQUFDO1FBRVosRUFBRSxPQUFPYixPQUFZO1lBQ25CSixJQUFJYSxLQUFLLENBQ1AsQ0FBQyxvQkFBb0IsRUFBRUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNwQ0csU0FBU2QsT0FBT2MsV0FBVztZQUM3QixHQUFHLElBQUksQ0FBQztRQUVaO0lBQ0Y7SUFFQSxNQUFNQyxPQUFPO1FBQ1gsTUFBTyxDQUFDVixPQUFRO1lBQ2QsTUFBTUM7WUFDTixNQUFNLElBQUlVLFFBQVEsQ0FBQ0MsVUFBWUMsV0FBV0QsU0FBU3hCO1FBQ3JEO0lBQ0Y7SUFFQUUsSUFBSXdCLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLFNBQVM7UUFDckJmLFNBQVM7SUFDWDtJQUVBVCxJQUFJYSxLQUFLLENBQUMsQ0FBQyxtQ0FBbUMsQ0FBQztJQUMvQyxLQUFLTTtBQUNQIiwic291cmNlcyI6WyIvVXNlcnMvdHV1bGFpL0RvY3VtZW50cy90bXAvc3JjL3BhZ2VzL2FwaS9zdHJlYW0vcXVvdGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBkYXRhQWNjZXNzIH0gZnJvbSBcIkAvbGliL2RhdGFBY2Nlc3Mvc2VydmljZVwiO1xuaW1wb3J0IHsgcGFyc2VRdWVyeSB9IGZyb20gXCJAL2xpYi9hcGlWYWxpZGF0aW9uXCI7XG5pbXBvcnQgeyBzdHJlYW1RdW90ZXNRdWVyeVNjaGVtYSB9IGZyb20gXCJAL2NvbnRyYWN0cy9yZXF1ZXN0Q29udHJhY3RzXCI7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGlzVXNNYXJrZXRIb3Vycyhub3cgPSBuZXcgRGF0ZSgpKSB7XG4gIGNvbnN0IGRheSA9IG5vdy5nZXRVVENEYXkoKTtcbiAgaWYgKGRheSA9PT0gMCB8fCBkYXkgPT09IDYpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgbWludXRlcyA9IG5vdy5nZXRVVENIb3VycygpICogNjAgKyBub3cuZ2V0VVRDTWludXRlcygpO1xuICAvLyAxNDozMCAtIDIxOjAwIFVUQ1xuICByZXR1cm4gbWludXRlcyA+PSAxNCAqIDYwICsgMzAgJiYgbWludXRlcyA8PSAyMSAqIDYwO1xufVxuXG5mdW5jdGlvbiBoZWFydGJlYXRNcygpIHtcbiAgcmV0dXJuIGlzVXNNYXJrZXRIb3VycygpID8gMTBfMDAwIDogMzBfMDAwO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSBcIkdFVFwiKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XG4gIH1cblxuICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnkocmVxLCByZXMsIHN0cmVhbVF1b3Rlc1F1ZXJ5U2NoZW1hKTtcbiAgaWYgKCFxdWVyeSkgcmV0dXJuO1xuICBjb25zdCBzeW1ib2xzID0gcXVlcnkuc3ltYm9scztcblxuICByZXMud3JpdGVIZWFkKDIwMCwge1xuICAgIFwiQ29udGVudC1UeXBlXCI6IFwidGV4dC9ldmVudC1zdHJlYW1cIixcbiAgICBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1jYWNoZSwgbm8tdHJhbnNmb3JtXCIsXG4gICAgQ29ubmVjdGlvbjogXCJrZWVwLWFsaXZlXCIsXG4gICAgXCJYLUFjY2VsLUJ1ZmZlcmluZ1wiOiBcIm5vXCJcbiAgfSk7XG5cbiAgbGV0IGNsb3NlZCA9IGZhbHNlO1xuXG4gIGNvbnN0IHNlbmRTbmFwc2hvdCA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoY2xvc2VkKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBkYXRhQWNjZXNzLnF1b3RlcyhzeW1ib2xzKTtcbiAgICAgIHJlcy53cml0ZShcbiAgICAgICAgYGV2ZW50OiBxdW90ZXNcXG5kYXRhOiAke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBxdW90ZXM6IHBheWxvYWQucXVvdGVzLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pfVxcblxcbmBcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmVzLndyaXRlKFxuICAgICAgICBgZXZlbnQ6IGVycm9yXFxuZGF0YTogJHtKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbWVzc2FnZTogZXJyb3I/Lm1lc3NhZ2UgfHwgXCJTdHJlYW0gdXBkYXRlIGZhaWxlZFwiXG4gICAgICAgIH0pfVxcblxcbmBcbiAgICAgICk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGxvb3AgPSBhc3luYyAoKSA9PiB7XG4gICAgd2hpbGUgKCFjbG9zZWQpIHtcbiAgICAgIGF3YWl0IHNlbmRTbmFwc2hvdCgpO1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgaGVhcnRiZWF0TXMoKSkpO1xuICAgIH1cbiAgfTtcblxuICByZXEuc29ja2V0Lm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgIGNsb3NlZCA9IHRydWU7XG4gIH0pO1xuXG4gIHJlcy53cml0ZShgZXZlbnQ6IHJlYWR5XFxuZGF0YToge1wib2tcIjp0cnVlfVxcblxcbmApO1xuICB2b2lkIGxvb3AoKTtcbn1cbiJdLCJuYW1lcyI6WyJkYXRhQWNjZXNzIiwicGFyc2VRdWVyeSIsInN0cmVhbVF1b3Rlc1F1ZXJ5U2NoZW1hIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsImlzVXNNYXJrZXRIb3VycyIsIm5vdyIsIkRhdGUiLCJkYXkiLCJnZXRVVENEYXkiLCJtaW51dGVzIiwiZ2V0VVRDSG91cnMiLCJnZXRVVENNaW51dGVzIiwiaGVhcnRiZWF0TXMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicXVlcnkiLCJzeW1ib2xzIiwid3JpdGVIZWFkIiwiQ29ubmVjdGlvbiIsImNsb3NlZCIsInNlbmRTbmFwc2hvdCIsInBheWxvYWQiLCJxdW90ZXMiLCJ3cml0ZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVkQXQiLCJ0b0lTT1N0cmluZyIsIm1lc3NhZ2UiLCJsb29wIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwic29ja2V0Iiwib24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/stream/quotes.ts\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sentiment":
/*!****************************!*\
  !*** external "sentiment" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("sentiment");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstream%2Fquotes&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fstream%2Fquotes.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();